<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>plotly | Автоматизированный сбор больших данных в экономико-социологических исследованиях</title>
  <meta name="description" content="plotly | Автоматизированный сбор больших данных в экономико-социологических исследованиях" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="plotly | Автоматизированный сбор больших данных в экономико-социологических исследованиях" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="plotly | Автоматизированный сбор больших данных в экономико-социологических исследованиях" />
  
  
  

<meta name="author" content="Ph.A.Upravitelev" />


<meta name="date" content="2023-12-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ggplot2-pt2.html"/>
<link rel="next" href="web-скрапинг.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.0/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R course</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i>Введение</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#запись-занятия"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#data-culture"><i class="fa fa-check"></i>Data culture</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#обо-мне"><i class="fa fa-check"></i>Обо мне</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#contacts"><i class="fa fa-check"></i>Contacts</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#mm-invite-link"><i class="fa fa-check"></i>MM invite link</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#syllabus"><i class="fa fa-check"></i>Syllabus</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r-intro"><i class="fa fa-check"></i>R intro</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#short-history"><i class="fa fa-check"></i>Short history</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r-ecosystem"><i class="fa fa-check"></i>R ecosystem</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r-rstudio"><i class="fa fa-check"></i>R + RStudio</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#альтернативные-ide"><i class="fa fa-check"></i>Альтернативные IDE</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#style-guide"><i class="fa fa-check"></i>Style guide</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#синтаксис"><i class="fa fa-check"></i>Синтаксис</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#структура-выражения"><i class="fa fa-check"></i>Структура выражения</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#вывод-на-печать"><i class="fa fa-check"></i>Вывод на печать</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#присваивание"><i class="fa fa-check"></i>Присваивание</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#операторы-присвоения"><i class="fa fa-check"></i>Операторы присвоения</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#арифметические-операторы"><i class="fa fa-check"></i>Арифметические операторы</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#операторы-сравнения"><i class="fa fa-check"></i>Операторы сравнения</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#логические-операторы"><i class="fa fa-check"></i>Логические операторы</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#комментарии-и-кавычки"><i class="fa fa-check"></i>Комментарии и кавычки</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#окружение-и-подсказки"><i class="fa fa-check"></i>Окружение и подсказки</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#полезные-функции-для-работы-с-окружением"><i class="fa fa-check"></i>Полезные функции для работы с окружением</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#help"><i class="fa fa-check"></i>help</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#стандартные-ошибки-в-синтаксисе"><i class="fa fa-check"></i>Стандартные ошибки в синтаксисе</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#object-not-found"><i class="fa fa-check"></i>Object not found</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#дополнительные-материалы"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#домашнее-задание"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#организационное-mm"><i class="fa fa-check"></i>Организационное / MM</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#операторы-и-создание-векторов"><i class="fa fa-check"></i>Операторы и создание векторов</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i>Векторы</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#запись-занятия-1"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#векторы"><i class="fa fa-check"></i>Векторы</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#атомарные-типы-данных"><i class="fa fa-check"></i>Атомарные типы данных</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#создание-векторов"><i class="fa fa-check"></i>Создание векторов</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#приведение-типов"><i class="fa fa-check"></i>Приведение типов</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#выбор-элемента-вектора"><i class="fa fa-check"></i>Выбор элемента вектора</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#выбор-по-номеру-позиции"><i class="fa fa-check"></i>Выбор по номеру позиции</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#выбор-по-значению"><i class="fa fa-check"></i>Выбор по значению</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#проверка-на-na"><i class="fa fa-check"></i>Проверка на NA</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#домашнее-задание-1"><i class="fa fa-check"></i>Домашнее задание</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i>Списки и таблицы</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#запись-занятия-23-сентября"><i class="fa fa-check"></i>Запись занятия 23 сентября</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#векторы-1"><i class="fa fa-check"></i>Векторы</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#поиск-по-вхождению-в-массив"><i class="fa fa-check"></i>Поиск по вхождению в массив</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#поиск-по-строке"><i class="fa fa-check"></i>Поиск по строке</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#векторизованные-операции"><i class="fa fa-check"></i>Векторизованные операции</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#recycling"><i class="fa fa-check"></i>Recycling</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#изменение-элементов-объектов"><i class="fa fa-check"></i>Изменение элементов объектов</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#списки"><i class="fa fa-check"></i>Списки</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#создание-списков"><i class="fa fa-check"></i>Создание списков</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#именованные-списки"><i class="fa fa-check"></i>Именованные списки</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#выбор-элемента-списка"><i class="fa fa-check"></i>Выбор элемента списка</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#структура-объектов"><i class="fa fa-check"></i>Структура объектов</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#таблицы"><i class="fa fa-check"></i>Таблицы</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#data.frame-vs-data.table-vs-dplyr"><i class="fa fa-check"></i>data.frame vs data.table vs dplyr</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#data.table"><i class="fa fa-check"></i>data.table</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#преимущества-data.table"><i class="fa fa-check"></i>Преимущества data.table</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#установка-и-подключение-пакета"><i class="fa fa-check"></i>Установка и подключение пакета</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#создание-data.table-таблиц"><i class="fa fa-check"></i>Создание data.table-таблиц</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#основная-формула-dt-синтаксиса"><i class="fa fa-check"></i>Основная формула dt-синтаксиса</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#создание-data.table-таблиц-1"><i class="fa fa-check"></i>Создание data.table-таблиц</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#выбор-строки"><i class="fa fa-check"></i>Выбор строки</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#дополнительные-материалы-1"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#домашнее-задание-2"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#векторы-2"><i class="fa fa-check"></i>векторы</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#списки-1"><i class="fa fa-check"></i>списки</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#таблицы.-импорт-данных"><i class="fa fa-check"></i>таблицы. импорт данных</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#работа-со-строками"><i class="fa fa-check"></i>работа со строками</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html"><i class="fa fa-check"></i>data.table pt1</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#запись-занятия-2"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#разбор-домашней-работы"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#списки-2"><i class="fa fa-check"></i>списки</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#таблицы.-импорт-данных-1"><i class="fa fa-check"></i>таблицы. импорт данных</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#работа-со-строками-1"><i class="fa fa-check"></i>работа со строками</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#основная-формула-dt-синтаксиса-1"><i class="fa fa-check"></i>Основная формула dt-синтаксиса</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#создание-data.table-таблиц-2"><i class="fa fa-check"></i>Создание data.table-таблиц</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#выбор-строки-1"><i class="fa fa-check"></i>Выбор строки</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#работа-с-колонками"><i class="fa fa-check"></i>Работа с колонками</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#обращение-к-колонке"><i class="fa fa-check"></i>Обращение к колонке</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#выбор-нескольких-колонок"><i class="fa fa-check"></i>Выбор нескольких колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#cоздание-колонок"><i class="fa fa-check"></i>Cоздание колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#модификация-колонок"><i class="fa fa-check"></i>Модификация колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#удаление-колонок"><i class="fa fa-check"></i>Удаление колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#вычисления-по-одной-колонке"><i class="fa fa-check"></i>Вычисления по одной колонке</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#группировка-по-нескольким-полям"><i class="fa fa-check"></i>Группировка по нескольким полям</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#sd-advanced"><i class="fa fa-check"></i>.SD (Advanced)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#полезные-ссылки"><i class="fa fa-check"></i>Полезные ссылки</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#домашнее-задание-3"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#работа-с-колонками-1"><i class="fa fa-check"></i>работа с колонками</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#для-тех-кто-любит-посложнее"><i class="fa fa-check"></i>для тех, кто любит посложнее</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html"><i class="fa fa-check"></i>data.table pt2</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#запись-занятия-3"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#разбор-домашней-работы-1"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#работа-с-колонками-2"><i class="fa fa-check"></i>работа с колонками</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#для-тех-кто-любит-посложнее-1"><i class="fa fa-check"></i>для тех, кто любит посложнее</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#применение-функций"><i class="fa fa-check"></i>Применение функций</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#dataset"><i class="fa fa-check"></i>dataset</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#применение-функций-1"><i class="fa fa-check"></i>Применение функций</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#количество-строк-и-значений-.n-uniquen"><i class="fa fa-check"></i>Количество строк и значений: .N, uniqueN</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#ветвления-ifelse-fifelse"><i class="fa fa-check"></i>Ветвления: ifelse / fifelse</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#агрегации"><i class="fa fa-check"></i>Агрегации</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#вычисления-по-одной-колонке-1"><i class="fa fa-check"></i>Вычисления по одной колонке</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#вычисления-по-нескольким-колонкам"><i class="fa fa-check"></i>Вычисления по нескольким колонкам</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#группировка-по-нескольким-полям-1"><i class="fa fa-check"></i>Группировка по нескольким полям</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#манипуляции-с-таблицами"><i class="fa fa-check"></i>Манипуляции с таблицами</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#rbind"><i class="fa fa-check"></i>rbind()</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#cbind"><i class="fa fa-check"></i>cbind()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#домашнее-задание-4"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-1-iatytd"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-2-hntr"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-3-hmp"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-4-uv"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-5-n"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html"><i class="fa fa-check"></i>data.table pt3</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#запись-занятия-4"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#разбор-домашней-работы-2"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-3-hmp-1"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-4-uv-1"><i class="fa fa-check"></i>level 4 (UV)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#манипуляции-с-таблицами-1"><i class="fa fa-check"></i>Манипуляции с таблицами</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#merge"><i class="fa fa-check"></i>merge()</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#long-wide-форматы-данных"><i class="fa fa-check"></i>long / wide-форматы данных</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#dcast"><i class="fa fa-check"></i>dcast()</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#melt"><i class="fa fa-check"></i>melt()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#соотношение-list-и-в-операциях-над-колонками."><i class="fa fa-check"></i>Соотношение list() и <code>:=</code> в операциях над колонками.</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#домашнее-задание-5"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-1-iatytd-1"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-2-hntr-1"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-3-hmp-2"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-4-uv-2"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-5-n-1"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html"><i class="fa fa-check"></i>dt + ETL</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#запись-занятия-5"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#разбор-домашней-работы-3"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-3-hmp-3"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-4-uv-3"><i class="fa fa-check"></i>level 4 (UV)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#etl"><i class="fa fa-check"></i>ETL</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#чтение-и-запись-текстовых-файлов"><i class="fa fa-check"></i>Чтение и запись текстовых файлов</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#чтение-файлов-ms-excel"><i class="fa fa-check"></i>Чтение файлов MS Excel</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#чтение-файлов-spss"><i class="fa fa-check"></i>Чтение файлов SPSS</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#дополнительная-литература"><i class="fa fa-check"></i>Дополнительная литература</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#домашнее-задание-6"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-1-iatytd-2"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-2-hntr-2"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-3-hmp-4"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-4-uv-4"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-5-n-2"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i>Dataviz</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#запись-занятия-6"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#intro-1"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#инфографика"><i class="fa fa-check"></i>Инфографика</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#типы-графиков"><i class="fa fa-check"></i>Типы графиков</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#scatter-plot"><i class="fa fa-check"></i>scatter plot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#line-chart"><i class="fa fa-check"></i>line chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#bar-chart"><i class="fa fa-check"></i>bar chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#grouped-bar-chart"><i class="fa fa-check"></i>grouped bar chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#stacked-bar-chart"><i class="fa fa-check"></i>stacked bar chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#area-plot"><i class="fa fa-check"></i>area plot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#area-plot-percentiles"><i class="fa fa-check"></i>area plot (percentiles)</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#boxplot"><i class="fa fa-check"></i>boxplot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#violin-plot"><i class="fa fa-check"></i>violin plot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#heatmap"><i class="fa fa-check"></i>heatmap</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#geo-plots-leaflet-map"><i class="fa fa-check"></i>geo plots: leaflet map</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#d3-data-driven-documents"><i class="fa fa-check"></i>d3 (Data-Driven Documents)</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#dashboards"><i class="fa fa-check"></i>Dashboards</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#focuses"><i class="fa fa-check"></i>Focuses</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#data-looks-better-naked"><i class="fa fa-check"></i>Data looks better naked</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#the-data-ink-ratio"><i class="fa fa-check"></i>the data-ink ratio</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#clear-off-the-table"><i class="fa fa-check"></i>clear-off-the-table</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#principles"><i class="fa fa-check"></i>Principles</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#misleading-charts"><i class="fa fa-check"></i>Misleading charts</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#плохой-дизайн"><i class="fa fa-check"></i>Плохой дизайн</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#арифметические-ошибки"><i class="fa fa-check"></i>Арифметические ошибки</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#манипуляция-вниманием"><i class="fa fa-check"></i>Манипуляция вниманием</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#неверный-масштаб"><i class="fa fa-check"></i>Неверный масштаб</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#несоответствие-графиков-цифрам"><i class="fa fa-check"></i>Несоответствие графиков цифрам</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#полезные-материалы"><i class="fa fa-check"></i>Полезные материалы</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html"><i class="fa fa-check"></i>ggplot2 pt1</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#запись-занятий"><i class="fa fa-check"></i>Запись занятий</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#решение-домашней-работы"><i class="fa fa-check"></i>Решение домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#level-1-iatytd-3"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#level-2-hntr-3"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#level-3-hmp-5"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#ggplot2-package"><i class="fa fa-check"></i>ggplot2 package</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#компоненты-графика"><i class="fa fa-check"></i>Компоненты графика</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#базовые-геомы"><i class="fa fa-check"></i>Базовые геомы</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#геомы-визуальных-акцентов"><i class="fa fa-check"></i>геомы визуальных акцентов</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#дополнительные-материалы-2"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#домашнее-задание-7"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-1"><i class="fa fa-check"></i>Задание 1</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-2"><i class="fa fa-check"></i>Задание 2</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-3"><i class="fa fa-check"></i>Задание 3</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-4"><i class="fa fa-check"></i>Задание 4</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-5"><i class="fa fa-check"></i>Задание 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html"><i class="fa fa-check"></i>ggplot2 pt2</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#запись-занятий-1"><i class="fa fa-check"></i>Запись занятий</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#решение-домашки"><i class="fa fa-check"></i>Решение домашки</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#пакеты-и-данные"><i class="fa fa-check"></i>пакеты и данные</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#статистические-геомы"><i class="fa fa-check"></i>Статистические геомы</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_bar"><i class="fa fa-check"></i>geom_bar()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_histogram"><i class="fa fa-check"></i>geom_histogram()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_boxplot"><i class="fa fa-check"></i>geom_boxplot()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_smooth"><i class="fa fa-check"></i>geom_smooth()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#кастомизация-графиков"><i class="fa fa-check"></i>Кастомизация графиков</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#параметры-осей"><i class="fa fa-check"></i>Параметры осей</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#lims"><i class="fa fa-check"></i>lims()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#labs"><i class="fa fa-check"></i>labs()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#координатная-плоскость"><i class="fa fa-check"></i>Координатная плоскость</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#фасеты"><i class="fa fa-check"></i>Фасеты</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#визуальные-параметры-всего-графика"><i class="fa fa-check"></i>Визуальные параметры всего графика</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html"><i class="fa fa-check"></i>plotly</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#запись-занятия-7"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#пакеты-и-данные-1"><i class="fa fa-check"></i>Пакеты и данные</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#компоненты-графика-plotly"><i class="fa fa-check"></i>Компоненты графика plotly</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#данные-и-оси"><i class="fa fa-check"></i>Данные и оси</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#типы-графиков-1"><i class="fa fa-check"></i>Типы графиков</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#точечный-и-линейный-графики"><i class="fa fa-check"></i>Точечный и линейный графики</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#столбиковые-диаграммы"><i class="fa fa-check"></i>Столбиковые диаграммы</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#боксплоты"><i class="fa fa-check"></i>Боксплоты</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#группировка"><i class="fa fa-check"></i>Группировка</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#визуальные-параметры-графиков"><i class="fa fa-check"></i>Визуальные параметры графиков</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#легенда"><i class="fa fa-check"></i>Легенда</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#параметры-линий-и-точек"><i class="fa fa-check"></i>Параметры линий и точек</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#ховеры"><i class="fa fa-check"></i>Ховеры</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#добавляемые-слои"><i class="fa fa-check"></i>Добавляемые слои</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#наследование-параметров"><i class="fa fa-check"></i>Наследование параметров</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#общие-параметры-графиков"><i class="fa fa-check"></i>Общие параметры графиков</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#заголовок"><i class="fa fa-check"></i>Заголовок</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#параметры-осей-1"><i class="fa fa-check"></i>Параметры осей</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#совмещенные-графики"><i class="fa fa-check"></i>Совмещенные графики</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html"><i class="fa fa-check"></i>Web-скрапинг</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#запись-занятия-8"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#html-интро"><i class="fa fa-check"></i>HTML интро</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#web-сервер"><i class="fa fa-check"></i>Web-сервер</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#структура-html-страницы"><i class="fa fa-check"></i>Структура html-страницы</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#css"><i class="fa fa-check"></i>css</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#rvest"><i class="fa fa-check"></i>rvest</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#общая-последовательность"><i class="fa fa-check"></i>Общая последовательность</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#импорт-страницы"><i class="fa fa-check"></i>импорт страницы</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#выбор-узлов-и-их-значений"><i class="fa fa-check"></i>Выбор узлов и их значений</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#навигация-по-дереву-тегов"><i class="fa fa-check"></i>Навигация по дереву тегов</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#циклы"><i class="fa fa-check"></i>Циклы</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#for"><i class="fa fa-check"></i>for</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#while-advanced"><i class="fa fa-check"></i>while (Advanced)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#repeat-advanced"><i class="fa fa-check"></i>repeat (Advanced)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#прерывание-циклов-advanced"><i class="fa fa-check"></i>Прерывание циклов (Advanced)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#eval-pply"><i class="fa fa-check"></i>Неявные циклы, семейство *pply</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#скрапинг-сайта-журнала"><i class="fa fa-check"></i>Скрапинг сайта журнала</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#получение-информации-о-статье-и-авторе"><i class="fa fa-check"></i>Получение информации о статье и авторе</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#получение-списка-ссылок-с-страницы-рубрики"><i class="fa fa-check"></i>Получение списка ссылок с страницы рубрики</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#дополнительные-материалы-3"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#домашнее-задание-8"><i class="fa fa-check"></i>Домашнее задание</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-1-iatytd-4"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-2-hntr-4"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-3-hmp-6"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-4-uv-5"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-5-n-3"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Автоматизированный сбор больших данных в экономико-социологических исследованиях</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="plotly" class="section level1 unnumbered hasAnchor">
<h1>plotly<a href="plotly.html#plotly" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="запись-занятия-7" class="section level2 unnumbered hasAnchor">
<h2>Запись занятия<a href="plotly.html#запись-занятия-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/S-9kqnPXwI8?si=DE__J6jyarSzvaGh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
</iframe>
</div>
<div id="пакеты-и-данные-1" class="section level2 unnumbered hasAnchor">
<h2>Пакеты и данные<a href="plotly.html#пакеты-и-данные-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="plotly.html#cb408-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb408-2"><a href="plotly.html#cb408-2" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb408-3"><a href="plotly.html#cb408-3" tabindex="-1"></a><span class="fu">library</span>(data.table)</span></code></pre></div>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="plotly.html#cb409-1" tabindex="-1"></a>imdb_link <span class="ot">&lt;-</span> <span class="st">&#39;https://gitlab.com/upravitelev/mar201s/raw/master/data/IMDb%20movies.csv&#39;</span></span>
<span id="cb409-2"><a href="plotly.html#cb409-2" tabindex="-1"></a>tg_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;director&quot;</span>, <span class="st">&quot;title&quot;</span>, <span class="st">&quot;original_title&quot;</span>, <span class="st">&quot;year&quot;</span>, </span>
<span id="cb409-3"><a href="plotly.html#cb409-3" tabindex="-1"></a>             <span class="st">&quot;genre&quot;</span>, <span class="st">&quot;duration&quot;</span>, <span class="st">&quot;country&quot;</span>, <span class="st">&quot;avg_vote&quot;</span>)</span>
<span id="cb409-4"><a href="plotly.html#cb409-4" tabindex="-1"></a>imdb <span class="ot">&lt;-</span> <span class="fu">fread</span>(imdb_link, <span class="at">select =</span> tg_cols)</span>
<span id="cb409-5"><a href="plotly.html#cb409-5" tabindex="-1"></a>imdb[, year <span class="sc">:=</span> <span class="fu">as.numeric</span>(year)]</span>
<span id="cb409-6"><a href="plotly.html#cb409-6" tabindex="-1"></a></span>
<span id="cb409-7"><a href="plotly.html#cb409-7" tabindex="-1"></a>imdb_woody <span class="ot">&lt;-</span> imdb[director <span class="sc">==</span> <span class="st">&#39;Woody Allen&#39;</span>]</span>
<span id="cb409-8"><a href="plotly.html#cb409-8" tabindex="-1"></a>imdb_martin <span class="ot">&lt;-</span> imdb[director <span class="sc">==</span> <span class="st">&#39;Martin Scorsese&#39;</span>]</span>
<span id="cb409-9"><a href="plotly.html#cb409-9" tabindex="-1"></a>imdb_lynch <span class="ot">&lt;-</span> imdb[director <span class="sc">==</span> <span class="st">&#39;David Lynch&#39;</span>]</span>
<span id="cb409-10"><a href="plotly.html#cb409-10" tabindex="-1"></a></span>
<span id="cb409-11"><a href="plotly.html#cb409-11" tabindex="-1"></a>imdb_genres <span class="ot">&lt;-</span> imdb[genre <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Horror&#39;</span>, <span class="st">&#39;Comedy&#39;</span>, <span class="st">&#39;Drama&#39;</span>)]</span>
<span id="cb409-12"><a href="plotly.html#cb409-12" tabindex="-1"></a>imdb_genres_scores <span class="ot">&lt;-</span> imdb_genres[, </span>
<span id="cb409-13"><a href="plotly.html#cb409-13" tabindex="-1"></a>                                  <span class="fu">list</span>(<span class="at">n_titles =</span> .N, <span class="at">votes =</span> <span class="fu">mean</span>(avg_vote)), </span>
<span id="cb409-14"><a href="plotly.html#cb409-14" tabindex="-1"></a>                                  by <span class="ot">=</span> <span class="fu">list</span>(year, genre)] </span></code></pre></div>
</div>
<div id="компоненты-графика-plotly" class="section level2 unnumbered hasAnchor">
<h2>Компоненты графика plotly<a href="plotly.html#компоненты-графика-plotly" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="данные-и-оси" class="section level3 unnumbered hasAnchor">
<h3>Данные и оси<a href="plotly.html#данные-и-оси" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Базовая функция для создания интерактивных графиков - <code>plot_ly()</code>. Для создания самого простого графика уже достаточно будет указать датасет, оси и тип графика. Оси задаются указанием названий колонок датасета, через оператор формулы (тильда, <code>~</code>). Вообще, такая форма используется во всех местах, где идет обращение к колонкам датасета (ховеры, цвета и группировки и проч). В <code>ggplot2</code> в какой-то мере аналогом такого обращения к колонкам датасета будет функция <code>aes()</code>.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="plotly.html#cb410-1" tabindex="-1"></a><span class="fu">plot_ly</span>(economics,</span>
<span id="cb410-2"><a href="plotly.html#cb410-2" tabindex="-1"></a>        <span class="at">x =</span> <span class="sc">~</span>date,</span>
<span id="cb410-3"><a href="plotly.html#cb410-3" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span>uempmed,</span>
<span id="cb410-4"><a href="plotly.html#cb410-4" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">&quot;unemployment&quot;</span>,</span>
<span id="cb410-5"><a href="plotly.html#cb410-5" tabindex="-1"></a>        <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color=</span><span class="st">&quot;#264E86&quot;</span>),</span>
<span id="cb410-6"><a href="plotly.html#cb410-6" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;scatter&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;markers&quot;</span>)</span></code></pre></div>
<p><br></p>
</div>
</div>
<div id="типы-графиков-1" class="section level2 unnumbered hasAnchor">
<h2>Типы графиков<a href="plotly.html#типы-графиков-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>В plotly реализованы базовые графики, в частности, линии, гистограммы и барчарты, боксплоты, тепловые карты, геокарты, а так же некоторые 3d-графики. Создавать собственные типы графиков средствами plotly, к сожалению, нельзя.</p>
<p>Полный список графиков, реализованных в plotly, можно посмотреть на <a href="https://plot.ly/r/">сайте</a> библиотеки или же на странице <a href="https://plot.ly/r/reference/">документации</a>.</p>
<div id="точечный-и-линейный-графики" class="section level3 unnumbered hasAnchor">
<h3>Точечный и линейный графики<a href="plotly.html#точечный-и-линейный-графики" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Тип графиков задается аргументом <code>type</code> функции <code>plot_ly()</code>. Для некоторых графиков, в частности, для диаграмм рассеяния (точек) и линий используется один <code>type</code>, но с разными значениям доп.аргумента <code>mode</code>. Например, с помощью <code>type = 'scatter'</code> и <code>mode = 'markers'</code> задается точечный график. Для того, чтобы был правильный порядок точек и линий, необходимо отсортировать таблицу (в противном случае может получиться клубок линий).</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="plotly.html#cb411-1" tabindex="-1"></a><span class="co"># отсортируем и построим точечный график</span></span>
<span id="cb411-2"><a href="plotly.html#cb411-2" tabindex="-1"></a>imdb_genres_scores <span class="ot">&lt;-</span> imdb_genres_scores[<span class="fu">order</span>(year, genre)]</span>
<span id="cb411-3"><a href="plotly.html#cb411-3" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_genres_scores[genre <span class="sc">==</span> <span class="st">&#39;Horror&#39;</span>], <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>votes,</span>
<span id="cb411-4"><a href="plotly.html#cb411-4" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;markers&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-ada541ff6d092f6aca7a" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ada541ff6d092f6aca7a">{"x":{"visdat":{"5dd33066b3e9":["function () ","plotlyVisDat"]},"cur_data":"5dd33066b3e9","attrs":{"5dd33066b3e9":{"x":{},"y":{},"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"votes"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1915,1917,1920,1925,1927,1928,1932,1934,1935,1940,1941,1945,1946,1948,1949,1951,1952,1953,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[6.7999999999999998,6.0999999999999996,6,7.5999999999999996,6.7999999999999998,7.2999999999999998,6.2999999999999998,3.6500000000000004,7.0999999999999996,4.25,7.2999999999999998,6,4.8666666666666663,4.9499999999999993,7.0999999999999996,4.4000000000000004,5.5999999999999996,7.0999999999999996,5.0700000000000003,5.0499999999999998,5.8999999999999995,5.7222222222222223,5.0666666666666664,5.5444444444444452,5.8076923076923084,5.6352941176470601,4.6600000000000001,5.3769230769230756,5.0250000000000004,5.4699999999999998,4.96,5.0111111111111111,5.1552631578947361,4.8405405405405393,5.3414634146341466,4.8625000000000007,4.6315789473684212,5.1227272727272721,4.9650000000000007,4.9333333333333336,4.7428571428571429,5.0000000000000009,5.3533333333333326,4.8136363636363635,4.6739130434782616,4.3666666666666663,4.4285714285714288,4.3857142857142861,4.6424242424242426,4.418181818181818,4.6525000000000007,4.9208333333333334,4.9117647058823533,4.6533333333333333,4.7066666666666652,4.3599999999999994,4.0333333333333323,4.8181818181818183,4.4153846153846157,4.208333333333333,4.2750000000000004,3.9947368421052634,4.2923076923076922,4.7230769230769232,4.0473684210526315,3.9435897435897433,4.2166666666666668,4.0657142857142858,3.8637681159420283,4.1161290322580637,4.0424242424242438,4.0253521126760576,4.0236111111111104,3.9182926829268285,3.9614583333333346,4.1582524271844665,3.9165137614678875,3.9650485436893192,4.346564885496182,4.3315789473684205,4.1585106382978729,4.0628571428571432],"mode":"markers","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Линейный график задается с помощью <code>type = 'scatter'</code> и <code>mode = 'lines'</code>:</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="plotly.html#cb412-1" tabindex="-1"></a><span class="co"># построим линейный график</span></span>
<span id="cb412-2"><a href="plotly.html#cb412-2" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_genres_scores[genre <span class="sc">==</span> <span class="st">&#39;Horror&#39;</span>], <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>votes,</span>
<span id="cb412-3"><a href="plotly.html#cb412-3" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e86c7108739b1ebe084d" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e86c7108739b1ebe084d">{"x":{"visdat":{"5dd36e20e5ac":["function () ","plotlyVisDat"]},"cur_data":"5dd36e20e5ac","attrs":{"5dd36e20e5ac":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"votes"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1915,1917,1920,1925,1927,1928,1932,1934,1935,1940,1941,1945,1946,1948,1949,1951,1952,1953,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[6.7999999999999998,6.0999999999999996,6,7.5999999999999996,6.7999999999999998,7.2999999999999998,6.2999999999999998,3.6500000000000004,7.0999999999999996,4.25,7.2999999999999998,6,4.8666666666666663,4.9499999999999993,7.0999999999999996,4.4000000000000004,5.5999999999999996,7.0999999999999996,5.0700000000000003,5.0499999999999998,5.8999999999999995,5.7222222222222223,5.0666666666666664,5.5444444444444452,5.8076923076923084,5.6352941176470601,4.6600000000000001,5.3769230769230756,5.0250000000000004,5.4699999999999998,4.96,5.0111111111111111,5.1552631578947361,4.8405405405405393,5.3414634146341466,4.8625000000000007,4.6315789473684212,5.1227272727272721,4.9650000000000007,4.9333333333333336,4.7428571428571429,5.0000000000000009,5.3533333333333326,4.8136363636363635,4.6739130434782616,4.3666666666666663,4.4285714285714288,4.3857142857142861,4.6424242424242426,4.418181818181818,4.6525000000000007,4.9208333333333334,4.9117647058823533,4.6533333333333333,4.7066666666666652,4.3599999999999994,4.0333333333333323,4.8181818181818183,4.4153846153846157,4.208333333333333,4.2750000000000004,3.9947368421052634,4.2923076923076922,4.7230769230769232,4.0473684210526315,3.9435897435897433,4.2166666666666668,4.0657142857142858,3.8637681159420283,4.1161290322580637,4.0424242424242438,4.0253521126760576,4.0236111111111104,3.9182926829268285,3.9614583333333346,4.1582524271844665,3.9165137614678875,3.9650485436893192,4.346564885496182,4.3315789473684205,4.1585106382978729,4.0628571428571432],"mode":"lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="столбиковые-диаграммы" class="section level3 unnumbered hasAnchor">
<h3>Столбиковые диаграммы<a href="plotly.html#столбиковые-диаграммы" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Для отрисовки столбиковых диаграмм используется параметр <code>type = 'bar'</code>. Естественно, данные должны быть соответствующей структуры. Например, посчитаем количество фильмов каждого жанра в год и отрисуем столбиками (датасет подготовили ранее):</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="plotly.html#cb413-1" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_genres_scores[year <span class="sc">&gt;</span> <span class="dv">2010</span> <span class="sc">&amp;</span> genre <span class="sc">==</span> <span class="st">&#39;Drama&#39;</span>], </span>
<span id="cb413-2"><a href="plotly.html#cb413-2" tabindex="-1"></a>        <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>n_titles, <span class="at">type =</span> <span class="st">&#39;bar&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-65ba415b75f410e01c29" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-65ba415b75f410e01c29">{"x":{"visdat":{"5dd34198ac98":["function () ","plotlyVisDat"]},"cur_data":"5dd34198ac98","attrs":{"5dd34198ac98":{"x":{},"y":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"n_titles"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[416,441,399,412,430,447,531,518,461,104],"type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="боксплоты" class="section level3 unnumbered hasAnchor">
<h3>Боксплоты<a href="plotly.html#боксплоты" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Поведение точно такое же, как для типа <code>type = 'bar'</code> - по оси y выставляем переменную, по которой хотим увидеть боксплот, а в типе пишем <code>type = 'box'</code>:</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="plotly.html#cb414-1" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_genres_scores, <span class="at">x =</span> <span class="sc">~</span>genre, <span class="at">y =</span> <span class="sc">~</span>votes, <span class="at">type =</span> <span class="st">&#39;box&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-70bdb4691497efacb022" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-70bdb4691497efacb022">{"x":{"visdat":{"5dd36a483ee2":["function () ","plotlyVisDat"]},"cur_data":"5dd36a483ee2","attrs":{"5dd36a483ee2":{"x":{},"y":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"box"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"genre","type":"category","categoryorder":"array","categoryarray":["Comedy","Drama","Horror"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"votes"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"fillcolor":"rgba(31,119,180,0.5)","x":["Drama","Drama","Drama","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Drama","Comedy","Drama","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Comedy","Drama","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Comedy","Drama","Comedy","Drama","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror","Comedy","Drama","Horror"],"y":[5.7999999999999998,5.5,6.7666666666666657,6.0499999999999998,5.9000000000000004,5.9000000000000004,6.327272727272728,6.7999999999999998,5.75,6.2999999999999998,5.7749999999999995,6.5800000000000001,6.0999999999999996,6.2999999999999998,6.1888888888888891,6.416666666666667,6.1600000000000001,6.3999999999999995,6.1166666666666671,6,6.8250000000000011,6.5764705882352947,6.4400000000000004,7.25,6.6624999999999996,6.3285714285714292,6.6454545454545464,6.4857142857142858,6.5294117647058814,7.5999999999999996,6.5875000000000004,6.8928571428571432,6.2000000000000002,6.1999999999999993,6.7999999999999998,6.4250000000000007,6.4944444444444445,7.2999999999999998,6.0999999999999996,6.6099999999999994,6.3500000000000005,6.477777777777777,6.4857142857142858,6.2999999999999998,6.333333333333333,6.4857142857142875,6.2999999999999998,6.4272727272727277,6.4951219512195122,6.5352941176470596,6.4840909090909102,3.6500000000000004,6.6461538461538456,6.5303030303030303,7.0999999999999996,6.5136363636363654,6.6250000000000018,6.479166666666667,6.5124999999999993,6.5909090909090926,6.1842105263157894,6.9875000000000007,6.5068965517241368,6.496428571428571,6.4359999999999991,4.25,6.5900000000000007,6.6000000000000005,7.2999999999999998,6.5,6.3888888888888893,6.3058823529411763,6.8285714285714283,6.4058823529411768,6.5600000000000005,6.371428571428571,6.4874999999999989,6,6.4124999999999996,6.681481481481482,4.8666666666666663,6.490909090909093,6.6999999999999993,6.4722222222222205,6.8723404255319176,4.9499999999999993,6.3954545454545446,6.8878787878787877,7.0999999999999996,6.2777777777777768,6.8000000000000007,6.4279999999999982,6.8500000000000005,4.4000000000000004,6.3883720930232553,6.9222222222222207,5.5999999999999996,6.5296296296296292,6.7612903225806447,7.0999999999999996,6.3382352941176459,6.7605263157894742,6.4309523809523785,6.7749999999999995,6.3699999999999992,6.9298245614035086,6.3772727272727279,6.6755555555555555,5.0700000000000003,6.4604166666666663,6.9265306122448962,5.0499999999999998,6.3660000000000005,6.7581818181818178,5.8999999999999995,6.2740000000000009,6.6555555555555577,5.7222222222222223,6.2566037735849074,6.6826666666666679,5.0666666666666664,6.2775510204081639,6.8536231884057992,5.5444444444444452,6.4338983050847469,6.9305555555555545,5.8076923076923084,6.227586206896552,6.9220338983050835,5.6352941176470601,6.2927272727272738,6.7333333333333343,4.6600000000000001,6.0586956521739141,6.758208955223882,5.3769230769230756,6.2553571428571413,6.7203125000000012,5.0250000000000004,6.1732142857142867,6.5038461538461556,5.4699999999999998,5.8624999999999989,6.5825581395348811,4.96,5.8910447761194034,6.4813725490196088,5.0111111111111111,5.7116883116883095,6.486516853932585,5.1552631578947361,5.7919354838709669,6.6492957746478867,4.8405405405405393,5.8015873015873005,6.4818181818181815,5.3414634146341466,5.7900000000000009,6.4625000000000012,4.8625000000000007,5.8761904761904749,6.5553846153846154,4.6315789473684212,5.9173333333333327,6.4411764705882337,5.1227272727272721,5.7446428571428587,6.7127906976744205,4.9650000000000007,5.9388888888888909,6.5341463414634156,4.9333333333333336,5.7714285714285696,6.590476190476191,4.7428571428571429,5.7833333333333323,6.3959999999999999,5.0000000000000009,5.8246913580246904,6.5215189873417732,5.3533333333333326,5.8126582278481003,6.6495145631067949,4.8136363636363635,5.8518072289156651,6.5987654320987668,4.6739130434782616,5.7753086419753092,6.664646464646462,4.3666666666666663,5.8808510638297893,6.2430232558139531,4.4285714285714288,5.5999999999999996,6.4947916666666687,4.3857142857142861,5.5793103448275865,6.460576923076923,4.6424242424242426,5.849999999999997,6.3673469387755111,4.418181818181818,5.6277777777777791,6.5193548387096767,4.6525000000000007,5.592307692307692,6.5114285714285742,4.9208333333333334,5.7097222222222195,6.417272727272727,4.9117647058823533,5.5071428571428545,6.7138297872340438,4.6533333333333333,5.6283018867924524,6.4406779661016937,4.7066666666666652,5.5999999999999979,6.4990384615384613,4.3599999999999994,5.6700000000000008,6.1859375000000005,4.0333333333333323,5.568421052631578,6.2865546218487376,4.8181818181818183,5.5431578947368427,6.2852713178294595,4.4153846153846157,5.4485148514851467,6.3037837837837829,4.208333333333333,5.4824675324675303,6.2863414634146411,4.2750000000000004,5.4579999999999957,6.2243781094527328,3.9947368421052634,5.4982456140350857,6.2783673469387686,4.2923076923076922,5.4666666666666659,6.2760683760683778,4.7230769230769232,5.3729927007299283,6.167256637168145,4.0473684210526315,5.2496453900709197,6.3157377049180292,3.9435897435897433,5.3703030303030328,6.2473354231974936,4.2166666666666668,5.2804347826086993,6.1714285714285708,4.0657142857142858,5.2814102564102559,6.2479338842975203,3.8637681159420283,5.1429347826086982,6.2348780487804838,4.1161290322580637,5.255319148936171,6.1822966507177055,4.0424242424242438,5.1939560439560459,6.1319612590799002,4.0253521126760576,5.243269230769231,6.1329326923076941,4.0236111111111104,5.180645161290319,6.2108843537414993,3.9182926829268285,5.272016460905351,6.2313283208020032,3.9614583333333346,5.3064000000000009,6.2682038834951399,4.1582524271844665,5.3087719298245615,6.163488372093024,3.9165137614678875,5.2498269896193728,6.2331096196868039,3.9650485436893192,5.3581481481481443,6.3322033898305055,4.346564885496182,5.3006688963210689,6.3104247104247113,4.3315789473684205,5.338823529411763,6.3932754880694107,4.1585106382978729,5.3600000000000003,6.4259615384615403,4.0628571428571432],"type":"box","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="группировка" class="section level2 unnumbered hasAnchor">
<h2>Группировка<a href="plotly.html#группировка" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>plotly очень дружелюбен к пользователю в тех задачах, когда есть данные в long-формате и нужно на одном графике отразить данные разных групп. Сложным решением тут была бы отрисовка графиков в цикле, однако можно просто воспользоваться аргументом <code>color</code> функции <code>plot_ly()</code>.</p>
<p>Допустим, мы хотим отрисовать количество фильмов в год с разбивкой по жанрам. Для этого в параметр цвета передается название группирующей колонки:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="plotly.html#cb415-1" tabindex="-1"></a><span class="co"># считаем фильмы по режиссерам и странам</span></span>
<span id="cb415-2"><a href="plotly.html#cb415-2" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_genres_scores, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>n_titles, <span class="at">type =</span> <span class="st">&#39;bar&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>genre)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-919d464fd4489ce80cf1" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-919d464fd4489ce80cf1">{"x":{"visdat":{"5dd3ec8f000":["function () ","plotlyVisDat"]},"cur_data":"5dd3ec8f000","attrs":{"5dd3ec8f000":{"x":{},"y":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"n_titles"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1914,1915,1916,1917,1918,1919,1920,1921,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[2,1,2,4,1,6,3,4,2,7,7,8,6,8,10,8,14,18,11,17,13,22,24,22,16,28,30,22,17,17,21,16,22,18,22,27,25,43,27,34,42,40,44,48,50,50,53,49,59,58,55,46,56,56,64,67,77,62,63,50,63,75,56,54,70,78,81,79,83,81,94,99,87,78,72,65,72,84,53,73,70,76,95,101,154,100,114,90,137,141,165,184,156,184,188,182,208,248,243,250,228,289,270,299,255,75],"type":"bar","name":"Comedy","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[1,1,3,5,11,7,5,9,10,12,17,10,8,11,17,14,10,18,30,18,31,49,41,44,33,20,24,19,29,25,16,9,14,10,16,27,30,47,33,36,36,45,31,38,36,57,45,49,55,54,75,69,72,59,57,67,64,78,86,102,89,71,88,80,65,85,86,82,84,75,79,103,81,99,86,96,104,98,93,105,110,94,118,104,128,119,129,185,205,201,245,234,226,305,319,364,363,410,418,413,416,441,399,412,430,447,531,518,461,104],"type":"bar","name":"Drama","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1915,1917,1920,1925,1927,1928,1932,1934,1935,1940,1941,1945,1946,1948,1949,1951,1952,1953,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[1,1,1,1,1,1,1,2,1,2,1,1,3,2,1,1,1,1,10,2,6,9,9,9,13,17,10,13,8,20,10,18,38,37,41,32,19,22,20,18,21,16,30,22,23,9,14,14,33,44,40,24,17,15,15,10,12,11,13,12,16,19,13,13,19,39,54,70,69,62,66,71,72,82,96,103,109,103,131,133,94,35],"type":"bar","name":"Horror","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>В том случае, когда хочется нарисовать группы не отдельными столбиками, а стопкой, то надо указать аргумент <code>barmode = 'stack'</code> в отдельном слое <code>layout()</code> (о нем ниже, он используется для управления параметрами всего графика)</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="plotly.html#cb416-1" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_genres_scores, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>n_titles, <span class="at">type =</span> <span class="st">&#39;bar&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>genre) <span class="sc">%&gt;%</span></span>
<span id="cb416-2"><a href="plotly.html#cb416-2" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">barmode =</span> <span class="st">&#39;stack&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-0a303c2858512312b0c6" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-0a303c2858512312b0c6">{"x":{"visdat":{"5dd338afed8c":["function () ","plotlyVisDat"]},"cur_data":"5dd338afed8c","attrs":{"5dd338afed8c":{"x":{},"y":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"barmode":"stack","xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"n_titles"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1914,1915,1916,1917,1918,1919,1920,1921,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[2,1,2,4,1,6,3,4,2,7,7,8,6,8,10,8,14,18,11,17,13,22,24,22,16,28,30,22,17,17,21,16,22,18,22,27,25,43,27,34,42,40,44,48,50,50,53,49,59,58,55,46,56,56,64,67,77,62,63,50,63,75,56,54,70,78,81,79,83,81,94,99,87,78,72,65,72,84,53,73,70,76,95,101,154,100,114,90,137,141,165,184,156,184,188,182,208,248,243,250,228,289,270,299,255,75],"type":"bar","name":"Comedy","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[1,1,3,5,11,7,5,9,10,12,17,10,8,11,17,14,10,18,30,18,31,49,41,44,33,20,24,19,29,25,16,9,14,10,16,27,30,47,33,36,36,45,31,38,36,57,45,49,55,54,75,69,72,59,57,67,64,78,86,102,89,71,88,80,65,85,86,82,84,75,79,103,81,99,86,96,104,98,93,105,110,94,118,104,128,119,129,185,205,201,245,234,226,305,319,364,363,410,418,413,416,441,399,412,430,447,531,518,461,104],"type":"bar","name":"Drama","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1915,1917,1920,1925,1927,1928,1932,1934,1935,1940,1941,1945,1946,1948,1949,1951,1952,1953,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[1,1,1,1,1,1,1,2,1,2,1,1,3,2,1,1,1,1,10,2,6,9,9,9,13,17,10,13,8,20,10,18,38,37,41,32,19,22,20,18,21,16,30,22,23,9,14,14,33,44,40,24,17,15,15,10,12,11,13,12,16,19,13,13,19,39,54,70,69,62,66,71,72,82,96,103,109,103,131,133,94,35],"type":"bar","name":"Horror","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><br></p>
</div>
<div id="визуальные-параметры-графиков" class="section level2 unnumbered hasAnchor">
<h2>Визуальные параметры графиков<a href="plotly.html#визуальные-параметры-графиков" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="легенда" class="section level3 unnumbered hasAnchor">
<h3>Легенда<a href="plotly.html#легенда" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Название элементов графика задается параметром <code>name</code> в графике. В него можно как передать какое-то значение, так и колонку, которая задает названия. Когда одна линия, то легенда не формируется.</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="plotly.html#cb417-1" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_woody, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote, </span>
<span id="cb417-2"><a href="plotly.html#cb417-2" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;markers+lines&#39;</span>, <span class="at">name =</span> <span class="st">&#39;markers+lines&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e167ca2e4ec4ecdcacc6" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e167ca2e4ec4ecdcacc6">{"x":{"visdat":{"5dd33471f9f3":["function () ","plotlyVisDat"]},"cur_data":"5dd33471f9f3","attrs":{"5dd33471f9f3":{"x":{},"y":{},"mode":"markers+lines","name":"markers+lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"avg_vote"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1971,1972,1973,1975,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1987,1988,1989,1990,1992,1991,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2008,2007,2009,2010,2011,2012,2013,2014,2015,2016,2017,2019],"y":[7.2999999999999998,7,6.7999999999999998,7.2000000000000002,7.7000000000000002,8,7.4000000000000004,7.9000000000000004,7.2999999999999998,6.5999999999999996,7.7000000000000002,7.4000000000000004,7.7000000000000002,7.9000000000000004,7.5,6.5,7.2999999999999998,7.9000000000000004,6.5999999999999996,7.5,6.7000000000000002,7.4000000000000004,7.4000000000000004,7,6.7000000000000002,7.4000000000000004,6.2999999999999998,7.2000000000000002,6.7000000000000002,6.7000000000000002,6.5999999999999996,6.2999999999999998,6.4000000000000004,7.5999999999999996,6.7000000000000002,7.0999999999999996,6.7000000000000002,7.0999999999999996,6.2999999999999998,7.7000000000000002,6.2999999999999998,7.2999999999999998,6.5,6.5999999999999996,6.5999999999999996,6.2000000000000002,6.5999999999999996],"mode":"markers+lines","name":"markers+lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Легенду можно скрыть параметром <code>showlegend=FALSE</code>:</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="plotly.html#cb418-1" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_woody, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote, </span>
<span id="cb418-2"><a href="plotly.html#cb418-2" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;markers+lines&#39;</span>, <span class="at">name =</span> <span class="st">&#39;markers+lines&#39;</span>, </span>
<span id="cb418-3"><a href="plotly.html#cb418-3" tabindex="-1"></a>        <span class="at">showlegend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9539b8ddfbbb6d77af98" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-9539b8ddfbbb6d77af98">{"x":{"visdat":{"5dd364464d44":["function () ","plotlyVisDat"]},"cur_data":"5dd364464d44","attrs":{"5dd364464d44":{"x":{},"y":{},"mode":"markers+lines","showlegend":false,"name":"markers+lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"avg_vote"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1971,1972,1973,1975,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1987,1988,1989,1990,1992,1991,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2008,2007,2009,2010,2011,2012,2013,2014,2015,2016,2017,2019],"y":[7.2999999999999998,7,6.7999999999999998,7.2000000000000002,7.7000000000000002,8,7.4000000000000004,7.9000000000000004,7.2999999999999998,6.5999999999999996,7.7000000000000002,7.4000000000000004,7.7000000000000002,7.9000000000000004,7.5,6.5,7.2999999999999998,7.9000000000000004,6.5999999999999996,7.5,6.7000000000000002,7.4000000000000004,7.4000000000000004,7,6.7000000000000002,7.4000000000000004,6.2999999999999998,7.2000000000000002,6.7000000000000002,6.7000000000000002,6.5999999999999996,6.2999999999999998,6.4000000000000004,7.5999999999999996,6.7000000000000002,7.0999999999999996,6.7000000000000002,7.0999999999999996,6.2999999999999998,7.7000000000000002,6.2999999999999998,7.2999999999999998,6.5,6.5999999999999996,6.5999999999999996,6.2000000000000002,6.5999999999999996],"mode":"markers+lines","showlegend":false,"name":"markers+lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="параметры-линий-и-точек" class="section level3 unnumbered hasAnchor">
<h3>Параметры линий и точек<a href="plotly.html#параметры-линий-и-точек" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Линии и точки на графиках можно изменять на свой вкус - менять типы линий, размеры элементов, цвет. Параметры элементов задают через значения аргументов <code>marker</code> (для точек) или <code>line</code> для линий.</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="plotly.html#cb419-1" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb419-2"><a href="plotly.html#cb419-2" tabindex="-1"></a>  <span class="at">data =</span> imdb_woody, </span>
<span id="cb419-3"><a href="plotly.html#cb419-3" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb419-4"><a href="plotly.html#cb419-4" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;markers&#39;</span>,</span>
<span id="cb419-5"><a href="plotly.html#cb419-5" tabindex="-1"></a>  <span class="at">color =</span> <span class="sc">~</span>country,</span>
<span id="cb419-6"><a href="plotly.html#cb419-6" tabindex="-1"></a>  <span class="at">marker =</span> <span class="fu">list</span>(</span>
<span id="cb419-7"><a href="plotly.html#cb419-7" tabindex="-1"></a>    <span class="at">size =</span> <span class="sc">~</span>duration <span class="sc">/</span> <span class="dv">10</span>,</span>
<span id="cb419-8"><a href="plotly.html#cb419-8" tabindex="-1"></a>    <span class="at">symbol =</span> <span class="st">&#39;diamond&#39;</span></span>
<span id="cb419-9"><a href="plotly.html#cb419-9" tabindex="-1"></a>  )</span>
<span id="cb419-10"><a href="plotly.html#cb419-10" tabindex="-1"></a>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-73679e94dba1af8c8eb0" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-73679e94dba1af8c8eb0">{"x":{"visdat":{"5dd31d82dbb6":["function () ","plotlyVisDat"]},"cur_data":"5dd31d82dbb6","attrs":{"5dd31d82dbb6":{"x":{},"y":{},"mode":"markers","marker":{"size":{},"symbol":"diamond"},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"avg_vote"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2008],"y":[7.0999999999999996],"mode":"markers","marker":{"color":"rgba(102,194,165,1)","size":8.5,"symbol":"diamond","line":{"color":"rgba(102,194,165,1)"}},"type":"scatter","name":"Spain, USA","textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2011],"y":[7.7000000000000002],"mode":"markers","marker":{"color":"rgba(219,161,118,1)","size":8.1999999999999993,"symbol":"diamond","line":{"color":"rgba(219,161,118,1)"}},"type":"scatter","name":"Spain, USA, France","textfont":{"color":"rgba(219,161,118,1)"},"error_y":{"color":"rgba(219,161,118,1)"},"error_x":{"color":"rgba(219,161,118,1)"},"line":{"color":"rgba(219,161,118,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2006],"y":[6.7000000000000002],"mode":"markers","marker":{"color":"rgba(217,150,141,1)","size":8.8000000000000007,"symbol":"diamond","line":{"color":"rgba(217,150,141,1)"}},"type":"scatter","name":"UK, USA","textfont":{"color":"rgba(217,150,141,1)"},"error_y":{"color":"rgba(217,150,141,1)"},"error_x":{"color":"rgba(217,150,141,1)"},"line":{"color":"rgba(217,150,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2005],"y":[7.5999999999999996],"mode":"markers","marker":{"color":"rgba(152,158,202,1)","size":8.9000000000000004,"symbol":"diamond","line":{"color":"rgba(152,158,202,1)"}},"type":"scatter","name":"UK, USA, Ireland, Luxembourg, France","textfont":{"color":"rgba(152,158,202,1)"},"error_y":{"color":"rgba(152,158,202,1)"},"error_x":{"color":"rgba(152,158,202,1)"},"line":{"color":"rgba(152,158,202,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1971,1972,1973,1975,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1987,1988,1989,1990,1992,1991,1993,1994,1995,1996,1997,1998,1999,2000,2002,2004,2013,2015,2016,2017,2019],"y":[7.2999999999999998,7,6.7999999999999998,7.2000000000000002,7.7000000000000002,8,7.4000000000000004,7.9000000000000004,7.2999999999999998,6.5999999999999996,7.7000000000000002,7.4000000000000004,7.7000000000000002,7.9000000000000004,7.5,6.5,7.2999999999999998,7.9000000000000004,6.5999999999999996,7.5,6.7000000000000002,7.4000000000000004,7.4000000000000004,7,6.7000000000000002,7.4000000000000004,6.2999999999999998,7.2000000000000002,6.7000000000000002,6.5999999999999996,6.4000000000000004,7.2999999999999998,6.5999999999999996,6.5999999999999996,6.2000000000000002,6.5999999999999996],"mode":"markers","marker":{"color":"rgba(215,144,197,1)","size":[8.5,9.3000000000000007,9.1999999999999993,9.5999999999999996,8.9000000000000004,8.8000000000000007,7.9000000000000004,8.4000000000000004,8.1999999999999993,10.699999999999999,8.8000000000000007,8.3000000000000007,8.0999999999999996,10.4,10.6,10.800000000000001,8.5,10.4,9.8000000000000007,9.5,10.1,9.5999999999999996,11.300000000000001,9.5,9.4000000000000004,10.300000000000001,11.199999999999999,10.800000000000001,9.9000000000000004,12.4,9.5999999999999996,9.5999999999999996,10.800000000000001,9.3000000000000007,9.8000000000000007,9.5999999999999996],"symbol":"diamond","line":{"color":"rgba(215,144,197,1)"}},"type":"scatter","name":"USA","textfont":{"color":"rgba(215,144,197,1)"},"error_y":{"color":"rgba(215,144,197,1)"},"error_x":{"color":"rgba(215,144,197,1)"},"line":{"color":"rgba(215,144,197,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2009,2014],"y":[7.0999999999999996,6.5],"mode":"markers","marker":{"color":"rgba(205,180,144,1)","size":[11.199999999999999,9.8000000000000007],"symbol":"diamond","line":{"color":"rgba(205,180,144,1)"}},"type":"scatter","name":"USA, France","textfont":{"color":"rgba(205,180,144,1)"},"error_y":{"color":"rgba(205,180,144,1)"},"error_x":{"color":"rgba(205,180,144,1)"},"line":{"color":"rgba(205,180,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2003],"y":[6.2999999999999998],"mode":"markers","marker":{"color":"rgba(186,217,78,1)","size":9.6999999999999993,"symbol":"diamond","line":{"color":"rgba(186,217,78,1)"}},"type":"scatter","name":"USA, France, UK","textfont":{"color":"rgba(186,217,78,1)"},"error_y":{"color":"rgba(186,217,78,1)"},"error_x":{"color":"rgba(186,217,78,1)"},"line":{"color":"rgba(186,217,78,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2001],"y":[6.7000000000000002],"mode":"markers","marker":{"color":"rgba(247,217,52,1)","size":9.5,"symbol":"diamond","line":{"color":"rgba(247,217,52,1)"}},"type":"scatter","name":"USA, Germany","textfont":{"color":"rgba(247,217,52,1)"},"error_y":{"color":"rgba(247,217,52,1)"},"error_x":{"color":"rgba(247,217,52,1)"},"line":{"color":"rgba(247,217,52,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012],"y":[6.2999999999999998],"mode":"markers","marker":{"color":"rgba(241,204,114,1)","size":9.5999999999999996,"symbol":"diamond","line":{"color":"rgba(241,204,114,1)"}},"type":"scatter","name":"USA, Italy, Spain","textfont":{"color":"rgba(241,204,114,1)"},"error_y":{"color":"rgba(241,204,114,1)"},"error_x":{"color":"rgba(241,204,114,1)"},"line":{"color":"rgba(241,204,114,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2010],"y":[6.2999999999999998],"mode":"markers","marker":{"color":"rgba(215,191,158,1)","size":10.1,"symbol":"diamond","line":{"color":"rgba(215,191,158,1)"}},"type":"scatter","name":"USA, Spain","textfont":{"color":"rgba(215,191,158,1)"},"error_y":{"color":"rgba(215,191,158,1)"},"error_x":{"color":"rgba(215,191,158,1)"},"line":{"color":"rgba(215,191,158,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2007],"y":[6.7000000000000002],"mode":"markers","marker":{"color":"rgba(179,179,179,1)","size":9.1999999999999993,"symbol":"diamond","line":{"color":"rgba(179,179,179,1)"}},"type":"scatter","name":"USA, UK, France","textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Линии задаются также аргументом, в который надо передавать спиcок параметров, обычно это размер, тип линии или ее форма. Типы линий, которые доступны в plotly: “solid”, “dot”, “dash”, “longdash”, “dashdot”:</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="plotly.html#cb420-1" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb420-2"><a href="plotly.html#cb420-2" tabindex="-1"></a>  <span class="at">data =</span> imdb_woody, </span>
<span id="cb420-3"><a href="plotly.html#cb420-3" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb420-4"><a href="plotly.html#cb420-4" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>,</span>
<span id="cb420-5"><a href="plotly.html#cb420-5" tabindex="-1"></a>  <span class="at">color =</span> <span class="sc">~</span>country,</span>
<span id="cb420-6"><a href="plotly.html#cb420-6" tabindex="-1"></a>  <span class="at">line =</span> <span class="fu">list</span>(</span>
<span id="cb420-7"><a href="plotly.html#cb420-7" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&#39;steelblue&#39;</span>,</span>
<span id="cb420-8"><a href="plotly.html#cb420-8" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb420-9"><a href="plotly.html#cb420-9" tabindex="-1"></a>    <span class="at">dash =</span> <span class="st">&#39;dash&#39;</span></span>
<span id="cb420-10"><a href="plotly.html#cb420-10" tabindex="-1"></a>  )</span>
<span id="cb420-11"><a href="plotly.html#cb420-11" tabindex="-1"></a>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c4face4d5cbb6825c56d" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-c4face4d5cbb6825c56d">{"x":{"visdat":{"5dd328b7fe46":["function () ","plotlyVisDat"]},"cur_data":"5dd328b7fe46","attrs":{"5dd328b7fe46":{"x":{},"y":{},"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"avg_vote"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2008],"y":[7.0999999999999996],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"Spain, USA","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2011],"y":[7.7000000000000002],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"Spain, USA, France","marker":{"color":"rgba(219,161,118,1)","line":{"color":"rgba(219,161,118,1)"}},"textfont":{"color":"rgba(219,161,118,1)"},"error_y":{"color":"rgba(219,161,118,1)"},"error_x":{"color":"rgba(219,161,118,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2006],"y":[6.7000000000000002],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"UK, USA","marker":{"color":"rgba(217,150,141,1)","line":{"color":"rgba(217,150,141,1)"}},"textfont":{"color":"rgba(217,150,141,1)"},"error_y":{"color":"rgba(217,150,141,1)"},"error_x":{"color":"rgba(217,150,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2005],"y":[7.5999999999999996],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"UK, USA, Ireland, Luxembourg, France","marker":{"color":"rgba(152,158,202,1)","line":{"color":"rgba(152,158,202,1)"}},"textfont":{"color":"rgba(152,158,202,1)"},"error_y":{"color":"rgba(152,158,202,1)"},"error_x":{"color":"rgba(152,158,202,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1971,1972,1973,1975,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1987,1988,1989,1990,1992,1991,1993,1994,1995,1996,1997,1998,1999,2000,2002,2004,2013,2015,2016,2017,2019],"y":[7.2999999999999998,7,6.7999999999999998,7.2000000000000002,7.7000000000000002,8,7.4000000000000004,7.9000000000000004,7.2999999999999998,6.5999999999999996,7.7000000000000002,7.4000000000000004,7.7000000000000002,7.9000000000000004,7.5,6.5,7.2999999999999998,7.9000000000000004,6.5999999999999996,7.5,6.7000000000000002,7.4000000000000004,7.4000000000000004,7,6.7000000000000002,7.4000000000000004,6.2999999999999998,7.2000000000000002,6.7000000000000002,6.5999999999999996,6.4000000000000004,7.2999999999999998,6.5999999999999996,6.5999999999999996,6.2000000000000002,6.5999999999999996],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"USA","marker":{"color":"rgba(215,144,197,1)","line":{"color":"rgba(215,144,197,1)"}},"textfont":{"color":"rgba(215,144,197,1)"},"error_y":{"color":"rgba(215,144,197,1)"},"error_x":{"color":"rgba(215,144,197,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2009,2014],"y":[7.0999999999999996,6.5],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"USA, France","marker":{"color":"rgba(205,180,144,1)","line":{"color":"rgba(205,180,144,1)"}},"textfont":{"color":"rgba(205,180,144,1)"},"error_y":{"color":"rgba(205,180,144,1)"},"error_x":{"color":"rgba(205,180,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2003],"y":[6.2999999999999998],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"USA, France, UK","marker":{"color":"rgba(186,217,78,1)","line":{"color":"rgba(186,217,78,1)"}},"textfont":{"color":"rgba(186,217,78,1)"},"error_y":{"color":"rgba(186,217,78,1)"},"error_x":{"color":"rgba(186,217,78,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2001],"y":[6.7000000000000002],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"USA, Germany","marker":{"color":"rgba(247,217,52,1)","line":{"color":"rgba(247,217,52,1)"}},"textfont":{"color":"rgba(247,217,52,1)"},"error_y":{"color":"rgba(247,217,52,1)"},"error_x":{"color":"rgba(247,217,52,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2012],"y":[6.2999999999999998],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"USA, Italy, Spain","marker":{"color":"rgba(241,204,114,1)","line":{"color":"rgba(241,204,114,1)"}},"textfont":{"color":"rgba(241,204,114,1)"},"error_y":{"color":"rgba(241,204,114,1)"},"error_x":{"color":"rgba(241,204,114,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2010],"y":[6.2999999999999998],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"USA, Spain","marker":{"color":"rgba(215,191,158,1)","line":{"color":"rgba(215,191,158,1)"}},"textfont":{"color":"rgba(215,191,158,1)"},"error_y":{"color":"rgba(215,191,158,1)"},"error_x":{"color":"rgba(215,191,158,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2007],"y":[6.7000000000000002],"mode":"lines","line":{"color":"steelblue","size":3,"dash":"dash"},"type":"scatter","name":"USA, UK, France","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><br></p>
</div>
<div id="ховеры" class="section level3 unnumbered hasAnchor">
<h3>Ховеры<a href="plotly.html#ховеры" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ховеры, в общем виде, это разного рода эффекты (всплывающие подписи, подсказки, плавные переходы, трансформация, ротация, увеличение, смещение и пр.), которые наблюдаются при наведении на них курсора мыши. В plotly ховеры - это всплывающие подписи, которые содержат информацию о координатах (по умолчанию).</p>
<p>При желании, можно изменить содержание ховеров. Для этого необходимо создать отдельную колонку, в которой в виде строки будут записаны все необходимые параметры, которые хочется показывать в ховере. При этом для кастомизации записи можно использовать html-теги, хотя бы тег <code>&lt;br&gt;</code> для разделения значений по строчкам.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="plotly.html#cb421-1" tabindex="-1"></a><span class="co"># создадим колонку с информацией о годе, оценке, названии и жанре фильма</span></span>
<span id="cb421-2"><a href="plotly.html#cb421-2" tabindex="-1"></a>imdb_lynch[, my_hover <span class="sc">:=</span> <span class="fu">paste</span>(</span>
<span id="cb421-3"><a href="plotly.html#cb421-3" tabindex="-1"></a>  <span class="st">&#39;year =&#39;</span>, year, <span class="st">&#39;&lt;br&gt;&#39;</span>,</span>
<span id="cb421-4"><a href="plotly.html#cb421-4" tabindex="-1"></a>  <span class="st">&#39;imdb score =&#39;</span>, avg_vote, <span class="st">&#39;&lt;br&gt;&#39;</span>,</span>
<span id="cb421-5"><a href="plotly.html#cb421-5" tabindex="-1"></a>  <span class="st">&#39;title = &#39;</span>, original_title, <span class="st">&#39;&lt;br&gt;&#39;</span>,</span>
<span id="cb421-6"><a href="plotly.html#cb421-6" tabindex="-1"></a>  <span class="st">&#39;genres =&#39;</span>, genre)]</span>
<span id="cb421-7"><a href="plotly.html#cb421-7" tabindex="-1"></a></span>
<span id="cb421-8"><a href="plotly.html#cb421-8" tabindex="-1"></a><span class="co"># смотрим результат</span></span>
<span id="cb421-9"><a href="plotly.html#cb421-9" tabindex="-1"></a>imdb_lynch[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, my_hover]</span></code></pre></div>
<pre><code>## [1] &quot;year = 1977 &lt;br&gt; imdb score = 7.4 &lt;br&gt; title =  Eraserhead &lt;br&gt; genres = Fantasy, Horror&quot;       
## [2] &quot;year = 1980 &lt;br&gt; imdb score = 8.1 &lt;br&gt; title =  The Elephant Man &lt;br&gt; genres = Biography, Drama&quot;
## [3] &quot;year = 1984 &lt;br&gt; imdb score = 6.5 &lt;br&gt; title =  Dune &lt;br&gt; genres = Action, Adventure, Sci-Fi&quot;</code></pre>
<p>Указываем созданную переменную для использования в качестве ховера:</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="plotly.html#cb423-1" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_lynch, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb423-2"><a href="plotly.html#cb423-2" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;markers&#39;</span>, </span>
<span id="cb423-3"><a href="plotly.html#cb423-3" tabindex="-1"></a>        <span class="at">text =</span> <span class="sc">~</span>my_hover, <span class="at">hoverinfo =</span> <span class="st">&#39;text&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6b4d5491d318858f5a2b" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-6b4d5491d318858f5a2b">{"x":{"visdat":{"5dd3425d9200":["function () ","plotlyVisDat"]},"cur_data":"5dd3425d9200","attrs":{"5dd3425d9200":{"x":{},"y":{},"mode":"markers","text":{},"hoverinfo":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"avg_vote"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1977,1980,1984,1986,1990,1992,1997,1999,2001,2006,2014],"y":[7.4000000000000004,8.0999999999999996,6.5,7.7000000000000002,7.2000000000000002,7.2999999999999998,7.5999999999999996,8,8,6.9000000000000004,7.7000000000000002],"mode":"markers","text":["year = 1977 <br> imdb score = 7.4 <br> title =  Eraserhead <br> genres = Fantasy, Horror","year = 1980 <br> imdb score = 8.1 <br> title =  The Elephant Man <br> genres = Biography, Drama","year = 1984 <br> imdb score = 6.5 <br> title =  Dune <br> genres = Action, Adventure, Sci-Fi","year = 1986 <br> imdb score = 7.7 <br> title =  Blue Velvet <br> genres = Drama, Mystery, Thriller","year = 1990 <br> imdb score = 7.2 <br> title =  Wild at Heart <br> genres = Comedy, Crime, Drama","year = 1992 <br> imdb score = 7.3 <br> title =  Twin Peaks: Fire Walk with Me <br> genres = Drama, Horror, Mystery","year = 1997 <br> imdb score = 7.6 <br> title =  Lost Highway <br> genres = Mystery, Thriller","year = 1999 <br> imdb score = 8 <br> title =  The Straight Story <br> genres = Biography, Drama","year = 2001 <br> imdb score = 8 <br> title =  Mulholland Dr. <br> genres = Drama, Mystery, Thriller","year = 2006 <br> imdb score = 6.9 <br> title =  Inland Empire <br> genres = Drama, Fantasy, Mystery","year = 2014 <br> imdb score = 7.7 <br> title =  Twin Peaks: The Missing Pieces <br> genres = Drama, Horror, Mystery"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text"],"type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="plotly.html#cb424-1" tabindex="-1"></a>imdb_lynch[, my_hover <span class="sc">:=</span> <span class="cn">NULL</span>]</span></code></pre></div>
</div>
</div>
<div id="добавляемые-слои" class="section level2 unnumbered hasAnchor">
<h2>Добавляемые слои<a href="plotly.html#добавляемые-слои" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="наследование-параметров" class="section level3 unnumbered hasAnchor">
<h3>Наследование параметров<a href="plotly.html#наследование-параметров" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>plotly в немалой части следует идеологии grammar of graphics, которая реализована в ggplot2. В частности, идее слоев и сочетания разных данных и типов графиков на одном пространстве координат. Конечно, очень разные по типу графики совместить сложно или невозможно, но совмещение линий, точек и баров, линий и боксплотов, и т.д. встречается очень часто.</p>
<p>В частности, наложение графиков используется в ситуациях, когда данные необходимо отрисовать из разных колонок. Так, в данных по занятости населения США по строкам расположены года наблюдений, а в отдельных колонка - количество населения (pop) и количестве безработных (unemployed). Можно трансформировать датасет и перевести его в long-формат, однако проще добавить к графику еще один слой (след, trace, в терминологии plotly). Для каждого трейса можно задать свое название:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="plotly.html#cb425-1" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_genres_scores[genre <span class="sc">==</span> <span class="st">&#39;Horror&#39;</span>], <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>votes,</span>
<span id="cb425-2"><a href="plotly.html#cb425-2" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb425-3"><a href="plotly.html#cb425-3" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">data =</span> imdb_genres_scores[genre <span class="sc">==</span> <span class="st">&#39;Drama&#39;</span>], <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>votes,</span>
<span id="cb425-4"><a href="plotly.html#cb425-4" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5a5fda38b3743a697424" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-5a5fda38b3743a697424">{"x":{"visdat":{"5dd352516ea6":["function () ","plotlyVisDat"],"5dd31a9601fa":["function () ","data"]},"cur_data":"5dd31a9601fa","attrs":{"5dd352516ea6":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"5dd31a9601fa":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"votes"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1915,1917,1920,1925,1927,1928,1932,1934,1935,1940,1941,1945,1946,1948,1949,1951,1952,1953,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[6.7999999999999998,6.0999999999999996,6,7.5999999999999996,6.7999999999999998,7.2999999999999998,6.2999999999999998,3.6500000000000004,7.0999999999999996,4.25,7.2999999999999998,6,4.8666666666666663,4.9499999999999993,7.0999999999999996,4.4000000000000004,5.5999999999999996,7.0999999999999996,5.0700000000000003,5.0499999999999998,5.8999999999999995,5.7222222222222223,5.0666666666666664,5.5444444444444452,5.8076923076923084,5.6352941176470601,4.6600000000000001,5.3769230769230756,5.0250000000000004,5.4699999999999998,4.96,5.0111111111111111,5.1552631578947361,4.8405405405405393,5.3414634146341466,4.8625000000000007,4.6315789473684212,5.1227272727272721,4.9650000000000007,4.9333333333333336,4.7428571428571429,5.0000000000000009,5.3533333333333326,4.8136363636363635,4.6739130434782616,4.3666666666666663,4.4285714285714288,4.3857142857142861,4.6424242424242426,4.418181818181818,4.6525000000000007,4.9208333333333334,4.9117647058823533,4.6533333333333333,4.7066666666666652,4.3599999999999994,4.0333333333333323,4.8181818181818183,4.4153846153846157,4.208333333333333,4.2750000000000004,3.9947368421052634,4.2923076923076922,4.7230769230769232,4.0473684210526315,3.9435897435897433,4.2166666666666668,4.0657142857142858,3.8637681159420283,4.1161290322580637,4.0424242424242438,4.0253521126760576,4.0236111111111104,3.9182926829268285,3.9614583333333346,4.1582524271844665,3.9165137614678875,3.9650485436893192,4.346564885496182,4.3315789473684205,4.1585106382978729,4.0628571428571432],"mode":"lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[5.7999999999999998,5.5,6.7666666666666657,5.9000000000000004,6.327272727272728,6.2999999999999998,6.5800000000000001,6.1888888888888891,6.1600000000000001,6.1166666666666671,6.5764705882352947,6.4400000000000004,6.6624999999999996,6.6454545454545464,6.5294117647058814,6.8928571428571432,6.1999999999999993,6.4944444444444445,6.6099999999999994,6.477777777777777,6.2999999999999998,6.4857142857142875,6.4951219512195122,6.4840909090909102,6.5303030303030303,6.6250000000000018,6.5124999999999993,6.1842105263157894,6.5068965517241368,6.4359999999999991,6.6000000000000005,6.3888888888888893,6.8285714285714283,6.5600000000000005,6.4874999999999989,6.681481481481482,6.6999999999999993,6.8723404255319176,6.8878787878787877,6.8000000000000007,6.8500000000000005,6.9222222222222207,6.7612903225806447,6.7605263157894742,6.7749999999999995,6.9298245614035086,6.6755555555555555,6.9265306122448962,6.7581818181818178,6.6555555555555577,6.6826666666666679,6.8536231884057992,6.9305555555555545,6.9220338983050835,6.7333333333333343,6.758208955223882,6.7203125000000012,6.5038461538461556,6.5825581395348811,6.4813725490196088,6.486516853932585,6.6492957746478867,6.4818181818181815,6.4625000000000012,6.5553846153846154,6.4411764705882337,6.7127906976744205,6.5341463414634156,6.590476190476191,6.3959999999999999,6.5215189873417732,6.6495145631067949,6.5987654320987668,6.664646464646462,6.2430232558139531,6.4947916666666687,6.460576923076923,6.3673469387755111,6.5193548387096767,6.5114285714285742,6.417272727272727,6.7138297872340438,6.4406779661016937,6.4990384615384613,6.1859375000000005,6.2865546218487376,6.2852713178294595,6.3037837837837829,6.2863414634146411,6.2243781094527328,6.2783673469387686,6.2760683760683778,6.167256637168145,6.3157377049180292,6.2473354231974936,6.1714285714285708,6.2479338842975203,6.2348780487804838,6.1822966507177055,6.1319612590799002,6.1329326923076941,6.2108843537414993,6.2313283208020032,6.2682038834951399,6.163488372093024,6.2331096196868039,6.3322033898305055,6.3104247104247113,6.3932754880694107,6.4259615384615403],"mode":"lines","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Так же как и в <code>ggplot2</code> при наложении слоев возможно наследование параметров. Например, в графике выше можно оставить только те параметры, которые определяют именно этот слой (значение по оси OY и название линии):</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="plotly.html#cb426-1" tabindex="-1"></a><span class="fu">plot_ly</span>(imdb_genres_scores[genre <span class="sc">==</span> <span class="st">&#39;Horror&#39;</span>], <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>votes,</span>
<span id="cb426-2"><a href="plotly.html#cb426-2" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb426-3"><a href="plotly.html#cb426-3" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">data =</span> imdb_genres_scores[genre <span class="sc">==</span> <span class="st">&#39;Drama&#39;</span>])</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-fdac00aa7a67d57e930a" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-fdac00aa7a67d57e930a">{"x":{"visdat":{"5dd36d492f55":["function () ","plotlyVisDat"],"5dd35408702e":["function () ","data"]},"cur_data":"5dd35408702e","attrs":{"5dd36d492f55":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"5dd35408702e":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"votes"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1915,1917,1920,1925,1927,1928,1932,1934,1935,1940,1941,1945,1946,1948,1949,1951,1952,1953,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[6.7999999999999998,6.0999999999999996,6,7.5999999999999996,6.7999999999999998,7.2999999999999998,6.2999999999999998,3.6500000000000004,7.0999999999999996,4.25,7.2999999999999998,6,4.8666666666666663,4.9499999999999993,7.0999999999999996,4.4000000000000004,5.5999999999999996,7.0999999999999996,5.0700000000000003,5.0499999999999998,5.8999999999999995,5.7222222222222223,5.0666666666666664,5.5444444444444452,5.8076923076923084,5.6352941176470601,4.6600000000000001,5.3769230769230756,5.0250000000000004,5.4699999999999998,4.96,5.0111111111111111,5.1552631578947361,4.8405405405405393,5.3414634146341466,4.8625000000000007,4.6315789473684212,5.1227272727272721,4.9650000000000007,4.9333333333333336,4.7428571428571429,5.0000000000000009,5.3533333333333326,4.8136363636363635,4.6739130434782616,4.3666666666666663,4.4285714285714288,4.3857142857142861,4.6424242424242426,4.418181818181818,4.6525000000000007,4.9208333333333334,4.9117647058823533,4.6533333333333333,4.7066666666666652,4.3599999999999994,4.0333333333333323,4.8181818181818183,4.4153846153846157,4.208333333333333,4.2750000000000004,3.9947368421052634,4.2923076923076922,4.7230769230769232,4.0473684210526315,3.9435897435897433,4.2166666666666668,4.0657142857142858,3.8637681159420283,4.1161290322580637,4.0424242424242438,4.0253521126760576,4.0236111111111104,3.9182926829268285,3.9614583333333346,4.1582524271844665,3.9165137614678875,3.9650485436893192,4.346564885496182,4.3315789473684205,4.1585106382978729,4.0628571428571432],"mode":"lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[5.7999999999999998,5.5,6.7666666666666657,5.9000000000000004,6.327272727272728,6.2999999999999998,6.5800000000000001,6.1888888888888891,6.1600000000000001,6.1166666666666671,6.5764705882352947,6.4400000000000004,6.6624999999999996,6.6454545454545464,6.5294117647058814,6.8928571428571432,6.1999999999999993,6.4944444444444445,6.6099999999999994,6.477777777777777,6.2999999999999998,6.4857142857142875,6.4951219512195122,6.4840909090909102,6.5303030303030303,6.6250000000000018,6.5124999999999993,6.1842105263157894,6.5068965517241368,6.4359999999999991,6.6000000000000005,6.3888888888888893,6.8285714285714283,6.5600000000000005,6.4874999999999989,6.681481481481482,6.6999999999999993,6.8723404255319176,6.8878787878787877,6.8000000000000007,6.8500000000000005,6.9222222222222207,6.7612903225806447,6.7605263157894742,6.7749999999999995,6.9298245614035086,6.6755555555555555,6.9265306122448962,6.7581818181818178,6.6555555555555577,6.6826666666666679,6.8536231884057992,6.9305555555555545,6.9220338983050835,6.7333333333333343,6.758208955223882,6.7203125000000012,6.5038461538461556,6.5825581395348811,6.4813725490196088,6.486516853932585,6.6492957746478867,6.4818181818181815,6.4625000000000012,6.5553846153846154,6.4411764705882337,6.7127906976744205,6.5341463414634156,6.590476190476191,6.3959999999999999,6.5215189873417732,6.6495145631067949,6.5987654320987668,6.664646464646462,6.2430232558139531,6.4947916666666687,6.460576923076923,6.3673469387755111,6.5193548387096767,6.5114285714285742,6.417272727272727,6.7138297872340438,6.4406779661016937,6.4990384615384613,6.1859375000000005,6.2865546218487376,6.2852713178294595,6.3037837837837829,6.2863414634146411,6.2243781094527328,6.2783673469387686,6.2760683760683778,6.167256637168145,6.3157377049180292,6.2473354231974936,6.1714285714285708,6.2479338842975203,6.2348780487804838,6.1822966507177055,6.1319612590799002,6.1329326923076941,6.2108843537414993,6.2313283208020032,6.2682038834951399,6.163488372093024,6.2331096196868039,6.3322033898305055,6.3104247104247113,6.3932754880694107,6.4259615384615403],"mode":"lines","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><br></p>
</div>
</div>
<div id="общие-параметры-графиков" class="section level2 unnumbered hasAnchor">
<h2>Общие параметры графиков<a href="plotly.html#общие-параметры-графиков" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Отдельный слой на графиках plotly - это слой общих параметров графика, таких как заголовок, тип группировки баров или боксплотов, параметры осей (заголовки, диапазоны, шрифты и проч), а так же отступы от краев графика. Все параметры задаются с помощью базовой функции layout(), которая первым аргументом принимает plotly-объект, а все прочие аргументы формируют параметры объекта. Рассмотрим параметры заголовка и осей, параметры легенд и группировки баров и боксплотов описаны в соответствующих разделах.</p>
<p><br></p>
<div id="заголовок" class="section level3 unnumbered hasAnchor">
<h3>Заголовок<a href="plotly.html#заголовок" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Заголовок на графиках формируется очень просто, с помощью аргумента <code>title</code> и, собственно, строки, которая должна быть заголовком графика.</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="plotly.html#cb427-1" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="fu">rbind</span>(imdb_woody, imdb_lynch), <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb427-2"><a href="plotly.html#cb427-2" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;markers&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>director) <span class="sc">%&gt;%</span></span>
<span id="cb427-3"><a href="plotly.html#cb427-3" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">&#39;Woody + David&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-af7cd7200bfd3f3fdb1d" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-af7cd7200bfd3f3fdb1d">{"x":{"visdat":{"5dd3140ce305":["function () ","plotlyVisDat"]},"cur_data":"5dd3140ce305","attrs":{"5dd3140ce305":{"x":{},"y":{},"mode":"markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Woody + David","xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"avg_vote"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1977,1980,1984,1986,1990,1992,1997,1999,2001,2006,2014],"y":[7.4000000000000004,8.0999999999999996,6.5,7.7000000000000002,7.2000000000000002,7.2999999999999998,7.5999999999999996,8,8,6.9000000000000004,7.7000000000000002],"mode":"markers","type":"scatter","name":"David Lynch","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1971,1972,1973,1975,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1987,1988,1989,1990,1992,1991,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2008,2007,2009,2010,2011,2012,2013,2014,2015,2016,2017,2019],"y":[7.2999999999999998,7,6.7999999999999998,7.2000000000000002,7.7000000000000002,8,7.4000000000000004,7.9000000000000004,7.2999999999999998,6.5999999999999996,7.7000000000000002,7.4000000000000004,7.7000000000000002,7.9000000000000004,7.5,6.5,7.2999999999999998,7.9000000000000004,6.5999999999999996,7.5,6.7000000000000002,7.4000000000000004,7.4000000000000004,7,6.7000000000000002,7.4000000000000004,6.2999999999999998,7.2000000000000002,6.7000000000000002,6.7000000000000002,6.5999999999999996,6.2999999999999998,6.4000000000000004,7.5999999999999996,6.7000000000000002,7.0999999999999996,6.7000000000000002,7.0999999999999996,6.2999999999999998,7.7000000000000002,6.2999999999999998,7.2999999999999998,6.5,6.5999999999999996,6.5999999999999996,6.2000000000000002,6.5999999999999996],"mode":"markers","type":"scatter","name":"Woody Allen","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Также, как и c некоторыми другими текстовыми метками на графиках plotly (ховеры, подписи осей, лейблы), в строке заголовка можно использовать html-теги:</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="plotly.html#cb428-1" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="fu">rbind</span>(imdb_woody, imdb_lynch), <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb428-2"><a href="plotly.html#cb428-2" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;markers&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>director) <span class="sc">%&gt;%</span></span>
<span id="cb428-3"><a href="plotly.html#cb428-3" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">&#39;Woody + David&lt;br&gt;используем тэг&#39;</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e2c6e919b45790f0b32e" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e2c6e919b45790f0b32e">{"x":{"visdat":{"5dd36e8c5ef6":["function () ","plotlyVisDat"]},"cur_data":"5dd36e8c5ef6","attrs":{"5dd36e8c5ef6":{"x":{},"y":{},"mode":"markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Woody + David<br>используем тэг","xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"avg_vote"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1977,1980,1984,1986,1990,1992,1997,1999,2001,2006,2014],"y":[7.4000000000000004,8.0999999999999996,6.5,7.7000000000000002,7.2000000000000002,7.2999999999999998,7.5999999999999996,8,8,6.9000000000000004,7.7000000000000002],"mode":"markers","type":"scatter","name":"David Lynch","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1971,1972,1973,1975,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1987,1988,1989,1990,1992,1991,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2008,2007,2009,2010,2011,2012,2013,2014,2015,2016,2017,2019],"y":[7.2999999999999998,7,6.7999999999999998,7.2000000000000002,7.7000000000000002,8,7.4000000000000004,7.9000000000000004,7.2999999999999998,6.5999999999999996,7.7000000000000002,7.4000000000000004,7.7000000000000002,7.9000000000000004,7.5,6.5,7.2999999999999998,7.9000000000000004,6.5999999999999996,7.5,6.7000000000000002,7.4000000000000004,7.4000000000000004,7,6.7000000000000002,7.4000000000000004,6.2999999999999998,7.2000000000000002,6.7000000000000002,6.7000000000000002,6.5999999999999996,6.2999999999999998,6.4000000000000004,7.5999999999999996,6.7000000000000002,7.0999999999999996,6.7000000000000002,7.0999999999999996,6.2999999999999998,7.7000000000000002,6.2999999999999998,7.2999999999999998,6.5,6.5999999999999996,6.5999999999999996,6.2000000000000002,6.5999999999999996],"mode":"markers","type":"scatter","name":"Woody Allen","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><br></p>
</div>
<div id="параметры-осей-1" class="section level3 unnumbered hasAnchor">
<h3>Параметры осей<a href="plotly.html#параметры-осей-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Из параметров осей самые важные - это название оси (особенно важно при отрисовке совмещенных графиков), а так же диапазоны, которые должны быть отражены. Особенно это важно для оси OY, так как по умолчанию на линейных графиках ось начинается на с нуля, а с минимального значения, что несколько противоречит общепринятым нормам в визуализации данных.</p>
<p>Параметры осей также задаются списками параметров. Название оси задается через параметр <code>title</code>, а диапазоны можно указать либо вектором с границами диапазона и параметром <code>range</code>. Параметр <code>rangemode</code> со значением <code>tozero</code> указывает что ось необходимо строить от нуля (можно также указать <code>nonnegative</code>, все неотрицательные).</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="plotly.html#cb429-1" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="fu">rbind</span>(imdb_woody, imdb_lynch), <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb429-2"><a href="plotly.html#cb429-2" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;markers&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>director) <span class="sc">%&gt;%</span></span>
<span id="cb429-3"><a href="plotly.html#cb429-3" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">&#39;Woody + David&#39;</span>,</span>
<span id="cb429-4"><a href="plotly.html#cb429-4" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&#39;&#39;</span>),</span>
<span id="cb429-5"><a href="plotly.html#cb429-5" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">rangemode =</span> <span class="st">&#39;tozero&#39;</span>))</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9267443c11cc0beac025" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-9267443c11cc0beac025">{"x":{"visdat":{"5dd34b50b34":["function () ","plotlyVisDat"]},"cur_data":"5dd34b50b34","attrs":{"5dd34b50b34":{"x":{},"y":{},"mode":"markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Woody + David","xaxis":{"domain":[0,1],"automargin":true,"title":""},"yaxis":{"domain":[0,1],"automargin":true,"rangemode":"tozero","title":"avg_vote"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1977,1980,1984,1986,1990,1992,1997,1999,2001,2006,2014],"y":[7.4000000000000004,8.0999999999999996,6.5,7.7000000000000002,7.2000000000000002,7.2999999999999998,7.5999999999999996,8,8,6.9000000000000004,7.7000000000000002],"mode":"markers","type":"scatter","name":"David Lynch","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1971,1972,1973,1975,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1987,1988,1989,1990,1992,1991,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2008,2007,2009,2010,2011,2012,2013,2014,2015,2016,2017,2019],"y":[7.2999999999999998,7,6.7999999999999998,7.2000000000000002,7.7000000000000002,8,7.4000000000000004,7.9000000000000004,7.2999999999999998,6.5999999999999996,7.7000000000000002,7.4000000000000004,7.7000000000000002,7.9000000000000004,7.5,6.5,7.2999999999999998,7.9000000000000004,6.5999999999999996,7.5,6.7000000000000002,7.4000000000000004,7.4000000000000004,7,6.7000000000000002,7.4000000000000004,6.2999999999999998,7.2000000000000002,6.7000000000000002,6.7000000000000002,6.5999999999999996,6.2999999999999998,6.4000000000000004,7.5999999999999996,6.7000000000000002,7.0999999999999996,6.7000000000000002,7.0999999999999996,6.2999999999999998,7.7000000000000002,6.2999999999999998,7.2999999999999998,6.5,6.5999999999999996,6.5999999999999996,6.2000000000000002,6.5999999999999996],"mode":"markers","type":"scatter","name":"Woody Allen","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>В параметрах осей также можно задавать параметры названия оси, меток (шрифт, наклон, количество и шаг меток), цвет и ширину линий осей и координатной сетки, а так же отдельные параметры для определенных типов графиков. Все это достаточно редкие в использовании кейсы, и все следуют общей логике - параметры элемента задаются списком параметров, некоторые из которых имеют ограниченный набор значений. Подробнее в <a href="https://plot.ly/r/reference/#layout">документации</a> по функции <code>layout()</code>.</p>
<p><br></p>
</div>
</div>
<div id="совмещенные-графики" class="section level2 unnumbered hasAnchor">
<h2>Совмещенные графики<a href="plotly.html#совмещенные-графики" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Одна из самых частых задач, котрые возникают при работе с <code>plotly</code>, это совмещение нескольких графиков на одном общем графике. В ggplot2 это аналог фасет.</p>
<p>Для совмещения графиков используется функция <code>subplot()</code>, в которую первыми аргументами передаются <code>plot_ly</code>-объекты (графики). Для указания, вертикально или горизонтально компоновать графики, аргумент nrows. По умолчанию он равен единице, то есть графики компонуются в ряд по горизонтали, противном же случае идет компоновка по вертикали. Если же графиков больше, чем заданных строк, то сначала графики компонуются построчно так, чтобы на последней указанной строке был хотя бы один график. Также в функции <code>subplot()</code> есть еще ряд аргументов, которые задают соотношение графиков между собой - каково должно быть расстояние, будут ли объеденены подписи осей и т.д. На практике, впрочем, эти параметры используются нечасто.</p>
<p>Пример совмещения графиков - показываем информацию по двум режиссерам на двух отдельных графиках, а не на одном. Параметр <code>nrows</code> задает, в сколько строк должны быть организованы графики, если параметр не указан, то графики компонуются вертикально, на одной линии:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="plotly.html#cb430-1" tabindex="-1"></a><span class="fu">subplot</span>(</span>
<span id="cb430-2"><a href="plotly.html#cb430-2" tabindex="-1"></a>  <span class="fu">plot_ly</span>(imdb_woody, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb430-3"><a href="plotly.html#cb430-3" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>),</span>
<span id="cb430-4"><a href="plotly.html#cb430-4" tabindex="-1"></a>    <span class="fu">plot_ly</span>(imdb_lynch, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb430-5"><a href="plotly.html#cb430-5" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>),</span>
<span id="cb430-6"><a href="plotly.html#cb430-6" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-bb6528297686a3c1153e" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-bb6528297686a3c1153e">{"x":{"data":[{"x":[1969,1971,1972,1973,1975,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1987,1988,1989,1990,1992,1991,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2008,2007,2009,2010,2011,2012,2013,2014,2015,2016,2017,2019],"y":[7.2999999999999998,7,6.7999999999999998,7.2000000000000002,7.7000000000000002,8,7.4000000000000004,7.9000000000000004,7.2999999999999998,6.5999999999999996,7.7000000000000002,7.4000000000000004,7.7000000000000002,7.9000000000000004,7.5,6.5,7.2999999999999998,7.9000000000000004,6.5999999999999996,7.5,6.7000000000000002,7.4000000000000004,7.4000000000000004,7,6.7000000000000002,7.4000000000000004,6.2999999999999998,7.2000000000000002,6.7000000000000002,6.7000000000000002,6.5999999999999996,6.2999999999999998,6.4000000000000004,7.5999999999999996,6.7000000000000002,7.0999999999999996,6.7000000000000002,7.0999999999999996,6.2999999999999998,7.7000000000000002,6.2999999999999998,7.2999999999999998,6.5,6.5999999999999996,6.5999999999999996,6.2000000000000002,6.5999999999999996],"mode":"lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1980,1984,1986,1990,1992,1997,1999,2001,2006,2014],"y":[7.4000000000000004,8.0999999999999996,6.5,7.7000000000000002,7.2000000000000002,7.2999999999999998,7.5999999999999996,8,8,6.9000000000000004,7.7000000000000002],"mode":"lines","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x2","yaxis":"y2","frame":null}],"layout":{"xaxis":{"domain":[0,1],"automargin":true,"anchor":"y"},"xaxis2":{"domain":[0,1],"automargin":true,"anchor":"y2"},"yaxis2":{"domain":[0,0.47999999999999998],"automargin":true,"anchor":"x2"},"yaxis":{"domain":[0.52000000000000002,1],"automargin":true,"anchor":"x"},"annotations":[],"shapes":[],"images":[],"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":true},"attrs":{"5dd324c003e0":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"5dd36efd4a17":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Задать название графика, названия и параметры осей можно также с помощью функции <code>layout()</code>, которая определяет параметры всего графика. Как и в прочих наших графиках, зададим название и укажем, что оси OY начинаются от нуля. Так как на графике несколько осей OX и OY, для их определения используется численный индекс, yaxis (или yaxis1), yaxis2, yaxis3 и т.д., по порядку вызова объектов в <code>subplot()</code>.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="plotly.html#cb431-1" tabindex="-1"></a><span class="fu">subplot</span>(</span>
<span id="cb431-2"><a href="plotly.html#cb431-2" tabindex="-1"></a>  <span class="fu">plot_ly</span>(imdb_woody, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb431-3"><a href="plotly.html#cb431-3" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>),</span>
<span id="cb431-4"><a href="plotly.html#cb431-4" tabindex="-1"></a>    <span class="fu">plot_ly</span>(imdb_lynch, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>avg_vote,</span>
<span id="cb431-5"><a href="plotly.html#cb431-5" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>),</span>
<span id="cb431-6"><a href="plotly.html#cb431-6" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb431-7"><a href="plotly.html#cb431-7" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">&#39;Woody + Lynch&#39;</span>,</span>
<span id="cb431-8"><a href="plotly.html#cb431-8" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&#39;&#39;</span>),</span>
<span id="cb431-9"><a href="plotly.html#cb431-9" tabindex="-1"></a>         <span class="at">showlegend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb431-10"><a href="plotly.html#cb431-10" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&#39;Woody Allen&#39;</span>, <span class="at">rangemode =</span> <span class="st">&#39;tozero&#39;</span>),</span>
<span id="cb431-11"><a href="plotly.html#cb431-11" tabindex="-1"></a>         <span class="at">yaxis2 =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&#39;David Lynch&#39;</span>, <span class="at">rangemode =</span> <span class="st">&#39;tozero&#39;</span>))</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e6b48e85816dc9036770" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e6b48e85816dc9036770">{"x":{"data":[{"x":[1969,1971,1972,1973,1975,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1987,1988,1989,1990,1992,1991,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2008,2007,2009,2010,2011,2012,2013,2014,2015,2016,2017,2019],"y":[7.2999999999999998,7,6.7999999999999998,7.2000000000000002,7.7000000000000002,8,7.4000000000000004,7.9000000000000004,7.2999999999999998,6.5999999999999996,7.7000000000000002,7.4000000000000004,7.7000000000000002,7.9000000000000004,7.5,6.5,7.2999999999999998,7.9000000000000004,6.5999999999999996,7.5,6.7000000000000002,7.4000000000000004,7.4000000000000004,7,6.7000000000000002,7.4000000000000004,6.2999999999999998,7.2000000000000002,6.7000000000000002,6.7000000000000002,6.5999999999999996,6.2999999999999998,6.4000000000000004,7.5999999999999996,6.7000000000000002,7.0999999999999996,6.7000000000000002,7.0999999999999996,6.2999999999999998,7.7000000000000002,6.2999999999999998,7.2999999999999998,6.5,6.5999999999999996,6.5999999999999996,6.2000000000000002,6.5999999999999996],"mode":"lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1980,1984,1986,1990,1992,1997,1999,2001,2006,2014],"y":[7.4000000000000004,8.0999999999999996,6.5,7.7000000000000002,7.2000000000000002,7.2999999999999998,7.5999999999999996,8,8,6.9000000000000004,7.7000000000000002],"mode":"lines","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x2","yaxis":"y2","frame":null}],"layout":{"xaxis":{"domain":[0,1],"automargin":true,"anchor":"y","title":""},"xaxis2":{"domain":[0,1],"automargin":true,"anchor":"y2"},"yaxis2":{"domain":[0,0.47999999999999998],"automargin":true,"anchor":"x2","title":"David Lynch","rangemode":"tozero"},"yaxis":{"domain":[0.52000000000000002,1],"automargin":true,"anchor":"x","title":"Woody Allen","rangemode":"tozero"},"annotations":[],"shapes":[],"images":[],"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false,"title":"Woody + Lynch"},"attrs":{"5dd33388f3e0":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"5dd33564b6d0":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<!-- ## Домашняя работа -->
<!-- ### level 1 (IATYTD) {-} -->
<!-- С помощью пакета `plotly` отрисуйте график рассеяния, отражающий связь таких параметров, как `carat` и `price`. Используйте датасет ggplot2::diamonds, сделайте сабсет на 10000 строк (используйте `set.seed(1234)` для генерации зерна генератора случайных цифр). Удалите строки, в которых `carat > 3` -->
<!-- ```{r 10-visualization-19, message=FALSE, echo=FALSE} -->
<!-- library(ggplot2) -->
<!-- library(plotly) -->
<!-- library(data.table) -->
<!-- set.seed(1234) -->
<!-- # base R -->
<!-- # diamonds_sample <- diamonds[sample(nrow(diamonds), 1000), ] -->
<!-- # diamonds_sample <- diamonds_sample[diamonds_sample$carat <= 3, ] -->
<!-- # data.table -->
<!-- diamonds_sample <- as.data.table(diamonds) -->
<!-- diamonds_sample <- diamonds_sample[sample(.N, 1000)] -->
<!-- diamonds_sample <- diamonds_sample[carat <= 3] -->
<!-- plot_ly(diamonds_sample, x = ~carat, y = ~price, type = 'scatter', mode = 'markers') -->
<!-- ``` -->
<!-- ### level 2 (HNTR) {-} -->
<!-- Повторите предыдущий график, добавьте выделение цветом бриллиантов разного качества (`cut`) -->
<!-- ```{r 10-visualization-20, echo = FALSE} -->
<!-- plot_ly(diamonds_sample, x = ~carat, y = ~price, color = ~cut, type = 'scatter', mode = 'markers') -->
<!-- ``` -->
<!-- ### level 3 (HMP) {-} -->
<!-- Наложите с помощью функций `fitted()` и `loess()` линию тренда, демонстрирующую взаимосвязь размера камня и его цены (`price ~ carat`). -->
<!-- ### Level 4: Ultra-violence {-} -->
<!-- Полученную линию тренда сделайте красной, размера 4 и пунктирной. Линию в легенде назовите как `loess trend`. Подпишите график задания и оси. В заголовке графика сделайте перенос строки. -->
<!-- ```{r 10-visualization-26, echo = FALSE} -->
<!-- plot_ly(diamonds_sample, x = ~carat, y = ~price, color = ~cut,  -->
<!--         type = 'scatter', mode = 'markers') %>% -->
<!--   add_lines(data = diamonds_sample, x = ~carat, y = ~fitted((loess(price ~ carat))), -->
<!--             inherit = FALSE, name = 'loess trend',  -->
<!--             line = list(color = 'red', width = 4, dash = "dash")) %>% -->
<!--   layout( -->
<!--     title = 'Взаимосвязь стоимости бриллиантов и их размера<br> + loess-линия тренда', -->
<!--     xaxis = list(title = 'размер в каратах'), -->
<!--     yaxis = list(title = 'стоимость в у.е.') -->
<!--   ) -->
<!-- ``` -->
<!-- ### Level 5: Nightmare {-} -->
<!-- Измените на графике информацию, которая дается в ховере (hover), сделайте более понятными обозначения и округлите значения до сотен, а также добавьте информацию о качестве огранки и чистоте камня. Пример ховера: "carat = 3, price = 8k, cut = Fair, clarity = I1", каждый параметр камня с новой строки. Для линии тренда менять ховер не нужно. -->
<!-- ```{r 10-visualization-32, echo = FALSE} -->
<!-- # data.frame -->
<!-- # diamonds_sample$var_hover <-  -->
<!-- #   paste0('carat = ', diamonds_sample$carat, '<br>', -->
<!-- #          'price = ' , round(diamonds_sample$price, -3), 'k<br>', -->
<!-- #          'cut = ', diamonds_sample$cut, '<br>', -->
<!-- #          'clarity = ', diamonds_sample$clarity)] -->
<!-- # data.table  -->
<!-- setDT(diamonds_sample) -->
<!-- diamonds_sample[, var_hover := paste0('carat = ', carat, '<br>',  -->
<!--                              'price = ' , round(price, -3), 'k<br>', -->
<!--                              'cut = ', cut, '<br>', -->
<!--                              'clarity = ', clarity)] -->
<!-- plot_ly(diamonds_sample, x = ~carat, y = ~price, color = ~cut,  -->
<!--         type = 'scatter', mode = 'markers', -->
<!--         text = ~var_hover, hoverinfo = 'text') %>% -->
<!--   add_lines(data = diamonds_sample, x = ~carat, y = ~fitted((loess(price ~ carat))), -->
<!--             inherit = FALSE, name = 'loess trend',  -->
<!--             line = list(color = 'red', width = 4, dash = "dash")) %>% -->
<!--   layout( -->
<!--     title = 'Взаимосвязь стоимости бриллиантов и их размера<br> + loess-линия тренда', -->
<!--     xaxis = list(title = 'размер в каратах'), -->
<!--     yaxis = list(title = 'стоимость в у.е.') -->
<!--   ) -->
<!-- ``` -->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ggplot2-pt2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="web-скрапинг.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "static"
}
});
});
</script>

</body>

</html>
