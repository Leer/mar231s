<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Web-скрапинг | Автоматизированный сбор больших данных в экономико-социологических исследованиях</title>
  <meta name="description" content="Web-скрапинг | Автоматизированный сбор больших данных в экономико-социологических исследованиях" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Web-скрапинг | Автоматизированный сбор больших данных в экономико-социологических исследованиях" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Web-скрапинг | Автоматизированный сбор больших данных в экономико-социологических исследованиях" />
  
  
  

<meta name="author" content="Ph.A.Upravitelev" />


<meta name="date" content="2023-12-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="plotly.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.0/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R course</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i>Введение</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#запись-занятия"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#data-culture"><i class="fa fa-check"></i>Data culture</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#обо-мне"><i class="fa fa-check"></i>Обо мне</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#contacts"><i class="fa fa-check"></i>Contacts</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#mm-invite-link"><i class="fa fa-check"></i>MM invite link</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#syllabus"><i class="fa fa-check"></i>Syllabus</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r-intro"><i class="fa fa-check"></i>R intro</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#short-history"><i class="fa fa-check"></i>Short history</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r-ecosystem"><i class="fa fa-check"></i>R ecosystem</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r-rstudio"><i class="fa fa-check"></i>R + RStudio</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#альтернативные-ide"><i class="fa fa-check"></i>Альтернативные IDE</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#style-guide"><i class="fa fa-check"></i>Style guide</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#синтаксис"><i class="fa fa-check"></i>Синтаксис</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#структура-выражения"><i class="fa fa-check"></i>Структура выражения</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#вывод-на-печать"><i class="fa fa-check"></i>Вывод на печать</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#присваивание"><i class="fa fa-check"></i>Присваивание</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#операторы-присвоения"><i class="fa fa-check"></i>Операторы присвоения</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#арифметические-операторы"><i class="fa fa-check"></i>Арифметические операторы</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#операторы-сравнения"><i class="fa fa-check"></i>Операторы сравнения</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#логические-операторы"><i class="fa fa-check"></i>Логические операторы</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#комментарии-и-кавычки"><i class="fa fa-check"></i>Комментарии и кавычки</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#окружение-и-подсказки"><i class="fa fa-check"></i>Окружение и подсказки</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#полезные-функции-для-работы-с-окружением"><i class="fa fa-check"></i>Полезные функции для работы с окружением</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#help"><i class="fa fa-check"></i>help</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#стандартные-ошибки-в-синтаксисе"><i class="fa fa-check"></i>Стандартные ошибки в синтаксисе</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#object-not-found"><i class="fa fa-check"></i>Object not found</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#дополнительные-материалы"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#домашнее-задание"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#организационное-mm"><i class="fa fa-check"></i>Организационное / MM</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#операторы-и-создание-векторов"><i class="fa fa-check"></i>Операторы и создание векторов</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i>Векторы</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#запись-занятия-1"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#векторы"><i class="fa fa-check"></i>Векторы</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#атомарные-типы-данных"><i class="fa fa-check"></i>Атомарные типы данных</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#создание-векторов"><i class="fa fa-check"></i>Создание векторов</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#приведение-типов"><i class="fa fa-check"></i>Приведение типов</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#выбор-элемента-вектора"><i class="fa fa-check"></i>Выбор элемента вектора</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#выбор-по-номеру-позиции"><i class="fa fa-check"></i>Выбор по номеру позиции</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#выбор-по-значению"><i class="fa fa-check"></i>Выбор по значению</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#проверка-на-na"><i class="fa fa-check"></i>Проверка на NA</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#домашнее-задание-1"><i class="fa fa-check"></i>Домашнее задание</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i>Списки и таблицы</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#запись-занятия-23-сентября"><i class="fa fa-check"></i>Запись занятия 23 сентября</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#векторы-1"><i class="fa fa-check"></i>Векторы</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#поиск-по-вхождению-в-массив"><i class="fa fa-check"></i>Поиск по вхождению в массив</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#поиск-по-строке"><i class="fa fa-check"></i>Поиск по строке</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#векторизованные-операции"><i class="fa fa-check"></i>Векторизованные операции</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#recycling"><i class="fa fa-check"></i>Recycling</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#изменение-элементов-объектов"><i class="fa fa-check"></i>Изменение элементов объектов</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#списки"><i class="fa fa-check"></i>Списки</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#создание-списков"><i class="fa fa-check"></i>Создание списков</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#именованные-списки"><i class="fa fa-check"></i>Именованные списки</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#выбор-элемента-списка"><i class="fa fa-check"></i>Выбор элемента списка</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#структура-объектов"><i class="fa fa-check"></i>Структура объектов</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#таблицы"><i class="fa fa-check"></i>Таблицы</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#data.frame-vs-data.table-vs-dplyr"><i class="fa fa-check"></i>data.frame vs data.table vs dplyr</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#data.table"><i class="fa fa-check"></i>data.table</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#преимущества-data.table"><i class="fa fa-check"></i>Преимущества data.table</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#установка-и-подключение-пакета"><i class="fa fa-check"></i>Установка и подключение пакета</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#создание-data.table-таблиц"><i class="fa fa-check"></i>Создание data.table-таблиц</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#основная-формула-dt-синтаксиса"><i class="fa fa-check"></i>Основная формула dt-синтаксиса</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#создание-data.table-таблиц-1"><i class="fa fa-check"></i>Создание data.table-таблиц</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#выбор-строки"><i class="fa fa-check"></i>Выбор строки</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#дополнительные-материалы-1"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#домашнее-задание-2"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#векторы-2"><i class="fa fa-check"></i>векторы</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#списки-1"><i class="fa fa-check"></i>списки</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#таблицы.-импорт-данных"><i class="fa fa-check"></i>таблицы. импорт данных</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#работа-со-строками"><i class="fa fa-check"></i>работа со строками</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html"><i class="fa fa-check"></i>data.table pt1</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#запись-занятия-2"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#разбор-домашней-работы"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#списки-2"><i class="fa fa-check"></i>списки</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#таблицы.-импорт-данных-1"><i class="fa fa-check"></i>таблицы. импорт данных</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#работа-со-строками-1"><i class="fa fa-check"></i>работа со строками</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#основная-формула-dt-синтаксиса-1"><i class="fa fa-check"></i>Основная формула dt-синтаксиса</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#создание-data.table-таблиц-2"><i class="fa fa-check"></i>Создание data.table-таблиц</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#выбор-строки-1"><i class="fa fa-check"></i>Выбор строки</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#работа-с-колонками"><i class="fa fa-check"></i>Работа с колонками</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#обращение-к-колонке"><i class="fa fa-check"></i>Обращение к колонке</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#выбор-нескольких-колонок"><i class="fa fa-check"></i>Выбор нескольких колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#cоздание-колонок"><i class="fa fa-check"></i>Cоздание колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#модификация-колонок"><i class="fa fa-check"></i>Модификация колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#удаление-колонок"><i class="fa fa-check"></i>Удаление колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#вычисления-по-одной-колонке"><i class="fa fa-check"></i>Вычисления по одной колонке</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#группировка-по-нескольким-полям"><i class="fa fa-check"></i>Группировка по нескольким полям</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#sd-advanced"><i class="fa fa-check"></i>.SD (Advanced)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#полезные-ссылки"><i class="fa fa-check"></i>Полезные ссылки</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#домашнее-задание-3"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#работа-с-колонками-1"><i class="fa fa-check"></i>работа с колонками</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#для-тех-кто-любит-посложнее"><i class="fa fa-check"></i>для тех, кто любит посложнее</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html"><i class="fa fa-check"></i>data.table pt2</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#запись-занятия-3"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#разбор-домашней-работы-1"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#работа-с-колонками-2"><i class="fa fa-check"></i>работа с колонками</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#для-тех-кто-любит-посложнее-1"><i class="fa fa-check"></i>для тех, кто любит посложнее</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#применение-функций"><i class="fa fa-check"></i>Применение функций</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#dataset"><i class="fa fa-check"></i>dataset</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#применение-функций-1"><i class="fa fa-check"></i>Применение функций</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#количество-строк-и-значений-.n-uniquen"><i class="fa fa-check"></i>Количество строк и значений: .N, uniqueN</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#ветвления-ifelse-fifelse"><i class="fa fa-check"></i>Ветвления: ifelse / fifelse</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#агрегации"><i class="fa fa-check"></i>Агрегации</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#вычисления-по-одной-колонке-1"><i class="fa fa-check"></i>Вычисления по одной колонке</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#вычисления-по-нескольким-колонкам"><i class="fa fa-check"></i>Вычисления по нескольким колонкам</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#группировка-по-нескольким-полям-1"><i class="fa fa-check"></i>Группировка по нескольким полям</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#манипуляции-с-таблицами"><i class="fa fa-check"></i>Манипуляции с таблицами</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#rbind"><i class="fa fa-check"></i>rbind()</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#cbind"><i class="fa fa-check"></i>cbind()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#домашнее-задание-4"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-1-iatytd"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-2-hntr"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-3-hmp"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-4-uv"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-5-n"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html"><i class="fa fa-check"></i>data.table pt3</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#запись-занятия-4"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#разбор-домашней-работы-2"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-3-hmp-1"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-4-uv-1"><i class="fa fa-check"></i>level 4 (UV)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#манипуляции-с-таблицами-1"><i class="fa fa-check"></i>Манипуляции с таблицами</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#merge"><i class="fa fa-check"></i>merge()</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#long-wide-форматы-данных"><i class="fa fa-check"></i>long / wide-форматы данных</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#dcast"><i class="fa fa-check"></i>dcast()</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#melt"><i class="fa fa-check"></i>melt()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#соотношение-list-и-в-операциях-над-колонками."><i class="fa fa-check"></i>Соотношение list() и <code>:=</code> в операциях над колонками.</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#домашнее-задание-5"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-1-iatytd-1"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-2-hntr-1"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-3-hmp-2"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-4-uv-2"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-5-n-1"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html"><i class="fa fa-check"></i>dt + ETL</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#запись-занятия-5"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#разбор-домашней-работы-3"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-3-hmp-3"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-4-uv-3"><i class="fa fa-check"></i>level 4 (UV)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#etl"><i class="fa fa-check"></i>ETL</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#чтение-и-запись-текстовых-файлов"><i class="fa fa-check"></i>Чтение и запись текстовых файлов</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#чтение-файлов-ms-excel"><i class="fa fa-check"></i>Чтение файлов MS Excel</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#чтение-файлов-spss"><i class="fa fa-check"></i>Чтение файлов SPSS</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#дополнительная-литература"><i class="fa fa-check"></i>Дополнительная литература</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#домашнее-задание-6"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-1-iatytd-2"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-2-hntr-2"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-3-hmp-4"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-4-uv-4"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-5-n-2"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i>Dataviz</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#запись-занятия-6"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#intro-1"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#инфографика"><i class="fa fa-check"></i>Инфографика</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#типы-графиков"><i class="fa fa-check"></i>Типы графиков</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#scatter-plot"><i class="fa fa-check"></i>scatter plot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#line-chart"><i class="fa fa-check"></i>line chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#bar-chart"><i class="fa fa-check"></i>bar chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#grouped-bar-chart"><i class="fa fa-check"></i>grouped bar chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#stacked-bar-chart"><i class="fa fa-check"></i>stacked bar chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#area-plot"><i class="fa fa-check"></i>area plot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#area-plot-percentiles"><i class="fa fa-check"></i>area plot (percentiles)</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#boxplot"><i class="fa fa-check"></i>boxplot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#violin-plot"><i class="fa fa-check"></i>violin plot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#heatmap"><i class="fa fa-check"></i>heatmap</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#geo-plots-leaflet-map"><i class="fa fa-check"></i>geo plots: leaflet map</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#d3-data-driven-documents"><i class="fa fa-check"></i>d3 (Data-Driven Documents)</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#dashboards"><i class="fa fa-check"></i>Dashboards</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#focuses"><i class="fa fa-check"></i>Focuses</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#data-looks-better-naked"><i class="fa fa-check"></i>Data looks better naked</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#the-data-ink-ratio"><i class="fa fa-check"></i>the data-ink ratio</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#clear-off-the-table"><i class="fa fa-check"></i>clear-off-the-table</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#principles"><i class="fa fa-check"></i>Principles</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#misleading-charts"><i class="fa fa-check"></i>Misleading charts</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#плохой-дизайн"><i class="fa fa-check"></i>Плохой дизайн</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#арифметические-ошибки"><i class="fa fa-check"></i>Арифметические ошибки</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#манипуляция-вниманием"><i class="fa fa-check"></i>Манипуляция вниманием</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#неверный-масштаб"><i class="fa fa-check"></i>Неверный масштаб</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#несоответствие-графиков-цифрам"><i class="fa fa-check"></i>Несоответствие графиков цифрам</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#полезные-материалы"><i class="fa fa-check"></i>Полезные материалы</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html"><i class="fa fa-check"></i>ggplot2 pt1</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#запись-занятий"><i class="fa fa-check"></i>Запись занятий</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#решение-домашней-работы"><i class="fa fa-check"></i>Решение домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#level-1-iatytd-3"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#level-2-hntr-3"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#level-3-hmp-5"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#ggplot2-package"><i class="fa fa-check"></i>ggplot2 package</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#компоненты-графика"><i class="fa fa-check"></i>Компоненты графика</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#базовые-геомы"><i class="fa fa-check"></i>Базовые геомы</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#геомы-визуальных-акцентов"><i class="fa fa-check"></i>геомы визуальных акцентов</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#дополнительные-материалы-2"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#домашнее-задание-7"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-1"><i class="fa fa-check"></i>Задание 1</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-2"><i class="fa fa-check"></i>Задание 2</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-3"><i class="fa fa-check"></i>Задание 3</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-4"><i class="fa fa-check"></i>Задание 4</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-5"><i class="fa fa-check"></i>Задание 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html"><i class="fa fa-check"></i>ggplot2 pt2</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#запись-занятий-1"><i class="fa fa-check"></i>Запись занятий</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#решение-домашки"><i class="fa fa-check"></i>Решение домашки</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#пакеты-и-данные"><i class="fa fa-check"></i>пакеты и данные</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#статистические-геомы"><i class="fa fa-check"></i>Статистические геомы</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_bar"><i class="fa fa-check"></i>geom_bar()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_histogram"><i class="fa fa-check"></i>geom_histogram()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_boxplot"><i class="fa fa-check"></i>geom_boxplot()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_smooth"><i class="fa fa-check"></i>geom_smooth()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#кастомизация-графиков"><i class="fa fa-check"></i>Кастомизация графиков</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#параметры-осей"><i class="fa fa-check"></i>Параметры осей</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#lims"><i class="fa fa-check"></i>lims()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#labs"><i class="fa fa-check"></i>labs()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#координатная-плоскость"><i class="fa fa-check"></i>Координатная плоскость</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#фасеты"><i class="fa fa-check"></i>Фасеты</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#визуальные-параметры-всего-графика"><i class="fa fa-check"></i>Визуальные параметры всего графика</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html"><i class="fa fa-check"></i>plotly</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#запись-занятия-7"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#пакеты-и-данные-1"><i class="fa fa-check"></i>Пакеты и данные</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#компоненты-графика-plotly"><i class="fa fa-check"></i>Компоненты графика plotly</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#данные-и-оси"><i class="fa fa-check"></i>Данные и оси</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#типы-графиков-1"><i class="fa fa-check"></i>Типы графиков</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#точечный-и-линейный-графики"><i class="fa fa-check"></i>Точечный и линейный графики</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#столбиковые-диаграммы"><i class="fa fa-check"></i>Столбиковые диаграммы</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#боксплоты"><i class="fa fa-check"></i>Боксплоты</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#группировка"><i class="fa fa-check"></i>Группировка</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#визуальные-параметры-графиков"><i class="fa fa-check"></i>Визуальные параметры графиков</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#легенда"><i class="fa fa-check"></i>Легенда</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#параметры-линий-и-точек"><i class="fa fa-check"></i>Параметры линий и точек</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#ховеры"><i class="fa fa-check"></i>Ховеры</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#добавляемые-слои"><i class="fa fa-check"></i>Добавляемые слои</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#наследование-параметров"><i class="fa fa-check"></i>Наследование параметров</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#общие-параметры-графиков"><i class="fa fa-check"></i>Общие параметры графиков</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#заголовок"><i class="fa fa-check"></i>Заголовок</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#параметры-осей-1"><i class="fa fa-check"></i>Параметры осей</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#совмещенные-графики"><i class="fa fa-check"></i>Совмещенные графики</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html"><i class="fa fa-check"></i>Web-скрапинг</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#запись-занятия-8"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#html-интро"><i class="fa fa-check"></i>HTML интро</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#web-сервер"><i class="fa fa-check"></i>Web-сервер</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#структура-html-страницы"><i class="fa fa-check"></i>Структура html-страницы</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#css"><i class="fa fa-check"></i>css</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#rvest"><i class="fa fa-check"></i>rvest</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#общая-последовательность"><i class="fa fa-check"></i>Общая последовательность</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#импорт-страницы"><i class="fa fa-check"></i>импорт страницы</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#выбор-узлов-и-их-значений"><i class="fa fa-check"></i>Выбор узлов и их значений</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#навигация-по-дереву-тегов"><i class="fa fa-check"></i>Навигация по дереву тегов</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#циклы"><i class="fa fa-check"></i>Циклы</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#for"><i class="fa fa-check"></i>for</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#while-advanced"><i class="fa fa-check"></i>while (Advanced)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#repeat-advanced"><i class="fa fa-check"></i>repeat (Advanced)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#прерывание-циклов-advanced"><i class="fa fa-check"></i>Прерывание циклов (Advanced)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#eval-pply"><i class="fa fa-check"></i>Неявные циклы, семейство *pply</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#скрапинг-сайта-журнала"><i class="fa fa-check"></i>Скрапинг сайта журнала</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#получение-информации-о-статье-и-авторе"><i class="fa fa-check"></i>Получение информации о статье и авторе</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#получение-списка-ссылок-с-страницы-рубрики"><i class="fa fa-check"></i>Получение списка ссылок с страницы рубрики</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#дополнительные-материалы-3"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#домашнее-задание-8"><i class="fa fa-check"></i>Домашнее задание</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-1-iatytd-4"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-2-hntr-4"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-3-hmp-6"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-4-uv-5"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-5-n-3"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Автоматизированный сбор больших данных в экономико-социологических исследованиях</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="web-скрапинг" class="section level1 unnumbered hasAnchor">
<h1>Web-скрапинг<a href="web-скрапинг.html#web-скрапинг" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="запись-занятия-8" class="section level2 unnumbered hasAnchor">
<h2>Запись занятия<a href="web-скрапинг.html#запись-занятия-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/rKZm_RoFJM8?si=2w9TiErvbQJJEyXz" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
</iframe>
</div>
<div id="html-интро" class="section level2 unnumbered hasAnchor">
<h2>HTML интро<a href="web-скрапинг.html#html-интро" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="web-сервер" class="section level3 unnumbered hasAnchor">
<h3>Web-сервер<a href="web-скрапинг.html#web-сервер" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>При попытке открыть каrую-нибудь html-страницу (сайт) происходит запрос к web-серверу, на котором размещена эта страница. Если не возникает ошибок, то сервер возвращает сообщение с кодом страницы (html + javascript). Соответственно, когда браузер получает сообщение, он обрабатывает и выполняет код, “отрисовывает страницу” для пользователя. Инструменты скрапинга (rvest, в частности), аналогично запрашивают web-сервер, однако результат не отрисовывают, а хранят в виде объекта в памяти.</p>
<p><br></p>
</div>
<div id="структура-html-страницы" class="section level3 unnumbered hasAnchor">
<h3>Структура html-страницы<a href="web-скрапинг.html#структура-html-страницы" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Все страницы сайтов - это текст, форматированный с помощью языка разметки html. Это значит, что все элементы страницы - тексты, картинки, гиперссылки, заголовки и проч. имеют свою метку, иначе говоря, тэг. Тэги - ключевые слова, обернутые в угловые скобки <code>&lt;tag_name&gt;</code>. Тэги всегда представлены в паре открывающий (<code>&lt;tag_name&gt;</code>) и закрывающий тэги (<code>&lt;/tag_name&gt;</code>). Между ними как раз и размещается материал страницы - текст, картинка и проч.</p>
<p>Стандартная html-страница имеет вид иерархического дерева тэгов, где корневой тэг - <code>html</code>. Ниже дан простейший пример кода страницы,в которой есть заголовок и список. Список формируется из общего тэга <code>&lt;ol&gt;&lt;/ol&gt;</code> (ordered list) и элементов списка внутри тэга, каждый в собственной парке тэгов <code>&lt;li&gt;&lt;/li&gt;</code>.</p>
<p>У тэгов есть атрибуты - как правило, это либо дополнительная информация (адрес гиперссылки, адрес картинки), либо класс, который используется в таблицах стилей, чтобы к разным тегам применять разные визуальные эффекты (о таблице стилей ниже). Например, чтобы текст во всех тэгах с классом <code>my_class</code> был синего, а с классом <code>my_class2</code> - зеленым. Атрибуты тэгов пишутся сразу после названия открывающего тэга, в угловых скобках: <code>&lt;div class="my_class1"&gt;&lt;/div&gt;</code>.</p>
<p>Пример кода страницы:</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb432-1"><a href="web-скрапинг.html#cb432-1" tabindex="-1"></a><span class="op">&lt;!</span>DOCTYPE HTML<span class="op">&gt;</span></span>
<span id="cb432-2"><a href="web-скрапинг.html#cb432-2" tabindex="-1"></a><span class="op">&lt;</span>html<span class="op">&gt;</span></span>
<span id="cb432-3"><a href="web-скрапинг.html#cb432-3" tabindex="-1"></a>  <span class="op">&lt;</span>head<span class="op">&gt;</span></span>
<span id="cb432-4"><a href="web-скрапинг.html#cb432-4" tabindex="-1"></a>    <span class="op">&lt;</span>link rel<span class="op">=</span><span class="st">&quot;stylesheet&quot;</span> href<span class="op">=</span><span class="st">&quot;./data/my_css.css&quot;</span><span class="op">&gt;</span></span>
<span id="cb432-5"><a href="web-скрапинг.html#cb432-5" tabindex="-1"></a>  <span class="op">&lt;/</span>head<span class="op">&gt;</span>  </span>
<span id="cb432-6"><a href="web-скрапинг.html#cb432-6" tabindex="-1"></a>  <span class="op">&lt;</span>body<span class="op">&gt;</span></span>
<span id="cb432-7"><a href="web-скрапинг.html#cb432-7" tabindex="-1"></a>    <span class="op">&lt;</span>h2<span class="op">&gt;</span>Правда о лосях<span class="op">&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb432-8"><a href="web-скрапинг.html#cb432-8" tabindex="-1"></a>    <span class="op">&lt;</span>ol<span class="op">&gt;</span></span>
<span id="cb432-9"><a href="web-скрапинг.html#cb432-9" tabindex="-1"></a>      <span class="op">&lt;</span>li style<span class="op">=</span><span class="st">&#39;color:red&#39;</span><span class="op">&gt;</span>Лось — животное хитрое<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb432-10"><a href="web-скрапинг.html#cb432-10" tabindex="-1"></a>      <span class="op">&lt;</span>li <span class="kw">class</span><span class="op">=</span><span class="st">&#39;my_class&#39;</span><span class="op">&gt;...</span>и коварное<span class="op">!&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb432-11"><a href="web-скрапинг.html#cb432-11" tabindex="-1"></a>      <span class="op">&lt;</span>li <span class="kw">class</span><span class="op">=</span><span class="st">&#39;my_class2&#39;</span><span class="op">&gt;</span>а вот <span class="op">&lt;</span>a href<span class="op">=</span><span class="st">&quot;https://ru.wikipedia.org/wiki/%D0%9B%D0%BE%D1%81%D0%B8&quot;</span><span class="op">&gt;</span>ссылка<span class="op">&lt;/</span>a<span class="op">&gt;</span> на страницу в вики<span class="op">&lt;/</span>li<span class="op">&gt;</span></span>
<span id="cb432-12"><a href="web-скрапинг.html#cb432-12" tabindex="-1"></a>    <span class="op">&lt;/</span>ol<span class="op">&gt;</span></span>
<span id="cb432-13"><a href="web-скрапинг.html#cb432-13" tabindex="-1"></a>    <span class="op">&lt;</span>h2<span class="op">&gt;</span>Второй заголовок уровня h2<span class="op">&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb432-14"><a href="web-скрапинг.html#cb432-14" tabindex="-1"></a>    <span class="op">&lt;</span>p <span class="kw">class</span><span class="op">=</span><span class="st">&#39;my_class&#39;</span><span class="op">&gt;</span></span>
<span id="cb432-15"><a href="web-скрапинг.html#cb432-15" tabindex="-1"></a>      Ло́с] (лат<span class="op">.</span> <span class="at">Alces</span>) — род парнокопытных млекопитающих<span class="op">,</span> самые крупные представители семейства оленевх]<span class="op">.</span> <span class="at">Включает</span> <span class="dv">2</span> вида<span class="op">:</span> европейский <span class="fu">лось</span> (лат<span class="op">.</span> <span class="at">Alces</span> alces) и американский <span class="fu">лось</span> (лат<span class="op">.</span> <span class="at">Alces</span> americanus)<span class="op">,</span> которые имеют разное число <span class="fu">хромосом</span> (<span class="dv">68</span> и <span class="dv">70</span><span class="op">,</span> соответственно)<span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb432-16"><a href="web-скрапинг.html#cb432-16" tabindex="-1"></a>    <span class="op">&lt;</span>h2<span class="op">&gt;</span>а это просто пример таблицы<span class="op">&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb432-17"><a href="web-скрапинг.html#cb432-17" tabindex="-1"></a>      <span class="op">&lt;</span>table<span class="op">&gt;</span></span>
<span id="cb432-18"><a href="web-скрапинг.html#cb432-18" tabindex="-1"></a>        <span class="op">&lt;</span>tr<span class="op">&gt;</span></span>
<span id="cb432-19"><a href="web-скрапинг.html#cb432-19" tabindex="-1"></a>          <span class="op">&lt;</span>th<span class="op">&gt;</span>cell<span class="op">&lt;/</span>th<span class="op">&gt;</span></span>
<span id="cb432-20"><a href="web-скрапинг.html#cb432-20" tabindex="-1"></a>          <span class="op">&lt;</span>th<span class="op">&gt;</span>colour<span class="op">&lt;/</span>th<span class="op">&gt;</span></span>
<span id="cb432-21"><a href="web-скрапинг.html#cb432-21" tabindex="-1"></a>        <span class="op">&lt;/</span>tr<span class="op">&gt;</span></span>
<span id="cb432-22"><a href="web-скрапинг.html#cb432-22" tabindex="-1"></a>        <span class="op">&lt;</span>tr<span class="op">&gt;</span></span>
<span id="cb432-23"><a href="web-скрапинг.html#cb432-23" tabindex="-1"></a>          <span class="op">&lt;</span>td<span class="op">&gt;</span><span class="dv">1</span><span class="er">st</span><span class="op">&lt;/</span>td<span class="op">&gt;</span></span>
<span id="cb432-24"><a href="web-скрапинг.html#cb432-24" tabindex="-1"></a>          <span class="op">&lt;</span>td<span class="op">&gt;</span>white<span class="op">&lt;/</span>td<span class="op">&gt;</span></span>
<span id="cb432-25"><a href="web-скрапинг.html#cb432-25" tabindex="-1"></a>        <span class="op">&lt;/</span>tr<span class="op">&gt;</span></span>
<span id="cb432-26"><a href="web-скрапинг.html#cb432-26" tabindex="-1"></a>        <span class="op">&lt;</span>tr<span class="op">&gt;&lt;</span>td<span class="op">&gt;</span><span class="dv">2</span>nd<span class="op">&lt;/</span>td<span class="op">&gt;&lt;</span>td<span class="op">&gt;</span>red<span class="op">&lt;/</span>td<span class="op">&gt;&lt;/</span>tr<span class="op">&gt;</span></span>
<span id="cb432-27"><a href="web-скрапинг.html#cb432-27" tabindex="-1"></a>        <span class="op">&lt;</span>tr<span class="op">&gt;&lt;</span>td<span class="op">&gt;</span><span class="dv">3</span><span class="er">rd</span><span class="op">&lt;/</span>td<span class="op">&gt;&lt;</span>td<span class="op">&gt;</span>black<span class="op">&lt;/</span>td<span class="op">&gt;&lt;/</span>tr<span class="op">&gt;</span></span>
<span id="cb432-28"><a href="web-скрапинг.html#cb432-28" tabindex="-1"></a>        <span class="op">&lt;</span>tr<span class="op">&gt;&lt;</span>td<span class="op">&gt;</span><span class="dv">4</span><span class="er">th</span><span class="op">&lt;/</span>td<span class="op">&gt;&lt;</span>td <span class="kw">class</span><span class="op">=</span><span class="st">&quot;my_class2&quot;</span><span class="op">&gt;</span>green<span class="op">&lt;/</span>td<span class="op">&gt;&lt;/</span>tr<span class="op">&gt;</span></span>
<span id="cb432-29"><a href="web-скрапинг.html#cb432-29" tabindex="-1"></a>      <span class="op">&lt;/</span>table<span class="op">&gt;</span></span>
<span id="cb432-30"><a href="web-скрапинг.html#cb432-30" tabindex="-1"></a>  <span class="op">&lt;/</span>body<span class="op">&gt;</span></span>
<span id="cb432-31"><a href="web-скрапинг.html#cb432-31" tabindex="-1"></a><span class="op">&lt;/</span>html<span class="op">&gt;</span></span></code></pre></div>
<p>Вот так выглядит эта страница в том виде, как ее присылает веб-сервер:</p>
<pre><code>&lt;pre&gt;&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;./data/my_css.css&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;Правда о лосях&lt;/h2&gt;&lt;ol&gt;&lt;li style=&#39;color:red&#39;&gt;Лось — животное хитрое&lt;/li&gt;&lt;li class=&#39;my_class&#39;&gt;...и коварное!&lt;/li&gt;&lt;li class=&#39;my_class2&#39;&gt;а вот &lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%9B%D0%BE%D1%81%D0%B8&quot;&gt;ссылка&lt;/a&gt; на страницу в вики&lt;/li&gt;&lt;/ol&gt;&lt;h2&gt;Второй заголовок уровня h2&lt;/h2&gt;&lt;p class=&#39;my_class&#39;&gt;Ло́с] (лат. Alces) — род парнокопытных млекопитающих, самые крупные представители семейства оленевх]. Включает 2 вида: европейский лось (лат. Alces alces) и американский лось (лат. Alces americanus), которые имеют разное число хромосом (68 и 70, соответственно)&lt;/p&gt;&lt;h2&gt;а это просто пример таблицы&lt;/h2&gt;&lt;table&gt;&lt;tr&gt;&lt;th&gt;cell&lt;/th&gt;&lt;th&gt;colour&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1st&lt;/td&gt;&lt;td&gt;white&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;2nd&lt;/td&gt;&lt;td&gt;red&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;3rd&lt;/td&gt;&lt;td&gt;black&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;4th&lt;/td&gt;&lt;td class=&quot;my_class2&quot;&gt;green&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;&lt;/pre&gt;</code></pre>
Вот так выглядит эта страница в браузере:
<pre><!DOCTYPE HTML><html><head><link rel="stylesheet" href="./data/my_css.css"></head><body><h2>Правда о лосях</h2><ol><li style='color:red'>Лось — животное хитрое</li><li class='my_class'>...и коварное!</li><li class='my_class2'>а вот <a href="https://ru.wikipedia.org/wiki/%D0%9B%D0%BE%D1%81%D0%B8">ссылка</a> на страницу в вики</li></ol><h2>Второй заголовок уровня h2</h2><p class='my_class'>Ло́с] (лат. Alces) — род парнокопытных млекопитающих, самые крупные представители семейства оленевх]. Включает 2 вида: европейский лось (лат. Alces alces) и американский лось (лат. Alces americanus), которые имеют разное число хромосом (68 и 70, соответственно)</p><h2>а это просто пример таблицы</h2><table><tr><th>cell</th><th>colour</th></tr><tr><td>1st</td><td>white</td></tr><tr><td>2nd</td><td>red</td></tr><tr><td>3rd</td><td>black</td></tr><tr><td>4th</td><td class="my_class2">green</td></tr></table></body></html></pre>
</div>
<div id="css" class="section level3 unnumbered hasAnchor">
<h3>css<a href="web-скрапинг.html#css" class="anchor-section" aria-label="Anchor link to header"></a></h3>
Если посмотреть внимательно, то в разделе
<head>
</head>
<p>есть подключение css-файла. Это так называемый файл стилей, который позволяет задавать визуальные параметры содержимого тэга не в инлайн-атрибутах (например, <code>style='color:red'</code>), а отдельно. И, соответственно, применять эти стили в самым разным тэгам, при необходимости. В примере выше заголовки все желтого цвета, а параграф и элемент упорядоченного списка с <code>class="my_class"</code> – синего.</p>
<p>Заголовок h2 закомментирован, чтобы не покрасить выбранным цветом все h2-заголовки на странице (в том числе и заголовки конспекта).</p>
<p>Содержимое файла my_css.css:</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb434-1"><a href="web-скрапинг.html#cb434-1" tabindex="-1"></a><span class="op">.</span><span class="at">my_class</span> {</span>
<span id="cb434-2"><a href="web-скрапинг.html#cb434-2" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> blue<span class="op">;</span></span>
<span id="cb434-3"><a href="web-скрапинг.html#cb434-3" tabindex="-1"></a>  font<span class="op">-</span><span class="dt">size</span><span class="op">:</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb434-4"><a href="web-скрапинг.html#cb434-4" tabindex="-1"></a>}</span>
<span id="cb434-5"><a href="web-скрапинг.html#cb434-5" tabindex="-1"></a></span>
<span id="cb434-6"><a href="web-скрапинг.html#cb434-6" tabindex="-1"></a><span class="op">.</span><span class="at">my_class2</span> {</span>
<span id="cb434-7"><a href="web-скрапинг.html#cb434-7" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> green<span class="op">;</span></span>
<span id="cb434-8"><a href="web-скрапинг.html#cb434-8" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="rvest" class="section level2 unnumbered hasAnchor">
<h2>rvest<a href="web-скрапинг.html#rvest" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="общая-последовательность" class="section level3 unnumbered hasAnchor">
<h3>Общая последовательность<a href="web-скрапинг.html#общая-последовательность" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Последовательность действий при скрапинге данных с помощью <code>rvest</code> такова:</p>
<ul>
<li><p>с помощью функции <code>read_html()</code> в рабочее окружение импортируется заданая страница (web-адрес) или XML-документ</p></li>
<li><p>визуально по структуре или визуально в средствах web-разработчика (в частности, SelectorGadget и нативные инструменты браузеров для web-разрботчиков), а так же функциями <code>html_children()</code>, <code>html_attrs()</code> анализируется структура дерева элементов документа (тэгов и атрибутов)</p></li>
<li><p>с помощью функций <code>html_element()</code> и <code>html_elements()</code> указывается, какой элемент (элементы) структуры необходимо выбрать</p></li>
<li><p>из выбранного элемента с помощью функций <code>html_text()</code>, <code>html_table</code> и <code>html_attr()</code> извлекаются значения</p></li>
<li><p>при необходмости во время сбора данных с html-страниц процесс масштабируется на прочие схожие разделы сайта или осуществляется в регулярном формате (краулинг)</p></li>
</ul>
<p><br></p>
</div>
<div id="импорт-страницы" class="section level3 unnumbered hasAnchor">
<h3>импорт страницы<a href="web-скрапинг.html#импорт-страницы" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Установка и подключение пакета стандартные. На *nix/MacOS-системах могут потребоваться дополнительные библиотеки. Для импорта таблицы требуется <code>read_html()</code>, при импорте может быть необходимо указать кодировку.</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="web-скрапинг.html#cb435-1" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb435-2"><a href="web-скрапинг.html#cb435-2" tabindex="-1"></a><span class="co"># install.packages(&#39;rvest&#39;)</span></span>
<span id="cb435-3"><a href="web-скрапинг.html#cb435-3" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb435-4"><a href="web-скрапинг.html#cb435-4" tabindex="-1"></a></span>
<span id="cb435-5"><a href="web-скрапинг.html#cb435-5" tabindex="-1"></a></span>
<span id="cb435-6"><a href="web-скрапинг.html#cb435-6" tabindex="-1"></a><span class="co"># импорт страницы</span></span>
<span id="cb435-7"><a href="web-скрапинг.html#cb435-7" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&#39;./data/tmp.html&#39;</span>, <span class="at">encoding =</span> <span class="st">&#39;UTF-8&#39;</span>)</span></code></pre></div>
<p><br></p>
</div>
<div id="выбор-узлов-и-их-значений" class="section level3 unnumbered hasAnchor">
<h3>Выбор узлов и их значений<a href="web-скрапинг.html#выбор-узлов-и-их-значений" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Для того, чтобы извлечь значение из какого-то тэга, необходимо указать путь к этому тэгу в дереве тэгов страницы. Выбор тэгов осуществляется с помощью функции <code>html_element()</code>, где первым аргументом указывают импортированную страницу, а в аргументе <code>xpath</code> - путь к тэгу на языке XPath.</p>
<p>В тэгах может быть разная информация - текст или таблица, в некоторых случаях важно не содержание тэга, а его атрибут. После того, как выделяется из дерева тэг, необходимо извлечь его содержание. Это делается с помощью функций:</p>
<ul>
<li><code>html_text()</code> если в тэге хранится текстовое значение. По сути, используется всегда, когда в тэге не табличка и не картинка.</li>
</ul>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="web-скрапинг.html#cb436-1" tabindex="-1"></a><span class="co"># извлекаем текстовое значение - заголовок</span></span>
<span id="cb436-2"><a href="web-скрапинг.html#cb436-2" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//h2&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb436-3"><a href="web-скрапинг.html#cb436-3" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Правда о лосях&quot;</code></pre>
<p><br>
- <code>html_table()</code> если в тэге хранится таблица (<code>&lt;table&gt;</code>).</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="web-скрапинг.html#cb438-1" tabindex="-1"></a><span class="co"># извлекаем таблицу</span></span>
<span id="cb438-2"><a href="web-скрапинг.html#cb438-2" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//table&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb438-3"><a href="web-скрапинг.html#cb438-3" tabindex="-1"></a>  <span class="fu">html_table</span>()</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   cell  colour
##   &lt;chr&gt; &lt;chr&gt; 
## 1 1st   white 
## 2 2nd   red   
## 3 3rd   black 
## 4 4th   green</code></pre>
<p><br>
- <code>html_attr('attr_name')</code> - используется для случаев, когда надо извлечь атрибут тэга. Атрибуты тэга можно узнать, применив к выделенному с помощью <code>html_element()</code> тэгу функцию <code>html_attrs()</code>.</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="web-скрапинг.html#cb440-1" tabindex="-1"></a><span class="co"># смотрим атрибуты тэга &lt;a&gt;</span></span>
<span id="cb440-2"><a href="web-скрапинг.html#cb440-2" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//a&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb440-3"><a href="web-скрапинг.html#cb440-3" tabindex="-1"></a>  <span class="fu">html_attrs</span>()</span></code></pre></div>
<pre><code>##                                                     href 
## &quot;https://ru.wikipedia.org/wiki/%D0%9B%D0%BE%D1%81%D0%B8&quot;</code></pre>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="web-скрапинг.html#cb442-1" tabindex="-1"></a><span class="co"># извлекаем значение атрибута href</span></span>
<span id="cb442-2"><a href="web-скрапинг.html#cb442-2" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//a&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb442-3"><a href="web-скрапинг.html#cb442-3" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&#39;href&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;https://ru.wikipedia.org/wiki/%D0%9B%D0%BE%D1%81%D0%B8&quot;</code></pre>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="web-скрапинг.html#cb444-1" tabindex="-1"></a><span class="co"># извлекаем не атрибут, а значение тэга, </span></span>
<span id="cb444-2"><a href="web-скрапинг.html#cb444-2" tabindex="-1"></a><span class="co"># то есть, каким текстом видит эту ссылку пользователь</span></span>
<span id="cb444-3"><a href="web-скрапинг.html#cb444-3" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//a&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb444-4"><a href="web-скрапинг.html#cb444-4" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;ссылка&quot;</code></pre>
<p><br></p>
</div>
</div>
<div id="навигация-по-дереву-тегов" class="section level2 unnumbered hasAnchor">
<h2>Навигация по дереву тегов<a href="web-скрапинг.html#навигация-по-дереву-тегов" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ключевые элементы языка XPath:</p>
<ul>
<li><p><code>%tag_name%</code>: название тэга <code>%tag_name%</code></p></li>
<li><p><code>/</code>: Иcпользуется для указания прямого пути к элементу от корневого/родительского тега. Если весь xpath-путь начинается с <code>/</code>, то это абсолютный путь от корня дерева. Вот так можно выбрать тэг (ноду, узел) заголовка страницы.</p></li>
</ul>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="web-скрапинг.html#cb446-1" tabindex="-1"></a><span class="co"># длинный путь, от корня через все поколения родителей к тэгу h2</span></span>
<span id="cb446-2"><a href="web-скрапинг.html#cb446-2" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;/html/body/h2&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb446-3"><a href="web-скрапинг.html#cb446-3" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Правда о лосях&quot;</code></pre>
<ul>
<li><code>//</code>: Выбирает теги независимо от места их расположения, при этом может использоваться как в начале пути, так и в середине:</li>
</ul>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="web-скрапинг.html#cb448-1" tabindex="-1"></a><span class="co"># короткий путь, &quot;пропусти все до первого тэга h2&quot;</span></span>
<span id="cb448-2"><a href="web-скрапинг.html#cb448-2" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//h2&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb448-3"><a href="web-скрапинг.html#cb448-3" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Правда о лосях&quot;</code></pre>
<ul>
<li><code>@</code>: выбор атрибута узла. Если необходимо использовать атрибут тэга в пути, то атрибут указывается как <code>@attr_name</code>. Если указать путь к атрибуту тэга с использованием <code>@</code>, то можно не использовать функцию <code>html_attr()</code>, а обойтись общей <code>html_text()</code>:</li>
</ul>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="web-скрапинг.html#cb450-1" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//a/@href&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb450-2"><a href="web-скрапинг.html#cb450-2" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;https://ru.wikipedia.org/wiki/%D0%9B%D0%BE%D1%81%D0%B8&quot;</code></pre>
<ul>
<li><code>[x]</code>: фильтрация тэга с помощью номера места в списке тэгов-сиблингов (на одном уровне в иерархии) или по наличию какого-либо атрибута. В целом, очень похоже на фильтрацию таблиц по номеру строки или логическому условию.</li>
</ul>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="web-скрапинг.html#cb452-1" tabindex="-1"></a><span class="do">### выбираем по номеру тэга в списке </span></span>
<span id="cb452-2"><a href="web-скрапинг.html#cb452-2" tabindex="-1"></a><span class="co"># первый заголовок h2</span></span>
<span id="cb452-3"><a href="web-скрапинг.html#cb452-3" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//h2[1]&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb452-4"><a href="web-скрапинг.html#cb452-4" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Правда о лосях&quot;</code></pre>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="web-скрапинг.html#cb454-1" tabindex="-1"></a><span class="co"># третий заголовок h3</span></span>
<span id="cb454-2"><a href="web-скрапинг.html#cb454-2" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//h2[3]&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb454-3"><a href="web-скрапинг.html#cb454-3" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;а это просто пример таблицы&quot;</code></pre>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="web-скрапинг.html#cb456-1" tabindex="-1"></a><span class="do">### выбираем по содержанию определенного атрибута</span></span>
<span id="cb456-2"><a href="web-скрапинг.html#cb456-2" tabindex="-1"></a><span class="co"># выбираем значение тэга &lt;p&gt;, у которого есть атрибут класса class=&quot;my_class&quot;</span></span>
<span id="cb456-3"><a href="web-скрапинг.html#cb456-3" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//p[@class=&quot;my_class&quot;]&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb456-4"><a href="web-скрапинг.html#cb456-4" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;\n      Ло́с] (лат. Alces) — род парнокопытных млекопитающих, самые крупные представители семейства оленевх]. Включает 2 вида: европейский лось (лат. Alces alces) и американский лось (лат. Alces americanus), которые имеют разное число хромосом (68 и 70, соответственно)&quot;</code></pre>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="web-скрапинг.html#cb458-1" tabindex="-1"></a><span class="co"># выбираем значение тэга &lt;p&gt;, у которого есть атрибут класса class=&quot;my_class&quot;</span></span>
<span id="cb458-2"><a href="web-скрапинг.html#cb458-2" tabindex="-1"></a><span class="co"># и используем html_text2(), чтобы убрать нечитаемые символы</span></span>
<span id="cb458-3"><a href="web-скрапинг.html#cb458-3" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//p[@class=&quot;my_class&quot;]&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb458-4"><a href="web-скрапинг.html#cb458-4" tabindex="-1"></a>  <span class="fu">html_text2</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Ло́с] (лат. Alces) — род парнокопытных млекопитающих, самые крупные представители семейства оленевх]. Включает 2 вида: европейский лось (лат. Alces alces) и американский лось (лат. Alces americanus), которые имеют разное число хромосом (68 и 70, соответственно)&quot;</code></pre>
<ul>
<li><code>*</code>: знак подстановки, “на этом месте может быть что угодно” - используется, когда надо пропустить какой-то длинный кусок дерева тэгов, или точно неизвестно, какой тэг или атрибут используется:</li>
</ul>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="web-скрапинг.html#cb460-1" tabindex="-1"></a><span class="co"># не знаем тэг, знаем атрибут класс, вместо тэга пишем *</span></span>
<span id="cb460-2"><a href="web-скрапинг.html#cb460-2" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//*[@class=&quot;my_class&quot;]&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb460-3"><a href="web-скрапинг.html#cb460-3" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;...и коварное!&quot;</code></pre>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="web-скрапинг.html#cb462-1" tabindex="-1"></a><span class="co"># знаем тэг, но не знаем, какой атрибут со значением &quot;my_class&quot;</span></span>
<span id="cb462-2"><a href="web-скрапинг.html#cb462-2" tabindex="-1"></a><span class="fu">html_element</span>(url, <span class="at">xpath =</span> <span class="st">&#39;//p[@*=&quot;my_class&quot;]&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb462-3"><a href="web-скрапинг.html#cb462-3" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code></pre></div>
<pre><code>## [1] &quot;\n      Ло́с] (лат. Alces) — род парнокопытных млекопитающих, самые крупные представители семейства оленевх]. Включает 2 вида: европейский лось (лат. Alces alces) и американский лось (лат. Alces americanus), которые имеют разное число хромосом (68 и 70, соответственно)&quot;</code></pre>
</div>
<div id="циклы" class="section level2 unnumbered hasAnchor">
<h2>Циклы<a href="web-скрапинг.html#циклы" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Наряду с условными операторами, циклы в R аналогичны циклы в других языках программирования. Три основных вида циклов - <code>for</code>, <code>while</code> и <code>repeat</code>. Циклы задаются с помощью оператора цикла, последовательности или условия, ограничивающих работу цикла и, собственно, выполняемого выражения. Если это одна строка, то выражение можно не заключать в фигурные скобки, во всех прочих случаях фигурные скобки необходимы.</p>
<p>Циклы традиционно редко используются в R, в немалой части это вызвано спецификой использования памяти во время выполнения выражений в цикле, точнее, не очень эффективным кодом. Для циклов существуют альтернативы - векторизованные вычисления и неявные циклы, а так же, собственно оптимизация кода путем преаллокации памяти или параллелизации.
<br></p>
<div id="for" class="section level3 unnumbered hasAnchor">
<h3>for<a href="web-скрапинг.html#for" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Цикл <code>for</code>, который используется чаще прочих, использует заданную последовательность, по которой и итерируется. Последовательностью может быть как численный ряд, так и строковый вектор, например, названий файлов при импорте и обработке большого количества файлов в одном цикле. После выполнения цикла используемый итератор имеет значение последнего элемента цикла. В том же случае, если последовательность нулевой длины, то цикл не отрабатывает.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="web-скрапинг.html#cb464-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]) {</span>
<span id="cb464-2"><a href="web-скрапинг.html#cb464-2" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&#39;letter&#39;</span>, i, <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)</span>
<span id="cb464-3"><a href="web-скрапинг.html#cb464-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## letter a 
## letter b 
## letter c</code></pre>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="web-скрапинг.html#cb466-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&#39;i =&#39;</span>, i)</span></code></pre></div>
<pre><code>## i = c</code></pre>
<p><br></p>
</div>
<div id="while-advanced" class="section level3 unnumbered hasAnchor">
<h3>while (Advanced)<a href="web-скрапинг.html#while-advanced" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Циклы <code>while</code> и <code>repeat</code> используются намного реже. Если в цикле <code>for</code> количество циклов определяется длиной заданной последовательности, то в <code>while</code> количество циклов может быть бесконечным, до тех пор, пока поставленное условие будет верным.</p>
<p>Для цикла надо задать начальное значение счетчика циклов, задать условие для этого счетчика и не забыть дополнить тело цикла увеличением счетчика при каждой итерации. Либо же добавить любое другое изменение значения счетчика, которое может привести срабатыванию условия. Второй вариант цикла <code>while</code> - это сначала создать объект с логическим значением <code>TRUE</code> и его поставить у условие, а потом прописать в теле цикла, что при определенных условиях значение сменится на <code>FALSE</code>, что и приведет к остановке цикла.</p>
<p>Выведем первые три элемента вектора <code>letters</code> с помощью цикла <code>while</code>.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="web-скрапинг.html#cb468-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb468-2"><a href="web-скрапинг.html#cb468-2" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">4</span>) {</span>
<span id="cb468-3"><a href="web-скрапинг.html#cb468-3" tabindex="-1"></a>  my_l <span class="ot">&lt;-</span> letters[i]</span>
<span id="cb468-4"><a href="web-скрапинг.html#cb468-4" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&#39;letter&#39;</span>, my_l, <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)</span>
<span id="cb468-5"><a href="web-скрапинг.html#cb468-5" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb468-6"><a href="web-скрапинг.html#cb468-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## letter a 
## letter b 
## letter c</code></pre>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="web-скрапинг.html#cb470-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&#39;i =&#39;</span>, i)</span></code></pre></div>
<pre><code>## i = 4</code></pre>
<p>Как правило, <code>while</code> нужен тогда, когда надо подсчитать количество попыток до какого-то результата, либо же неизвестно, сколько попыток модет потребоваться. Самый показательный пример - сбор данных с POST-запросом, когда сервер может не отвечать, соединение может рваться, и так далее.
<br></p>
</div>
<div id="repeat-advanced" class="section level3 unnumbered hasAnchor">
<h3>repeat (Advanced)<a href="web-скрапинг.html#repeat-advanced" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Цикл <code>repeat</code> схож с циклом <code>while</code>, только он выполняется до тех пор, пока пока при выполнении выражения не будет достигнут желаемый результат и не будет вызвана команда прерывания цикла. На том же примере с буквами:</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="web-скрапинг.html#cb472-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb472-2"><a href="web-скрапинг.html#cb472-2" tabindex="-1"></a><span class="cf">repeat</span> {</span>
<span id="cb472-3"><a href="web-скрапинг.html#cb472-3" tabindex="-1"></a>    my_l <span class="ot">&lt;-</span> letters[i]</span>
<span id="cb472-4"><a href="web-скрапинг.html#cb472-4" tabindex="-1"></a>    <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">4</span>) {</span>
<span id="cb472-5"><a href="web-скрапинг.html#cb472-5" tabindex="-1"></a>      <span class="cf">break</span>()</span>
<span id="cb472-6"><a href="web-скрапинг.html#cb472-6" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb472-7"><a href="web-скрапинг.html#cb472-7" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&#39;letter&#39;</span>, my_l, <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)</span>
<span id="cb472-8"><a href="web-скрапинг.html#cb472-8" tabindex="-1"></a>      i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb472-9"><a href="web-скрапинг.html#cb472-9" tabindex="-1"></a>    }</span>
<span id="cb472-10"><a href="web-скрапинг.html#cb472-10" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## letter a 
## letter b 
## letter c</code></pre>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="web-скрапинг.html#cb474-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&#39;i =&#39;</span>, i)</span></code></pre></div>
<pre><code>## i = 4</code></pre>
<p><br></p>
</div>
<div id="прерывание-циклов-advanced" class="section level3 unnumbered hasAnchor">
<h3>Прерывание циклов (Advanced)<a href="web-скрапинг.html#прерывание-циклов-advanced" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>В какие-то моменты возникает необходимость прервать цикл или же пропустить последующеи действия и начать новую итерацию цикла. Для этих целей используют функции <code>break()</code> и <code>next()</code>. Выше в цикле <code>repeat</code> мы уже использовали <code>break()</code>, вот еще один пример цикла с прерыванием:</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="web-скрапинг.html#cb476-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]) {</span>
<span id="cb476-2"><a href="web-скрапинг.html#cb476-2" tabindex="-1"></a>  <span class="fu">cat</span>(i, <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)</span>
<span id="cb476-3"><a href="web-скрапинг.html#cb476-3" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="st">&#39;c&#39;</span>)</span>
<span id="cb476-4"><a href="web-скрапинг.html#cb476-4" tabindex="-1"></a>    <span class="cf">break</span>()</span>
<span id="cb476-5"><a href="web-скрапинг.html#cb476-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## a 
## b 
## c</code></pre>
<p>Эффективнее всего функции прерывания в вложенных циклах - если прервать выполнение вложенного цикла, то родительский цикл не будет прерван и продолжит итерироваться.
<br></p>
</div>
</div>
<div id="eval-pply" class="section level2 unnumbered hasAnchor">
<h2>Неявные циклы, семейство *pply<a href="web-скрапинг.html#eval-pply" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Циклами в их привычном большинству программистов виде в R пользуются не очень часто. Как правило, это ситуации, когда неизвестно количество возможных циклов или, наоборот, их ничтожное количество (несколько названий файлов). В большинстве же случаев пользуются так называемыми неявными циклами — функциями семейства *pply.</p>
<p>Самая распространённая и покрывающая большинство задач функция семейства — это <code>lapply()</code>. Первый аргумент функции — набор элементов, над которыми должно быть произведено какое-то действие. Буква <code>l</code> в названии маркирует, что функция обычно применяется к спискам (<code>l</code> = <code>list</code>), однако на практике используются и векторы, и списки и т. д. Фактически первый аргумент в функции <code>lapply()</code> схож с итератором в цикле <code>for</code>. Второй аргумент — это собственно функция, которая должна быть применена к элементам вектора/списка из первого аргумента.</p>
<p>В качестве результата работы функция <code>lapply()</code> возвращает список, где каждый элемент — результат применения указанной во втором аргументе функции к каждому элементу первого аргумента. В этом заключается одно из отличий от классических циклов, в которых тело цикла всего лишь повторяется определённое количество раз. То есть в классических циклах, в отличие от <code>lapply()</code>, нет возможности создать объект с результатами цикла, и надо изменять созданный за пределами цикла объект.</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="web-скрапинг.html#cb478-1" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, sqrt)</span>
<span id="cb478-2"><a href="web-скрапинг.html#cb478-2" tabindex="-1"></a><span class="fu">str</span>(res)</span></code></pre></div>
<pre><code>## List of 5
##  $ : num 1
##  $ : num 1.41
##  $ : num 1.73
##  $ : num 2
##  $ : num 2.24</code></pre>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="web-скрапинг.html#cb480-1" tabindex="-1"></a><span class="fu">unlist</span>(res)</span></code></pre></div>
<pre><code>## [1] 1.000000 1.414214 1.732051 2.000000 2.236068</code></pre>
<p>Если же у функции, используемой в <code>lapply()</code>, есть дополнительные аргументы, то они идут последующими аргументами, так как в списке аргументов <code>lapply()</code> заданы <code>...</code>, дополнительные аргументы.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="web-скрапинг.html#cb482-1" tabindex="-1"></a><span class="co"># создадим список из векторов</span></span>
<span id="cb482-2"><a href="web-скрапинг.html#cb482-2" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">el1 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), </span>
<span id="cb482-3"><a href="web-скрапинг.html#cb482-3" tabindex="-1"></a>                <span class="at">el2 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>))</span>
<span id="cb482-4"><a href="web-скрапинг.html#cb482-4" tabindex="-1"></a></span>
<span id="cb482-5"><a href="web-скрапинг.html#cb482-5" tabindex="-1"></a><span class="co"># вычислим среднее и укажем, что NA надо пропускать</span></span>
<span id="cb482-6"><a href="web-скрапинг.html#cb482-6" tabindex="-1"></a><span class="fu">lapply</span>(my_list, mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## $el1
## [1] 2.5
## 
## $el2
## [1] 2.333333</code></pre>
<p>Несмотря на определённую гибкость и возможность указывать аргументы функции, чаще всего в <code>lapply()</code> используются анонимные функции, в которые в качестве аргумента при выполнении передаётся значения объекта, переданного в первый аргумент (по которому осуществляется итерирование).</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="web-скрапинг.html#cb484-1" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="cf">function</span>(x) {</span>
<span id="cb484-2"><a href="web-скрапинг.html#cb484-2" tabindex="-1"></a>  z <span class="ot">&lt;-</span> x <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb484-3"><a href="web-скрапинг.html#cb484-3" tabindex="-1"></a>  z <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(z)</span>
<span id="cb484-4"><a href="web-скрапинг.html#cb484-4" tabindex="-1"></a>  z</span>
<span id="cb484-5"><a href="web-скрапинг.html#cb484-5" tabindex="-1"></a>})</span>
<span id="cb484-6"><a href="web-скрапинг.html#cb484-6" tabindex="-1"></a><span class="fu">str</span>(res)</span></code></pre></div>
<pre><code>## List of 5
##  $ : num 1.41
##  $ : num 2
##  $ : num 2.45
##  $ : num 2.83
##  $ : num 3.16</code></pre>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="web-скрапинг.html#cb486-1" tabindex="-1"></a><span class="fu">unlist</span>(res)</span></code></pre></div>
<pre><code>## [1] 1.414214 2.000000 2.449490 2.828427 3.162278</code></pre>
<p>Семейство *pply-функций достаточно велико, вот наиболее часто используемые функции (тут я ориентируюсь на <a href="https://r-analytics.blogspot.com/2012/11/r-apply.html"><em>список</em></a> С. Мастицкого):</p>
<ul>
<li><p><code>lapply()</code>: <code>l</code> в названии означает <code>list</code>, список. Используется в случаях, когда необходимо применить какую-либо функцию к каждому элементу списка и получить результат также в виде списка. На деле обычно служит более удобным аналогом цикла <code>for</code>.</p></li>
<li><p><code>sapply()</code>: <code>s</code> в названии означает <code>simplify</code>, упрощение. Работает как <code>lapply()</code>, только в результате отдаёт именованный вектор.</p></li>
<li><p><code>apply()</code>: используется в случаях, когда необходимо применить какую-либо функцию ко всем строкам или столбцам матрицы (или массивов большей размерности).</p></li>
<li><p><code>vapply()</code>: <code>v</code> в названии означает <code>velocity</code>, скорость. Аналогична <code>lapply()</code> и <code>sapply()</code>, однако в качестве ещё одного аргумента требует указать тип данных, которые должны быть получены в результате. Это несколько ускоряет работу функции, что и привело к такому названию.</p></li>
<li><p><code>mapply()</code>: <code>m</code> в названии означает <code>multivariate</code>, многомерный. Используется в случаях, когда необходимо поэлементно применить какую-либо функцию одновременно к нескольким объектам (например, получить сумму первых элементов векторов, затему сумму вторых элементов векторов и т. д.).</p></li>
<li><p><code>rapply()</code>: <code>r</code> в названии означает <code>recursively</code>, рекурсивно. Используется в случаях, когда необходимо применить какую-либо функцию к компонентам вложенного списка.</p></li>
</ul>
<p>В настоящее время желательно использовать аналоги *pply-функций базового пакета из пакет <code>purrr</code>. Они чуть удобнее и чуть требовательнее к данным. Этот материал за пределами курса, но освоить рекомендую.</p>
<p>Некоторые пакеты имеют свои реализации неявных циклов, например, <code>parallel::mcmapply()</code>, которая часто используется для параллелизации кода.</p>
</div>
<div id="скрапинг-сайта-журнала" class="section level2 hasAnchor">
<h2>Скрапинг сайта журнала<a href="web-скрапинг.html#скрапинг-сайта-журнала" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="получение-информации-о-статье-и-авторе" class="section level3 hasAnchor">
<h3>Получение информации о статье и авторе<a href="web-скрапинг.html#получение-информации-о-статье-и-авторе" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Анализируем дерево тэгов на странице статьи, и указываем xpath-пути для получения той или иной информации. Сразу все оборачиваем в табличный вид.</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="web-скрапинг.html#cb488-1" tabindex="-1"></a>page_url <span class="ot">&lt;-</span> <span class="st">&#39;https://ecsoc.hse.ru/2023-24-5/876469050.html&#39;</span></span>
<span id="cb488-2"><a href="web-скрапинг.html#cb488-2" tabindex="-1"></a>page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(page_url)</span>
<span id="cb488-3"><a href="web-скрапинг.html#cb488-3" tabindex="-1"></a>article_info <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb488-4"><a href="web-скрапинг.html#cb488-4" tabindex="-1"></a>  <span class="at">url =</span> page_url,</span>
<span id="cb488-5"><a href="web-скрапинг.html#cb488-5" tabindex="-1"></a>  <span class="at">autor =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//h3/i&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>(),</span>
<span id="cb488-6"><a href="web-скрапинг.html#cb488-6" tabindex="-1"></a>  <span class="at">title =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//h2[@class=&quot;article-header&quot;]&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>(),</span>
<span id="cb488-7"><a href="web-скрапинг.html#cb488-7" tabindex="-1"></a>  <span class="at">annotation =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;annot&quot;]&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb488-8"><a href="web-скрапинг.html#cb488-8" tabindex="-1"></a>  <span class="at">keywords =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;keywords&quot;]&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb488-9"><a href="web-скрапинг.html#cb488-9" tabindex="-1"></a>  <span class="at">doi =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;keywords&quot;][2]&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb488-10"><a href="web-скрапинг.html#cb488-10" tabindex="-1"></a>  <span class="at">volume =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;centercolumn&quot;]/div&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>()</span>
<span id="cb488-11"><a href="web-скрапинг.html#cb488-11" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="получение-списка-ссылок-с-страницы-рубрики" class="section level2 hasAnchor">
<h2>Получение списка ссылок с страницы рубрики<a href="web-скрапинг.html#получение-списка-ссылок-с-страницы-рубрики" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Мы видим, что на странице статьей рубрики дано до 10 ссылок на статьи, всего таких страниц более 15. Внимательный анализ DOM-дерева тэгов позволяет нам считать, что все ссылки находятся в интервале 3-12 div-тэги.</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="web-скрапинг.html#cb489-1" tabindex="-1"></a><span class="co"># страница рубрики</span></span>
<span id="cb489-2"><a href="web-скрапинг.html#cb489-2" tabindex="-1"></a>rubric_url <span class="ot">&lt;-</span> <span class="st">&#39;https://ecsoc.hse.ru/rubric/26590246.html&#39;</span></span>
<span id="cb489-3"><a href="web-скрапинг.html#cb489-3" tabindex="-1"></a>rubric_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(rubric_url)</span>
<span id="cb489-4"><a href="web-скрапинг.html#cb489-4" tabindex="-1"></a></span>
<span id="cb489-5"><a href="web-скрапинг.html#cb489-5" tabindex="-1"></a><span class="co"># первая статья на странице</span></span>
<span id="cb489-6"><a href="web-скрапинг.html#cb489-6" tabindex="-1"></a><span class="fu">html_element</span>(rubric_page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;centercolumn&quot;]/div[3]/small/a[2]&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb489-7"><a href="web-скрапинг.html#cb489-7" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&#39;href&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;https://ecsoc.hse.ru/2023-24-5/876469050.html&quot;</code></pre>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="web-скрапинг.html#cb491-1" tabindex="-1"></a><span class="co"># последняя статья на странице</span></span>
<span id="cb491-2"><a href="web-скрапинг.html#cb491-2" tabindex="-1"></a><span class="fu">html_element</span>(rubric_page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;centercolumn&quot;]/div[12]/small/a[2]&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb491-3"><a href="web-скрапинг.html#cb491-3" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&#39;href&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;https://ecsoc.hse.ru/2022-23-3/638089235.html&quot;</code></pre>
<p>Пишем короткий цикл, чтобы получить ссылки:</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="web-скрапинг.html#cb493-1" tabindex="-1"></a><span class="co"># for-цикл, работа в глобальном окружении</span></span>
<span id="cb493-2"><a href="web-скрапинг.html#cb493-2" tabindex="-1"></a>page_urls <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb493-3"><a href="web-скрапинг.html#cb493-3" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">12</span>) {</span>
<span id="cb493-4"><a href="web-скрапинг.html#cb493-4" tabindex="-1"></a>  art_xpath <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&#39;//div[@class=&quot;centercolumn&quot;]/div[&#39;</span>, i, <span class="st">&#39;]/small/a[2]&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;&#39;</span>)</span>
<span id="cb493-5"><a href="web-скрапинг.html#cb493-5" tabindex="-1"></a>  tmp_page_url <span class="ot">&lt;-</span> <span class="fu">html_element</span>(rubric_page, <span class="at">xpath =</span> art_xpath) <span class="sc">%&gt;%</span> </span>
<span id="cb493-6"><a href="web-скрапинг.html#cb493-6" tabindex="-1"></a>    <span class="fu">html_attr</span>(<span class="st">&#39;href&#39;</span>)    </span>
<span id="cb493-7"><a href="web-скрапинг.html#cb493-7" tabindex="-1"></a>  page_urls <span class="ot">&lt;-</span> <span class="fu">c</span>(page_urls, tmp_page_url)</span>
<span id="cb493-8"><a href="web-скрапинг.html#cb493-8" tabindex="-1"></a>}</span>
<span id="cb493-9"><a href="web-скрапинг.html#cb493-9" tabindex="-1"></a><span class="fu">print</span>(page_urls[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] &quot;https://ecsoc.hse.ru/2023-24-5/876469050.html&quot;
## [2] &quot;https://ecsoc.hse.ru/2023-24-4/861891244.html&quot;
## [3] &quot;https://ecsoc.hse.ru/2023-24-4/861891738.html&quot;</code></pre>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="web-скрапинг.html#cb495-1" tabindex="-1"></a><span class="co"># lapply-цикл</span></span>
<span id="cb495-2"><a href="web-скрапинг.html#cb495-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">12</span>, <span class="cf">function</span>(x) {</span>
<span id="cb495-3"><a href="web-скрапинг.html#cb495-3" tabindex="-1"></a>  art_xpath  <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&#39;//div[@class=&quot;centercolumn&quot;]/div[&#39;</span>, x, <span class="st">&#39;]/small/a[2]&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;&#39;</span>)</span>
<span id="cb495-4"><a href="web-скрапинг.html#cb495-4" tabindex="-1"></a>  tmp_page_url <span class="ot">&lt;-</span> <span class="fu">html_element</span>(rubric_page, <span class="at">xpath =</span> art_xpath) <span class="sc">%&gt;%</span> </span>
<span id="cb495-5"><a href="web-скрапинг.html#cb495-5" tabindex="-1"></a>    <span class="fu">html_attr</span>(<span class="st">&#39;href&#39;</span>)     </span>
<span id="cb495-6"><a href="web-скрапинг.html#cb495-6" tabindex="-1"></a>  <span class="fu">return</span>(tmp_page_url)</span>
<span id="cb495-7"><a href="web-скрапинг.html#cb495-7" tabindex="-1"></a>})</span>
<span id="cb495-8"><a href="web-скрапинг.html#cb495-8" tabindex="-1"></a><span class="fu">print</span>(res[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;https://ecsoc.hse.ru/2023-24-5/876469050.html&quot;
## 
## [[2]]
## [1] &quot;https://ecsoc.hse.ru/2023-24-4/861891244.html&quot;
## 
## [[3]]
## [1] &quot;https://ecsoc.hse.ru/2023-24-4/861891738.html&quot;</code></pre>
<p>Добавляем в цикл сбор данных по статье:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="web-скрапинг.html#cb497-1" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">12</span>, <span class="cf">function</span>(x) {</span>
<span id="cb497-2"><a href="web-скрапинг.html#cb497-2" tabindex="-1"></a>  art_xpath  <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&#39;//div[@class=&quot;centercolumn&quot;]/div[&#39;</span>, x, <span class="st">&#39;]/small/a[2]&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;&#39;</span>)</span>
<span id="cb497-3"><a href="web-скрапинг.html#cb497-3" tabindex="-1"></a>  page_url <span class="ot">&lt;-</span> <span class="fu">html_element</span>(rubric_page, <span class="at">xpath =</span> art_xpath) <span class="sc">%&gt;%</span> </span>
<span id="cb497-4"><a href="web-скрапинг.html#cb497-4" tabindex="-1"></a>    <span class="fu">html_attr</span>(<span class="st">&#39;href&#39;</span>)  </span>
<span id="cb497-5"><a href="web-скрапинг.html#cb497-5" tabindex="-1"></a>  page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(page_url)</span>
<span id="cb497-6"><a href="web-скрапинг.html#cb497-6" tabindex="-1"></a>  article_info <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb497-7"><a href="web-скрапинг.html#cb497-7" tabindex="-1"></a>    <span class="at">url =</span> page_url,</span>
<span id="cb497-8"><a href="web-скрапинг.html#cb497-8" tabindex="-1"></a>    <span class="at">autor =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//h3/i&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>(),</span>
<span id="cb497-9"><a href="web-скрапинг.html#cb497-9" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//h2[@class=&quot;article-header&quot;]&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>(),</span>
<span id="cb497-10"><a href="web-скрапинг.html#cb497-10" tabindex="-1"></a>    <span class="at">annotation =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;annot&quot;]&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb497-11"><a href="web-скрапинг.html#cb497-11" tabindex="-1"></a>    <span class="at">keywords =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;keywords&quot;]&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb497-12"><a href="web-скрапинг.html#cb497-12" tabindex="-1"></a>    <span class="at">doi =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;keywords&quot;][2]&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb497-13"><a href="web-скрапинг.html#cb497-13" tabindex="-1"></a>    <span class="at">volume =</span> <span class="fu">html_element</span>(page, <span class="at">xpath =</span> <span class="st">&#39;//div[@class=&quot;centercolumn&quot;]/div&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>()</span>
<span id="cb497-14"><a href="web-скрапинг.html#cb497-14" tabindex="-1"></a>  )  </span>
<span id="cb497-15"><a href="web-скрапинг.html#cb497-15" tabindex="-1"></a>  <span class="fu">return</span>(article_info)</span>
<span id="cb497-16"><a href="web-скрапинг.html#cb497-16" tabindex="-1"></a>})</span>
<span id="cb497-17"><a href="web-скрапинг.html#cb497-17" tabindex="-1"></a><span class="fu">print</span>(res[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>##                                              url        autor
## 1: https://ecsoc.hse.ru/2023-24-5/876469050.html Шевчук А. В.
##                                                                      title
## 1: Теоретизируя цифровые платформы: концептуальная схема для гиг-экономики
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      annotation
## 1: Современная социология труда уделяет большое внимание изучению трудового опыта работников, занятых через цифровые платформы. Однако для более глубокого понимания проблем гиг-экономики этот подход необходимо дополнить анализом самих цифровых платформ как организационных структур и социальных акторов. В статье предлагается концептуальная схема подобного анализа, опирающаяся на теоретические наработки в области экономической социологии, институционализма и политэкономии.\nРоль цифровых платформ проблем атизируется с помощью пяти основных категорий (организационная инновация, фирма-медиатор, инфраструктура рынков, частный регулятор, институциональный предприниматель), которые последовательно включаются в анализ. Цифровые платформы представляют собой радикальную организационную инновацию, построенную на технологиях, способных эффективно координировать деятельность рассредоточенных агентов, не требуя их пространственного, темпорального и организационного соприсутствия. Это способствует развитию бизнеса, получающего выгоду от координации внешних по отношению к фирме работников и ресурсов. Предоставляемые платформами средства связи между экономическими агентами постепенно приобретают системный инфраструктурный характер, формируя базовые условия функционирования рынков. Имея возможность в одностороннем порядке устанавливать «правила игры» и осуществлять алгоритмическое управление, платформы превращаются в частных регуляторов рынков, конкурируя с государством. Чтобы укрепить и легитимировать свою власть, платформы активно вовлекаются в политический процесс с целью социальной реорганизации рынков и общей институциональной перестройки. На этом этапе концептуальная схема закольцовывается, возвращаясь к тому, что платформы представляют собой инновацию, в процессе диффузии которой должны быть разрешены наиболее острые социальные противоречия, связанные с бизнес-моделью фирмы-медиатора, её ролью как инфраструктуры, частного регулятора и институционального предпринимателя.\nВ статье продемонстрировано, как предложенные категории могут применяться к анализу различных проблем гиг-экономики.
##                              keywords                                  doi
## 1: Ключевые слова: цифровая экономика DOI: 10.17323/1726-3247-2023-5-11-53
##                                            volume
## 1: 2023. Т. 24. № 5. С. 11–53 [содержание номера]</code></pre>
<p><br></p>
</div>
<div id="дополнительные-материалы-3" class="section level2 unnumbered hasAnchor">
<h2>Дополнительные материалы<a href="web-скрапинг.html#дополнительные-материалы-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>Один из лучших <a href="https://www.w3schools.com/html/default.asp">справочников</a> и туториалов по HTML. Есть примеры написания и использования тэгов. Тэги описаны по функционалу, есть <a href="https://www.w3schools.com/tags/default.asp">список</a> тэгов</p></li>
<li><p><a href="https://html5book.ru/html-tags/">Справочник и туториалы</a>, как и w3s, но с некоторыми изменениями/дополнениями и на русском языке.</p></li>
<li><p><a href="https://msiter.ru/tutorials/uchebnik-xml-dlya-nachinayushchih/xml-i-xpath">Короткое</a> введение в XPath. Сайт выглядит страшненько, да и примеры все на xml (хотя разница с html минимальна). Скорее, для тех, кто хочет глубже разобраться в особенностях XPath, так как содержит много излишне детальной информации.</p></li>
<li><p><a href="https://purrr.tidyverse.org/">Страница</a> пакета <code>purrr</code> (для тех, кто хочет использовать современные функции для неявных циклов)</p></li>
<li><p><a href="https://textbook.rintro.ru/performance.html#performance-loops">Оптимизация циклов в R</a> или “как надо правильно использовать for-циклы”</p></li>
</ul>
<p><br></p>
</div>
<div id="домашнее-задание-8" class="section level2 unnumbered hasAnchor">
<h2>Домашнее задание<a href="web-скрапинг.html#домашнее-задание-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="level-1-iatytd-4" class="section level2 unnumbered hasAnchor">
<h2>level 1 (IATYTD)<a href="web-скрапинг.html#level-1-iatytd-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>прочитайте дополнительные материалы.</p></li>
<li><p>разберите код получения информации о статьях с первой страницы рубрики</p></li>
</ul>
</div>
<div id="level-2-hntr-4" class="section level2 unnumbered hasAnchor">
<h2>level 2 (HNTR)<a href="web-скрапинг.html#level-2-hntr-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>научитесь получать, сколько страниц-списков статей есть в рубрике (список 12345…N внизу каждой страницы рубрики, нам нужно вот это N)</li>
</ul>
</div>
<div id="level-3-hmp-6" class="section level2 unnumbered hasAnchor">
<h2>level 3 (HMP)<a href="web-скрапинг.html#level-3-hmp-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Прочитайте справку по функции <code>list.files()</code> и/или <code>list.dirs()</code>. Импортируйте названия файлов в какой-нибудь из ваших папок (или названия подпапок). В цикле выведите на печать первые пять названий. Например:</p>
<pre><code>## [1] &quot;aggressive_actions.xlsx&quot;
## [1] &quot;artists.csv&quot;
## [1] &quot;artwork.csv&quot;
## [1] &quot;character-predictions_pose.csv&quot;
## [1] &quot;coronavirus_dt.csv&quot;</code></pre>
</div>
<div id="level-4-uv-5" class="section level2 unnumbered hasAnchor">
<h2>level 4 (UV)<a href="web-скрапинг.html#level-4-uv-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Найдите максимальное значение по каждой колонке в таблице mtcars. Для каждой колонки выведите строку ‘Максимальное значение по колонке xxx: zzz’, где xxx и zzz - название колонки и максимальное значение соответственно.</p>
<p>Для пятой задачи вам потребуются вот такие конструкции:</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="web-скрапинг.html#cb500-1" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb500-2"><a href="web-скрапинг.html#cb500-2" tabindex="-1"></a>mtcars <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(mtcars)</span>
<span id="cb500-3"><a href="web-скрапинг.html#cb500-3" tabindex="-1"></a><span class="fu">names</span>(mtcars)</span></code></pre></div>
<pre><code>##  [1] &quot;mpg&quot;  &quot;cyl&quot;  &quot;disp&quot; &quot;hp&quot;   &quot;drat&quot; &quot;wt&quot;   &quot;qsec&quot; &quot;vs&quot;   &quot;am&quot;   &quot;gear&quot;
## [11] &quot;carb&quot;</code></pre>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="web-скрапинг.html#cb502-1" tabindex="-1"></a><span class="co"># вариант 1. обращение к колонке по номеру</span></span>
<span id="cb502-2"><a href="web-скрапинг.html#cb502-2" tabindex="-1"></a>mtcars[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>##     mpg
## 1: 21.0
## 2: 21.0
## 3: 22.8</code></pre>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="web-скрапинг.html#cb504-1" tabindex="-1"></a><span class="co"># вариант 2. обращение к колонке по ее названию, которое хранится в другом объекте</span></span>
<span id="cb504-2"><a href="web-скрапинг.html#cb504-2" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="st">&#39;mpg&#39;</span></span>
<span id="cb504-3"><a href="web-скрапинг.html#cb504-3" tabindex="-1"></a>mtcars[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">get</span>(i)]</span></code></pre></div>
<pre><code>## [1] 21.0 21.0 22.8</code></pre>
</div>
<div id="level-5-n-3" class="section level2 unnumbered hasAnchor">
<h2>level 5 (N)<a href="web-скрапинг.html#level-5-n-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Решите получение информации о десяти статьях с первой страницы рубрики с помощью for-списка (у нас в решении используется lapply).
Постарайтесь сделать это решение оптимальным с точки зрения использования памяти.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="plotly.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "static"
}
});
});
</script>

</body>

</html>
