<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>VK API | Автоматизированный сбор больших данных в экономико-социологических исследованиях</title>
  <meta name="description" content="VK API | Автоматизированный сбор больших данных в экономико-социологических исследованиях" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="VK API | Автоматизированный сбор больших данных в экономико-социологических исследованиях" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="VK API | Автоматизированный сбор больших данных в экономико-социологических исследованиях" />
  
  
  

<meta name="author" content="Ph.A.Upravitelev" />


<meta name="date" content="2023-12-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="api.html"/>
<link rel="next" href="hw-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.0/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R course</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i>Введение</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#запись-занятия"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#data-culture"><i class="fa fa-check"></i>Data culture</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#обо-мне"><i class="fa fa-check"></i>Обо мне</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#contacts"><i class="fa fa-check"></i>Contacts</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#mm-invite-link"><i class="fa fa-check"></i>MM invite link</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#syllabus"><i class="fa fa-check"></i>Syllabus</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r-intro"><i class="fa fa-check"></i>R intro</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#short-history"><i class="fa fa-check"></i>Short history</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r-ecosystem"><i class="fa fa-check"></i>R ecosystem</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r-rstudio"><i class="fa fa-check"></i>R + RStudio</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#альтернативные-ide"><i class="fa fa-check"></i>Альтернативные IDE</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#style-guide"><i class="fa fa-check"></i>Style guide</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#синтаксис"><i class="fa fa-check"></i>Синтаксис</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#структура-выражения"><i class="fa fa-check"></i>Структура выражения</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#вывод-на-печать"><i class="fa fa-check"></i>Вывод на печать</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#присваивание"><i class="fa fa-check"></i>Присваивание</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#операторы-присвоения"><i class="fa fa-check"></i>Операторы присвоения</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#арифметические-операторы"><i class="fa fa-check"></i>Арифметические операторы</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#операторы-сравнения"><i class="fa fa-check"></i>Операторы сравнения</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#логические-операторы"><i class="fa fa-check"></i>Логические операторы</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#комментарии-и-кавычки"><i class="fa fa-check"></i>Комментарии и кавычки</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#окружение-и-подсказки"><i class="fa fa-check"></i>Окружение и подсказки</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#полезные-функции-для-работы-с-окружением"><i class="fa fa-check"></i>Полезные функции для работы с окружением</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#help"><i class="fa fa-check"></i>help</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#стандартные-ошибки-в-синтаксисе"><i class="fa fa-check"></i>Стандартные ошибки в синтаксисе</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#object-not-found"><i class="fa fa-check"></i>Object not found</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#дополнительные-материалы"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#домашнее-задание"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#организационное-mm"><i class="fa fa-check"></i>Организационное / MM</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#операторы-и-создание-векторов"><i class="fa fa-check"></i>Операторы и создание векторов</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i>Векторы</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#запись-занятия-1"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#векторы"><i class="fa fa-check"></i>Векторы</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#атомарные-типы-данных"><i class="fa fa-check"></i>Атомарные типы данных</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#создание-векторов"><i class="fa fa-check"></i>Создание векторов</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#приведение-типов"><i class="fa fa-check"></i>Приведение типов</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#выбор-элемента-вектора"><i class="fa fa-check"></i>Выбор элемента вектора</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#выбор-по-номеру-позиции"><i class="fa fa-check"></i>Выбор по номеру позиции</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#выбор-по-значению"><i class="fa fa-check"></i>Выбор по значению</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#проверка-на-na"><i class="fa fa-check"></i>Проверка на NA</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#домашнее-задание-1"><i class="fa fa-check"></i>Домашнее задание</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i>Списки и таблицы</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#запись-занятия-23-сентября"><i class="fa fa-check"></i>Запись занятия 23 сентября</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#векторы-1"><i class="fa fa-check"></i>Векторы</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#поиск-по-вхождению-в-массив"><i class="fa fa-check"></i>Поиск по вхождению в массив</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#поиск-по-строке"><i class="fa fa-check"></i>Поиск по строке</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#векторизованные-операции"><i class="fa fa-check"></i>Векторизованные операции</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#recycling"><i class="fa fa-check"></i>Recycling</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#изменение-элементов-объектов"><i class="fa fa-check"></i>Изменение элементов объектов</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#списки"><i class="fa fa-check"></i>Списки</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#создание-списков"><i class="fa fa-check"></i>Создание списков</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#именованные-списки"><i class="fa fa-check"></i>Именованные списки</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#выбор-элемента-списка"><i class="fa fa-check"></i>Выбор элемента списка</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#структура-объектов"><i class="fa fa-check"></i>Структура объектов</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#таблицы"><i class="fa fa-check"></i>Таблицы</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#data.frame-vs-data.table-vs-dplyr"><i class="fa fa-check"></i>data.frame vs data.table vs dplyr</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#data.table"><i class="fa fa-check"></i>data.table</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#преимущества-data.table"><i class="fa fa-check"></i>Преимущества data.table</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#установка-и-подключение-пакета"><i class="fa fa-check"></i>Установка и подключение пакета</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#создание-data.table-таблиц"><i class="fa fa-check"></i>Создание data.table-таблиц</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#основная-формула-dt-синтаксиса"><i class="fa fa-check"></i>Основная формула dt-синтаксиса</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#создание-data.table-таблиц-1"><i class="fa fa-check"></i>Создание data.table-таблиц</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#выбор-строки"><i class="fa fa-check"></i>Выбор строки</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#дополнительные-материалы-1"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#домашнее-задание-2"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#векторы-2"><i class="fa fa-check"></i>векторы</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#списки-1"><i class="fa fa-check"></i>списки</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#таблицы.-импорт-данных"><i class="fa fa-check"></i>таблицы. импорт данных</a></li>
<li class="chapter" data-level="" data-path="lists.html"><a href="lists.html#работа-со-строками"><i class="fa fa-check"></i>работа со строками</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html"><i class="fa fa-check"></i>data.table pt1</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#запись-занятия-2"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#разбор-домашней-работы"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#списки-2"><i class="fa fa-check"></i>списки</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#таблицы.-импорт-данных-1"><i class="fa fa-check"></i>таблицы. импорт данных</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#работа-со-строками-1"><i class="fa fa-check"></i>работа со строками</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#основная-формула-dt-синтаксиса-1"><i class="fa fa-check"></i>Основная формула dt-синтаксиса</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#создание-data.table-таблиц-2"><i class="fa fa-check"></i>Создание data.table-таблиц</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#выбор-строки-1"><i class="fa fa-check"></i>Выбор строки</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#работа-с-колонками"><i class="fa fa-check"></i>Работа с колонками</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#обращение-к-колонке"><i class="fa fa-check"></i>Обращение к колонке</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#выбор-нескольких-колонок"><i class="fa fa-check"></i>Выбор нескольких колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#cоздание-колонок"><i class="fa fa-check"></i>Cоздание колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#модификация-колонок"><i class="fa fa-check"></i>Модификация колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#удаление-колонок"><i class="fa fa-check"></i>Удаление колонок</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#вычисления-по-одной-колонке"><i class="fa fa-check"></i>Вычисления по одной колонке</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#группировка-по-нескольким-полям"><i class="fa fa-check"></i>Группировка по нескольким полям</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#sd-advanced"><i class="fa fa-check"></i>.SD (Advanced)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#полезные-ссылки"><i class="fa fa-check"></i>Полезные ссылки</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#домашнее-задание-3"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#работа-с-колонками-1"><i class="fa fa-check"></i>работа с колонками</a></li>
<li class="chapter" data-level="" data-path="data.table-pt1.html"><a href="data.table-pt1.html#для-тех-кто-любит-посложнее"><i class="fa fa-check"></i>для тех, кто любит посложнее</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html"><i class="fa fa-check"></i>data.table pt2</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#запись-занятия-3"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#разбор-домашней-работы-1"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#работа-с-колонками-2"><i class="fa fa-check"></i>работа с колонками</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#для-тех-кто-любит-посложнее-1"><i class="fa fa-check"></i>для тех, кто любит посложнее</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#применение-функций"><i class="fa fa-check"></i>Применение функций</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#dataset"><i class="fa fa-check"></i>dataset</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#применение-функций-1"><i class="fa fa-check"></i>Применение функций</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#количество-строк-и-значений-.n-uniquen"><i class="fa fa-check"></i>Количество строк и значений: .N, uniqueN</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#ветвления-ifelse-fifelse"><i class="fa fa-check"></i>Ветвления: ifelse / fifelse</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#агрегации"><i class="fa fa-check"></i>Агрегации</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#вычисления-по-одной-колонке-1"><i class="fa fa-check"></i>Вычисления по одной колонке</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#вычисления-по-нескольким-колонкам"><i class="fa fa-check"></i>Вычисления по нескольким колонкам</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#группировка-по-нескольким-полям-1"><i class="fa fa-check"></i>Группировка по нескольким полям</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#манипуляции-с-таблицами"><i class="fa fa-check"></i>Манипуляции с таблицами</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#rbind"><i class="fa fa-check"></i>rbind()</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#cbind"><i class="fa fa-check"></i>cbind()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#домашнее-задание-4"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-1-iatytd"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-2-hntr"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-3-hmp"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-4-uv"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt2.html"><a href="data.table-pt2.html#level-5-n"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html"><i class="fa fa-check"></i>data.table pt3</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#запись-занятия-4"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#разбор-домашней-работы-2"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-3-hmp-1"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-4-uv-1"><i class="fa fa-check"></i>level 4 (UV)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#манипуляции-с-таблицами-1"><i class="fa fa-check"></i>Манипуляции с таблицами</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#merge"><i class="fa fa-check"></i>merge()</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#long-wide-форматы-данных"><i class="fa fa-check"></i>long / wide-форматы данных</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#dcast"><i class="fa fa-check"></i>dcast()</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#melt"><i class="fa fa-check"></i>melt()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#соотношение-list-и-в-операциях-над-колонками."><i class="fa fa-check"></i>Соотношение list() и <code>:=</code> в операциях над колонками.</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#домашнее-задание-5"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-1-iatytd-1"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-2-hntr-1"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-3-hmp-2"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-4-uv-2"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="data.table-pt3.html"><a href="data.table-pt3.html#level-5-n-1"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html"><i class="fa fa-check"></i>dt + ETL</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#запись-занятия-5"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#разбор-домашней-работы-3"><i class="fa fa-check"></i>Разбор домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-3-hmp-3"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-4-uv-3"><i class="fa fa-check"></i>level 4 (UV)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#etl"><i class="fa fa-check"></i>ETL</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#чтение-и-запись-текстовых-файлов"><i class="fa fa-check"></i>Чтение и запись текстовых файлов</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#чтение-файлов-ms-excel"><i class="fa fa-check"></i>Чтение файлов MS Excel</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#чтение-файлов-spss"><i class="fa fa-check"></i>Чтение файлов SPSS</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#дополнительная-литература"><i class="fa fa-check"></i>Дополнительная литература</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#домашнее-задание-6"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-1-iatytd-2"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-2-hntr-2"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-3-hmp-4"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-4-uv-4"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="dt-etl.html"><a href="dt-etl.html#level-5-n-2"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i>Dataviz</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#запись-занятия-6"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#intro-1"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#инфографика"><i class="fa fa-check"></i>Инфографика</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#типы-графиков"><i class="fa fa-check"></i>Типы графиков</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#scatter-plot"><i class="fa fa-check"></i>scatter plot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#line-chart"><i class="fa fa-check"></i>line chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#bar-chart"><i class="fa fa-check"></i>bar chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#grouped-bar-chart"><i class="fa fa-check"></i>grouped bar chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#stacked-bar-chart"><i class="fa fa-check"></i>stacked bar chart</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#area-plot"><i class="fa fa-check"></i>area plot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#area-plot-percentiles"><i class="fa fa-check"></i>area plot (percentiles)</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#boxplot"><i class="fa fa-check"></i>boxplot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#violin-plot"><i class="fa fa-check"></i>violin plot</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#heatmap"><i class="fa fa-check"></i>heatmap</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#geo-plots-leaflet-map"><i class="fa fa-check"></i>geo plots: leaflet map</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#d3-data-driven-documents"><i class="fa fa-check"></i>d3 (Data-Driven Documents)</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#dashboards"><i class="fa fa-check"></i>Dashboards</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#focuses"><i class="fa fa-check"></i>Focuses</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#data-looks-better-naked"><i class="fa fa-check"></i>Data looks better naked</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#the-data-ink-ratio"><i class="fa fa-check"></i>the data-ink ratio</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#clear-off-the-table"><i class="fa fa-check"></i>clear-off-the-table</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#principles"><i class="fa fa-check"></i>Principles</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#misleading-charts"><i class="fa fa-check"></i>Misleading charts</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#плохой-дизайн"><i class="fa fa-check"></i>Плохой дизайн</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#арифметические-ошибки"><i class="fa fa-check"></i>Арифметические ошибки</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#манипуляция-вниманием"><i class="fa fa-check"></i>Манипуляция вниманием</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#неверный-масштаб"><i class="fa fa-check"></i>Неверный масштаб</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#несоответствие-графиков-цифрам"><i class="fa fa-check"></i>Несоответствие графиков цифрам</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#полезные-материалы"><i class="fa fa-check"></i>Полезные материалы</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html"><i class="fa fa-check"></i>ggplot2 pt1</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#запись-занятий"><i class="fa fa-check"></i>Запись занятий</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#решение-домашней-работы"><i class="fa fa-check"></i>Решение домашней работы</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#level-1-iatytd-3"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#level-2-hntr-3"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#level-3-hmp-5"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#ggplot2-package"><i class="fa fa-check"></i>ggplot2 package</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#компоненты-графика"><i class="fa fa-check"></i>Компоненты графика</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#базовые-геомы"><i class="fa fa-check"></i>Базовые геомы</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#геомы-визуальных-акцентов"><i class="fa fa-check"></i>геомы визуальных акцентов</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#дополнительные-материалы-2"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#домашнее-задание-7"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-1"><i class="fa fa-check"></i>Задание 1</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-2"><i class="fa fa-check"></i>Задание 2</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-3"><i class="fa fa-check"></i>Задание 3</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-4"><i class="fa fa-check"></i>Задание 4</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt1.html"><a href="ggplot2-pt1.html#задание-5"><i class="fa fa-check"></i>Задание 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html"><i class="fa fa-check"></i>ggplot2 pt2</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#запись-занятий-1"><i class="fa fa-check"></i>Запись занятий</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#решение-домашки"><i class="fa fa-check"></i>Решение домашки</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#пакеты-и-данные"><i class="fa fa-check"></i>пакеты и данные</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#статистические-геомы"><i class="fa fa-check"></i>Статистические геомы</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_bar"><i class="fa fa-check"></i>geom_bar()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_histogram"><i class="fa fa-check"></i>geom_histogram()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_boxplot"><i class="fa fa-check"></i>geom_boxplot()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#geom_smooth"><i class="fa fa-check"></i>geom_smooth()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#кастомизация-графиков"><i class="fa fa-check"></i>Кастомизация графиков</a>
<ul>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#параметры-осей"><i class="fa fa-check"></i>Параметры осей</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#lims"><i class="fa fa-check"></i>lims()</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#labs"><i class="fa fa-check"></i>labs()</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#координатная-плоскость"><i class="fa fa-check"></i>Координатная плоскость</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#фасеты"><i class="fa fa-check"></i>Фасеты</a></li>
<li class="chapter" data-level="" data-path="ggplot2-pt2.html"><a href="ggplot2-pt2.html#визуальные-параметры-всего-графика"><i class="fa fa-check"></i>Визуальные параметры всего графика</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html"><i class="fa fa-check"></i>plotly</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#запись-занятия-7"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#пакеты-и-данные-1"><i class="fa fa-check"></i>Пакеты и данные</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#компоненты-графика-plotly"><i class="fa fa-check"></i>Компоненты графика plotly</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#данные-и-оси"><i class="fa fa-check"></i>Данные и оси</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#типы-графиков-1"><i class="fa fa-check"></i>Типы графиков</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#точечный-и-линейный-графики"><i class="fa fa-check"></i>Точечный и линейный графики</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#столбиковые-диаграммы"><i class="fa fa-check"></i>Столбиковые диаграммы</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#боксплоты"><i class="fa fa-check"></i>Боксплоты</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#группировка"><i class="fa fa-check"></i>Группировка</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#визуальные-параметры-графиков"><i class="fa fa-check"></i>Визуальные параметры графиков</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#легенда"><i class="fa fa-check"></i>Легенда</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#параметры-линий-и-точек"><i class="fa fa-check"></i>Параметры линий и точек</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#ховеры"><i class="fa fa-check"></i>Ховеры</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#добавляемые-слои"><i class="fa fa-check"></i>Добавляемые слои</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#наследование-параметров"><i class="fa fa-check"></i>Наследование параметров</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#общие-параметры-графиков"><i class="fa fa-check"></i>Общие параметры графиков</a>
<ul>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#заголовок"><i class="fa fa-check"></i>Заголовок</a></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#параметры-осей-1"><i class="fa fa-check"></i>Параметры осей</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotly.html"><a href="plotly.html#совмещенные-графики"><i class="fa fa-check"></i>Совмещенные графики</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html"><i class="fa fa-check"></i>Web-скрапинг</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#запись-занятия-8"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#html-интро"><i class="fa fa-check"></i>HTML интро</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#web-сервер"><i class="fa fa-check"></i>Web-сервер</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#структура-html-страницы"><i class="fa fa-check"></i>Структура html-страницы</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#css"><i class="fa fa-check"></i>css</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#rvest"><i class="fa fa-check"></i>rvest</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#общая-последовательность"><i class="fa fa-check"></i>Общая последовательность</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#импорт-страницы"><i class="fa fa-check"></i>импорт страницы</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#выбор-узлов-и-их-значений"><i class="fa fa-check"></i>Выбор узлов и их значений</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#навигация-по-дереву-тегов"><i class="fa fa-check"></i>Навигация по дереву тегов</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#циклы"><i class="fa fa-check"></i>Циклы</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#for"><i class="fa fa-check"></i>for</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#while-advanced"><i class="fa fa-check"></i>while (Advanced)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#repeat-advanced"><i class="fa fa-check"></i>repeat (Advanced)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#прерывание-циклов-advanced"><i class="fa fa-check"></i>Прерывание циклов (Advanced)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#eval-pply"><i class="fa fa-check"></i>Неявные циклы, семейство *pply</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#скрапинг-сайта-журнала"><i class="fa fa-check"></i>Скрапинг сайта журнала</a>
<ul>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#получение-информации-о-статье-и-авторе"><i class="fa fa-check"></i>Получение информации о статье и авторе</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#получение-списка-ссылок-с-страницы-рубрики"><i class="fa fa-check"></i>Получение списка ссылок с страницы рубрики</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#дополнительные-материалы-3"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#домашнее-задание-8"><i class="fa fa-check"></i>Домашнее задание</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-1-iatytd-4"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-2-hntr-4"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-3-hmp-6"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-4-uv-5"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#level-5-n-3"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i>Функции и циклы</a>
<ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#запись-занятия-9"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#условные-операторы"><i class="fa fa-check"></i>Условные операторы</a>
<ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#ifelse"><i class="fa fa-check"></i>if…else</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#ifelse-1"><i class="fa fa-check"></i>ifelse</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#switch-advanced"><i class="fa fa-check"></i>switch (Advanced)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#циклы-1"><i class="fa fa-check"></i>Циклы</a>
<ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#for-1"><i class="fa fa-check"></i>for</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#while-advanced-1"><i class="fa fa-check"></i>while (Advanced)</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#repeat-advanced-1"><i class="fa fa-check"></i>repeat (Advanced)</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#прерывание-циклов-advanced-1"><i class="fa fa-check"></i>Прерывание циклов (Advanced)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-скрапинг.html"><a href="web-скрапинг.html#eval-pply"><i class="fa fa-check"></i>Неявные циклы, семейство *pply</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#cоздание-функций"><i class="fa fa-check"></i>Cоздание функций</a>
<ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#аргументы-функции"><i class="fa fa-check"></i>Аргументы функции</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#значения-аргументов-по-умолчанию-advanced"><i class="fa fa-check"></i>Значения аргументов по умолчанию (Advanced)</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#тело-функции"><i class="fa fa-check"></i>Тело функции</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#результат-функции"><i class="fa fa-check"></i>Результат функции</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#скрапинг-сайта-журнала-1"><i class="fa fa-check"></i>Скрапинг сайта журнала</a>
<ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#сбор-информации-по-рубрике"><i class="fa fa-check"></i>Сбор информации по рубрике</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#дополнительные-материалы-4"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#домашние-задания"><i class="fa fa-check"></i>Домашние задания</a>
<ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#level-1-iatytd-5"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#level-2-hntr-5"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#level-3-hmp-7"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#level-4-uv-6"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#level-5-n-4"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html"><i class="fa fa-check"></i>API</a>
<ul>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#запись-занятия-10"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#json"><i class="fa fa-check"></i>JSON</a>
<ul>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#структура-json-объекта"><i class="fa fa-check"></i>Структура json-объекта</a></li>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#импорт-json-файлов-в-r"><i class="fa fa-check"></i>Импорт json-файлов в R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#api-1"><i class="fa fa-check"></i>API</a>
<ul>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#application-programming-interface"><i class="fa fa-check"></i>Application Programming Interface</a></li>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#основные-шаги-при-работе-с-api"><i class="fa fa-check"></i>Основные шаги при работе с API</a></li>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#accuweather"><i class="fa fa-check"></i>Accuweather</a></li>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#функции-для-получения-погоды"><i class="fa fa-check"></i>Функции для получения погоды</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="api.html"><a href="api.html#дополнительные-материалы-5"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vk-api.html"><a href="vk-api.html"><i class="fa fa-check"></i>VK API</a>
<ul>
<li class="chapter" data-level="" data-path="vk-api.html"><a href="vk-api.html#запись-занятия-11"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="vk-api.html"><a href="vk-api.html#vk-api-1"><i class="fa fa-check"></i>VK API</a>
<ul>
<li class="chapter" data-level="" data-path="vk-api.html"><a href="vk-api.html#авторизация"><i class="fa fa-check"></i>Авторизация</a></li>
<li class="chapter" data-level="" data-path="vk-api.html"><a href="vk-api.html#методы-vk-api"><i class="fa fa-check"></i>Методы VK API</a></li>
<li class="chapter" data-level="" data-path="vk-api.html"><a href="vk-api.html#правила-сервиса"><i class="fa fa-check"></i>Правила сервиса</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vk-api.html"><a href="vk-api.html#сеть-друзей"><i class="fa fa-check"></i>Сеть друзей</a></li>
<li class="chapter" data-level="" data-path="vk-api.html"><a href="vk-api.html#vkr-package"><i class="fa fa-check"></i>vkR package</a></li>
<li class="chapter" data-level="" data-path="vk-api.html"><a href="vk-api.html#дополнительные-материалы-6"><i class="fa fa-check"></i>Дополнительные материалы</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="hw-2.html"><a href="hw-2.html"><i class="fa fa-check"></i>HW 2</a>
<ul>
<li class="chapter" data-level="" data-path="hw-2.html"><a href="hw-2.html#общие-замечания"><i class="fa fa-check"></i>Общие замечания</a></li>
<li class="chapter" data-level="" data-path="hw-2.html"><a href="hw-2.html#задание-1-1"><i class="fa fa-check"></i>Задание 1</a></li>
<li class="chapter" data-level="" data-path="hw-2.html"><a href="hw-2.html#задание-2-1"><i class="fa fa-check"></i>Задание 2</a></li>
<li class="chapter" data-level="" data-path="hw-2.html"><a href="hw-2.html#задание-3-1"><i class="fa fa-check"></i>Задание 3</a></li>
<li class="chapter" data-level="" data-path="hw-2.html"><a href="hw-2.html#альтернативное-задание"><i class="fa fa-check"></i>Альтернативное задание</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Автоматизированный сбор больших данных в экономико-социологических исследованиях</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vk-api" class="section level1 unnumbered hasAnchor">
<h1>VK API<a href="vk-api.html#vk-api" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="запись-занятия-11" class="section level2 unnumbered hasAnchor">
<h2>Запись занятия<a href="vk-api.html#запись-занятия-11" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Запись занятия, которое было 13 мая, можно найти здесь:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/W6Krs2vRcSQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
</iframe>
<p><br></p>
</div>
<div id="vk-api-1" class="section level2 unnumbered hasAnchor">
<h2>VK API<a href="vk-api.html#vk-api-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="авторизация" class="section level3 unnumbered hasAnchor">
<h3>Авторизация<a href="vk-api.html#авторизация" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>В API VK возможно несколько вариантов авторизации. Мы будем использовать <em>Implicit flow</em>. Это самый короткий и простой вариант, который использует идентификатор приложения и требует интерактивного подтверждения прав приложения в браузере.</p>
<p>К API VK нельзя подключиться просто так, сразу из R - доступ выдается для приложений или VK-виджетов сайтов. То есть, для начала работы нам надо создать приложение и зарегистрировать его в VK API, потом получить для него access token и уже с этим токеном работать в R (создавать запросы к API).</p>
<p><br></p>
<div id="создание-приложения" class="section level4 unnumbered hasAnchor">
<h4>Создание приложения<a href="vk-api.html#создание-приложения" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Для создания приложения надо перейти по ссылке <a href="https://vk.com/apps?act=manage" class="uri">https://vk.com/apps?act=manage</a> и нажать там на кнопку “Создать приложение”. После этого появится окно с описанием, что это за приложение. Необходимо ввести название (любое, например, <code>test</code>) выбрать тип <code>Standalone</code> и нажать “Подключить приложение”. Возможно VK после этого попросит подтвердить создание / привязать к аккаунту (авторизация звонком или смс-кодом).
<img src="pics/vk1_api.png" />
После этого появится окно настроек приложения. В левой панели надо перейти в раздел “Настройки”.
Самое первое, что нам потребуется - ID приложения. Это тот самый client_id, который мы будем использовать при получении access token.</p>
<p>Кроме этого необходимо выставить несколько дополнительных настроек.</p>
<ul>
<li><p>В меню “Состояние” выбрать “приложение включено и видно всем” - если приложение будет выключено, то мы просто не получим токен.</p></li>
<li><p>В меню “Open API” выбрать “Включен”, после этого появятся настройки протокола авторизации.</p></li>
<li><p>В “Адрес сайта” можно указать любой сайт (так как мы делаем это в учебных целях), при работе с нормальным приложением указывают сайт приложения / компании. Я указал <code>yandex.ru</code>, точно также можно указать “hse.ru”, адрес сайта не участвует в процессе авторизации.</p></li>
<li><p>В “Базовый домен” указываем домен сайта (в нашем случае <code>.ru</code>)</p></li>
</ul>
<p><img src="pics/vk2_api.png" /></p>
<p><br></p>
</div>
<div id="access-token" class="section level4 unnumbered hasAnchor">
<h4>access token<a href="vk-api.html#access-token" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Для того, чтобы получить токен, необходимо в сфоромировать и вставить в адресную строку запрос вот такой структуры:</p>
<pre><code>https://oauth.vk.com/authorize?client_id=MY_CLIENT_ID&amp;display=page&amp;redirect_uri=https://oauth.vk.com/blank.html&amp;scope=friends&amp;response_type=token&amp;v=5.21</code></pre>
<p>В нем есть несколько частей:</p>
<ul>
<li><p><code>https://oauth.vk.com/authorize?</code> это блок, который в целом отвечает за вызов метода авторизации (то есть, этой ccылкой мы запускаем процесс авторизации)</p></li>
<li><p><code>client_id=MY_CLIENT_ID</code> это параметр, в котором мы как раз указываем полученный ранее идентификатор приложения</p></li>
<li><p><code>display=page&amp;redirect_uri=https://oauth.vk.com/blank.html</code> - технический параметр, который задает, что именно нужно сделать после авторизации и как показать результат</p></li>
<li><p><code>scope=friends</code> - еще один параметр, который требует настройки. С помощью этого параметра указываем, к каким разделам мы хотим получить доступ (точнее, дать доступ приложению). Список разделов можно посмотреть <a href="https://vk.com/dev/permissions">здесь</a>. Разделы указываются через запятую, без пробелов. Например: <code>friends,wall,docs</code>. Общая практика и требование к разработчикам приложений (мобильных, в частности) — запрашивать только те права, которые реально нужны для работы, не надо просить лишнего.</p></li>
<li><p><code>response_type=token&amp;v=5.131</code> - Два технических параметра, первый задает тип ответа на запрос об авторизации, второй указывает, какую версию API предполагается использовать. Есть <a href="https://vk.com/dev/versions">список</a> версий, однако он, кажется, не очень актуален.</p></li>
</ul>
<p>Таким образом, мы должны модифицировать этот запрос и указать в нем идентификатор приложения и набор разделов, с которыми будем работать. Это можно сделать как просто в текстовом редакторе, так и кодом. <strong>Важно! В ссылке не должно быть пробелов, а пары параметр=значение объединяются через &amp;</strong></p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="vk-api.html#cb607-1" tabindex="-1"></a>client_id <span class="ot">&lt;-</span> <span class="dv">8172745</span></span>
<span id="cb607-2"><a href="vk-api.html#cb607-2" tabindex="-1"></a>scopes <span class="ot">&lt;-</span> <span class="st">&#39;friends,docs,wall,groups&#39;</span></span>
<span id="cb607-3"><a href="vk-api.html#cb607-3" tabindex="-1"></a></span>
<span id="cb607-4"><a href="vk-api.html#cb607-4" tabindex="-1"></a>access_url <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb607-5"><a href="vk-api.html#cb607-5" tabindex="-1"></a>  <span class="st">&#39;https://oauth.vk.com/authorize?client_id=&#39;</span>, client_id,</span>
<span id="cb607-6"><a href="vk-api.html#cb607-6" tabindex="-1"></a>  <span class="st">&#39;&amp;display=page&amp;redirect_uri=https://oauth.vk.com/blank.html&amp;scope=&#39;</span>, scopes,</span>
<span id="cb607-7"><a href="vk-api.html#cb607-7" tabindex="-1"></a>  <span class="st">&#39;&amp;response_type=token&amp;v=5.131&#39;</span>,</span>
<span id="cb607-8"><a href="vk-api.html#cb607-8" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">&#39;&#39;</span></span>
<span id="cb607-9"><a href="vk-api.html#cb607-9" tabindex="-1"></a>)</span>
<span id="cb607-10"><a href="vk-api.html#cb607-10" tabindex="-1"></a></span>
<span id="cb607-11"><a href="vk-api.html#cb607-11" tabindex="-1"></a><span class="co"># просто печатаем ссылку, чтобы потом вставить в адресную строку</span></span>
<span id="cb607-12"><a href="vk-api.html#cb607-12" tabindex="-1"></a>access_url</span></code></pre></div>
<pre><code>## [1] &quot;https://oauth.vk.com/authorize?client_id=8172745&amp;display=page&amp;redirect_uri=https://oauth.vk.com/blank.html&amp;scope=friends,docs,wall,groups&amp;response_type=token&amp;v=5.131&quot;</code></pre>
<p>Переходим по полученной ссылке. Если права доступа приложению выдаются первый раз или же список разделов менялся, то вам предложат подтвердить, что это приложение имеет доступ к этим разделам.</p>
<p><strong>Важно!</strong>
Приложение запрашивает доступ к нашему аккаунту, к тем разделам, которые мы указали. Это имеет два следствия.</p>
<p>Во-первых, через это приложение мы будем иметь доступ только к тем данным, к которым мы сами имеем как пользователи. То есть, если группа закрытая, а мы в ней не состоим, то мы не сможем получить список участников группы. Аналогично, если пользователь скрыл от всех список своих друзей (либо некоторых друзей из своего списка), то приложение также не будет иметь к нему доступ. Доступ к личным сообщениям имеют только те приложения, которые были отсмотрены представителями VK.</p>
<p>Во-вторых, кому-то может не понравиться, что приложение имеет к чему-то доступ в вашем аккаунте. Это можно решить несколькими путями - никому не давать свой токен (хотя он истекает через сутки и жестко привязан к IP-адресу, с которого был получен). Либо после завершения работы надо выключить или даже удалить приложение. Если удалите приложение, то в следующий раз для получения ID придется заново создавать приложение.</p>
<p><img src="pics/vk3_api.png" /></p>
<p>После подтверждения прав мы перейдем на вот такую страницую Самое важное в ней - текст ссылки в адресной строке:</p>
<p><img src="pics/vk4_api.png" />
Вот так выглядит текст в адресной строке:</p>
<pre><code>https://oauth.vk.com/blank.html#access_token=e9718c45d548f8b3dbb8e96f71ccf4415a6f7f6e7fa3687eece2f784f37cc1a8906a4f800e7d9c0c6aff5&amp;expires_in=86400&amp;user_id=689496</code></pre>
<p>Нас интересует то, что находится между <code>access_token=</code> и <code>&amp;expires_in</code>. Это и есть токен, который мы будем использовать в наших запросах к API VK. Запишем его в отдельный объект.</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="vk-api.html#cb610-1" tabindex="-1"></a>token <span class="ot">&lt;-</span> <span class="st">&#39;vk1.a.ru-deB10Lpz23gsWUzgeoljiKp4giQyOryhe4nkPSwCyI9VWF5vCPB3rwkDmxyq9g7MMAKRvXJflWWbxr-KuKQUZm86NF-6VN6ulyXgsMOfOoO4awG50AUWBfNLf-KCKzNAze-5O8ddx4T-rZhafwJuxTk4KAgrNYNRRpInbf5olDf7mMRXsctLrTBQxWJ4fRve5bQUuCQFVooTQ1KSRpw&#39;</span></span></code></pre></div>
<p><br></p>
</div>
</div>
<div id="методы-vk-api" class="section level3 hasAnchor">
<h3>Методы VK API<a href="vk-api.html#методы-vk-api" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>После получения токена, можно формировать запросы к API для сбора интересующих данных. Общая структура запроса выглядит следующим образом:</p>
<pre><code>https://api.vk.com/method/friends.getOnline?v=5.21&amp;access_token=</code></pre>
<ul>
<li><p><code>https://api.vk.com/method/</code> - неизменная часть запроса, указание, что мы обращаемся к какому-то методу API</p></li>
<li><p><code>friends.getOnline</code> - название метода. Обычно сочетает через точку название раздела и название действия, которое необходимо сделать. Указанный в примере метод возвращает список друзей онлайн. Списки разделов и методов можно посмотреть <a href="https://vk.com/dev/methods"><em>здесь</em></a>.</p></li>
<li><p><code>?v=5.81&amp;access_token=</code> - после <code>?</code> идет перечисление параметров запроса. Неизменны в каждом запросе параметры версии (<code>v</code>) и токена, также здесь можно указать другие параметры. Список параметров и их возможные значения надо смотреть на странице соответствующего метода. Пары параметр=значение объединяются через &amp;.</p></li>
</ul>
<p><br></p>
</div>
<div id="правила-сервиса" class="section level3 unnumbered hasAnchor">
<h3>Правила сервиса<a href="vk-api.html#правила-сервиса" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>При работе со всеми API следует соблюдать правила сервиса, в противном случае приложение будет заблокировано. Правила API VK можно прочитать <a href="https://vk.com/dev/rules"><em>здесь</em></a></p>
<p><br></p>
</div>
</div>
<div id="сеть-друзей" class="section level2 unnumbered hasAnchor">
<h2>Сеть друзей<a href="vk-api.html#сеть-друзей" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Для примера работы с VK API попробуем построить сеть наших друзей (кто из друзей также является друзьями в VK). Для этого нам надо иметь доступ к разделу <code>friends</code> и работать с методом <code>friends.get</code>. Вот так выглядит запрос на список друзей (а также их город и ссылку на фото аватарки в размере 50*50 пикселей и прочие параметры). По умолчанию метод отдает только id друзей, список дополнительных данных о друзьях задается с помощью параметра <code>fields</code> (что можно указать в этом параметре - надо смотреть в документации метода). Если не указан параметр <code>user_id</code>, то по умолчанию возвращается список друзей того пользователя, кто создал приложение, токен которого используется в запросе (то есть наших друзей).</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="vk-api.html#cb612-1" tabindex="-1"></a>method_name <span class="ot">&lt;-</span> <span class="st">&#39;friends.get&#39;</span></span>
<span id="cb612-2"><a href="vk-api.html#cb612-2" tabindex="-1"></a>fields <span class="ot">&lt;-</span> <span class="st">&#39;city,country,sceen_name,sex,education,photo_50&#39;</span></span>
<span id="cb612-3"><a href="vk-api.html#cb612-3" tabindex="-1"></a></span>
<span id="cb612-4"><a href="vk-api.html#cb612-4" tabindex="-1"></a>request_url <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb612-5"><a href="vk-api.html#cb612-5" tabindex="-1"></a>  <span class="st">&#39;https://api.vk.com/method/&#39;</span>, method_name,</span>
<span id="cb612-6"><a href="vk-api.html#cb612-6" tabindex="-1"></a>  <span class="st">&#39;?access_token=&#39;</span>, token,</span>
<span id="cb612-7"><a href="vk-api.html#cb612-7" tabindex="-1"></a>  <span class="st">&#39;&amp;fields=&#39;</span>, fields,</span>
<span id="cb612-8"><a href="vk-api.html#cb612-8" tabindex="-1"></a>  <span class="co"># &#39;&amp;count=1&amp;order=random&#39;,</span></span>
<span id="cb612-9"><a href="vk-api.html#cb612-9" tabindex="-1"></a>  <span class="st">&#39;&amp;v=5.81&#39;</span>,</span>
<span id="cb612-10"><a href="vk-api.html#cb612-10" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">&#39;&#39;</span></span>
<span id="cb612-11"><a href="vk-api.html#cb612-11" tabindex="-1"></a>)</span>
<span id="cb612-12"><a href="vk-api.html#cb612-12" tabindex="-1"></a></span>
<span id="cb612-13"><a href="vk-api.html#cb612-13" tabindex="-1"></a>request_url</span></code></pre></div>
<pre><code>## [1] &quot;https://api.vk.com/method/friends.get?access_token=vk1.a.ru-deB10Lpz23gsWUzgeoljiKp4giQyOryhe4nkPSwCyI9VWF5vCPB3rwkDmxyq9g7MMAKRvXJflWWbxr-KuKQUZm86NF-6VN6ulyXgsMOfOoO4awG50AUWBfNLf-KCKzNAze-5O8ddx4T-rZhafwJuxTk4KAgrNYNRRpInbf5olDf7mMRXsctLrTBQxWJ4fRve5bQUuCQFVooTQ1KSRpw&amp;fields=city,country,sceen_name,sex,education,photo_50&amp;v=5.81&quot;</code></pre>
<p>Далее эту ссылку используем в функции <code>GET()</code> пакета <code>httr</code> и разбираем результат с помощью <code>content()</code>. При этом можно проверить результат запроса, вызвав элемент <code>status_code</code> результата функции <code>GET()</code>. В норме должен был статус 200 (впрочем, если у приложения нет доступа к какому-то разделу, все равно будет код 200, но в ответе сервера будет текст, что доступ запрещен). Прочие коды надо либо смотреть в общей <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP"><em>таблице</em></a> кодов ответов либо в <a href="https://vk.com/dev/errors"><em>списке</em></a> API VK, так как могут быть специальные коды именно этого API.</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="vk-api.html#cb614-1" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb614-2"><a href="vk-api.html#cb614-2" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb614-3"><a href="vk-api.html#cb614-3" tabindex="-1"></a></span>
<span id="cb614-4"><a href="vk-api.html#cb614-4" tabindex="-1"></a><span class="co"># импортируем список друзей</span></span>
<span id="cb614-5"><a href="vk-api.html#cb614-5" tabindex="-1"></a>my_friends <span class="ot">&lt;-</span> <span class="fu">GET</span>(request_url)</span>
<span id="cb614-6"><a href="vk-api.html#cb614-6" tabindex="-1"></a></span>
<span id="cb614-7"><a href="vk-api.html#cb614-7" tabindex="-1"></a><span class="co"># смотрим код ответа</span></span>
<span id="cb614-8"><a href="vk-api.html#cb614-8" tabindex="-1"></a>my_friends<span class="sc">$</span>status_code</span>
<span id="cb614-9"><a href="vk-api.html#cb614-9" tabindex="-1"></a></span>
<span id="cb614-10"><a href="vk-api.html#cb614-10" tabindex="-1"></a><span class="co"># извлекаем содержание в многоуровневый список</span></span>
<span id="cb614-11"><a href="vk-api.html#cb614-11" tabindex="-1"></a>my_friends <span class="ot">&lt;-</span> <span class="fu">content</span>(my_friends)</span></code></pre></div>
<p>Вот так выглядит структура результата, если выгружать только одного пользователя (закомментированная мной строчка в запросе):</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="vk-api.html#cb615-1" tabindex="-1"></a><span class="fu">str</span>(my_friends)</span></code></pre></div>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="vk-api.html#cb616-1" tabindex="-1"></a>List of <span class="dv">1</span></span>
<span id="cb616-2"><a href="vk-api.html#cb616-2" tabindex="-1"></a> <span class="sc">$</span> response<span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb616-3"><a href="vk-api.html#cb616-3" tabindex="-1"></a>  ..<span class="sc">$</span> count<span class="sc">:</span> int <span class="dv">775</span></span>
<span id="cb616-4"><a href="vk-api.html#cb616-4" tabindex="-1"></a>  ..<span class="sc">$</span> items<span class="sc">:</span>List of <span class="dv">1</span></span>
<span id="cb616-5"><a href="vk-api.html#cb616-5" tabindex="-1"></a>  .. ..<span class="sc">$</span> <span class="er">:</span>List of <span class="dv">16</span></span>
<span id="cb616-6"><a href="vk-api.html#cb616-6" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> id              <span class="sc">:</span> int <span class="dv">999999</span></span>
<span id="cb616-7"><a href="vk-api.html#cb616-7" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> first_name      <span class="sc">:</span> chr <span class="st">&quot;Петр&quot;</span></span>
<span id="cb616-8"><a href="vk-api.html#cb616-8" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> last_name       <span class="sc">:</span> chr <span class="st">&quot;Петров&quot;</span></span>
<span id="cb616-9"><a href="vk-api.html#cb616-9" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> sex             <span class="sc">:</span> int <span class="dv">2</span></span>
<span id="cb616-10"><a href="vk-api.html#cb616-10" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> city            <span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb616-11"><a href="vk-api.html#cb616-11" tabindex="-1"></a>  .. .. .. ..<span class="sc">$</span> id   <span class="sc">:</span> int <span class="dv">969</span></span>
<span id="cb616-12"><a href="vk-api.html#cb616-12" tabindex="-1"></a>  .. .. .. ..<span class="sc">$</span> title<span class="sc">:</span> chr <span class="st">&quot;City&quot;</span></span>
<span id="cb616-13"><a href="vk-api.html#cb616-13" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> country         <span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb616-14"><a href="vk-api.html#cb616-14" tabindex="-1"></a>  .. .. .. ..<span class="sc">$</span> id   <span class="sc">:</span> int <span class="dv">139</span></span>
<span id="cb616-15"><a href="vk-api.html#cb616-15" tabindex="-1"></a>  .. .. .. ..<span class="sc">$</span> title<span class="sc">:</span> chr <span class="st">&quot;Country&quot;</span></span>
<span id="cb616-16"><a href="vk-api.html#cb616-16" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> photo_50        <span class="sc">:</span> chr <span class="st">&quot;photo_url&quot;</span></span>
<span id="cb616-17"><a href="vk-api.html#cb616-17" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> university      <span class="sc">:</span> int <span class="dv">999</span></span>
<span id="cb616-18"><a href="vk-api.html#cb616-18" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> university_name <span class="sc">:</span> chr <span class="st">&quot;unicersity&quot;</span></span>
<span id="cb616-19"><a href="vk-api.html#cb616-19" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> faculty         <span class="sc">:</span> int <span class="dv">999</span></span>
<span id="cb616-20"><a href="vk-api.html#cb616-20" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> faculty_name    <span class="sc">:</span> chr <span class="st">&quot;faculty&quot;</span></span>
<span id="cb616-21"><a href="vk-api.html#cb616-21" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> graduation      <span class="sc">:</span> int <span class="dv">999</span></span>
<span id="cb616-22"><a href="vk-api.html#cb616-22" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> education_form  <span class="sc">:</span> chr <span class="st">&quot;form&quot;</span></span>
<span id="cb616-23"><a href="vk-api.html#cb616-23" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> education_status<span class="sc">:</span> chr <span class="st">&quot;status&quot;</span></span>
<span id="cb616-24"><a href="vk-api.html#cb616-24" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> online          <span class="sc">:</span> int <span class="dv">0</span></span>
<span id="cb616-25"><a href="vk-api.html#cb616-25" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> track_code      <span class="sc">:</span> chr <span class="st">&quot;track_code&quot;</span></span></code></pre></div>
<p>Результат - список, состоящий из одного подсписка <code>result</code>, который сам является список двух элементов - значения <code>count</code> (это общее количество моих друзей) <code>items</code> - это список друзей, где каждый подсписок содержит информацию по одному другу.</p>
<p>Для того, чтобы можно было работать с этим объектом, его надо каким-то образом переконвертировать в табличный вид. Проще всего это сделать с помощью связки <code>lapply()</code> + <code>rbindlist()</code>. Итерироваться будем по подспискам списка <code>items.</code> Так как не у всех может быть указан город, в <code>rbindlist()</code> используем <code>fill = TRUE</code>, чтобы пропущенные были заменены на NA, и таблички склеились нормально.</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="vk-api.html#cb617-1" tabindex="-1"></a>my_friends_table <span class="ot">&lt;-</span> <span class="fu">lapply</span>(my_friends<span class="sc">$</span>response<span class="sc">$</span>items, <span class="cf">function</span>(x) {</span>
<span id="cb617-2"><a href="vk-api.html#cb617-2" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb617-3"><a href="vk-api.html#cb617-3" tabindex="-1"></a>    <span class="at">id =</span> x<span class="sc">$</span>id,</span>
<span id="cb617-4"><a href="vk-api.html#cb617-4" tabindex="-1"></a>    <span class="at">city =</span> x<span class="sc">$</span>city<span class="sc">$</span>title,</span>
<span id="cb617-5"><a href="vk-api.html#cb617-5" tabindex="-1"></a>    <span class="at">url =</span> x<span class="sc">$</span>photo_50</span>
<span id="cb617-6"><a href="vk-api.html#cb617-6" tabindex="-1"></a>  )</span>
<span id="cb617-7"><a href="vk-api.html#cb617-7" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb617-8"><a href="vk-api.html#cb617-8" tabindex="-1"></a>})</span>
<span id="cb617-9"><a href="vk-api.html#cb617-9" tabindex="-1"></a>my_friends_table <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>(my_friends_table, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Смотрим табличку:</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb618-1"><a href="vk-api.html#cb618-1" tabindex="-1"></a>my_friends_table[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">city</th>
<th align="left">url</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">999</td>
<td align="left">Санкт-Петербург</td>
<td align="left"><a href="https://sun1-20.userapi.com/" class="uri">https://sun1-20.userapi.com/</a>….</td>
</tr>
<tr class="even">
<td align="right">1000</td>
<td align="left">London</td>
<td align="left"><a href="https://sun1-30.userapi.com/" class="uri">https://sun1-30.userapi.com/</a>….</td>
</tr>
<tr class="odd">
<td align="right">1001</td>
<td align="left">Санкт-Петербург</td>
<td align="left"><a href="https://sun1-91.userapi.com/" class="uri">https://sun1-91.userapi.com/</a>….</td>
</tr>
<tr class="even">
<td align="right">1002</td>
<td align="left">NA</td>
<td align="left"><a href="https://sun9-18.userapi.com/" class="uri">https://sun9-18.userapi.com/</a>….</td>
</tr>
<tr class="odd">
<td align="right">1003</td>
<td align="left">Санкт-Петербург</td>
<td align="left"><a href="https://sun9-7.userapi.com/" class="uri">https://sun9-7.userapi.com/</a>…..</td>
</tr>
</tbody>
</table>
<p>Для того, чтобы не делать граф друзей очень большим (все-таки задача учебная), отфильтруем список друзей таким образом, чтобы осталось где-то несколько десятков пользователей, которые могут быть связаны друг с другом. Например, можно отфильтровать по городу, по вузу или по факультету - в зависимости от вашей структуры контактов.</p>
<p>Сокращенный список назовем <code>friends_vertices</code>, так как эти люди будут вершинами графа на графике.</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="vk-api.html#cb619-1" tabindex="-1"></a>friends_vertices <span class="ot">&lt;-</span> my_friends_table[city <span class="sc">==</span> <span class="st">&#39;Барнаул&#39;</span>]</span></code></pre></div>
<p>Так как мы хотим посмотреть, как дружат наши друзья друг с другом, то теперь нам надо импортировать список друзей наших друзей, и удалить оттуда тех, кого нет у нас в друзьях. Процедура в целом схожая с получением списка друзей, только здесь достаточно будет просто импортировать идентификаторы, плюс в параметрах запроса надо буде указывать, по какому пользователю мы импортируем друзей.
<strong>Важно</strong> - если этот пользователь скрыл от нас каких-то друзей или вообще всех друзей, то мы получим пустой список для него.</p>
<p>Сразу в цикле пробегаем по нашему списку друзей и используем идентификатор в запросе (<code>'&amp;user_id=', x</code>). Импортируем только идентификаторы друзей указанного пользователя, поэтому параметра <code>fields</code> в запросе нет. Для того, чтобы API VK не блочил слишком быстрые запросы (лимит в 3 запроса в секунду), вставляем примитивный замедлитель на 0.3 секунды (<code>Sys.sleep(0.3)</code>). Результат разбираем в табличку. Так как список <code>items</code> содержит один элемент для каждого пользователя, можно просто воспользоваться функцией <code>unlist</code>, которая превращает список в вектор (когда много элементов по пользователю, так не получится, все превратится в мешанину значений и в табличку разобрать будет сложно).</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb620-1"><a href="vk-api.html#cb620-1" tabindex="-1"></a>friends_of_friends <span class="ot">&lt;-</span> <span class="fu">lapply</span>(friends_vertices[, id], <span class="cf">function</span>(x) {</span>
<span id="cb620-2"><a href="vk-api.html#cb620-2" tabindex="-1"></a>  request_url_fof <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb620-3"><a href="vk-api.html#cb620-3" tabindex="-1"></a>    <span class="st">&#39;https://api.vk.com/method/&#39;</span>, method_name,</span>
<span id="cb620-4"><a href="vk-api.html#cb620-4" tabindex="-1"></a>    <span class="st">&#39;?access_token=&#39;</span>, token,</span>
<span id="cb620-5"><a href="vk-api.html#cb620-5" tabindex="-1"></a>    <span class="st">&#39;&amp;user_id=&#39;</span>, x,</span>
<span id="cb620-6"><a href="vk-api.html#cb620-6" tabindex="-1"></a>    <span class="st">&#39;&amp;v=5.81&#39;</span>,</span>
<span id="cb620-7"><a href="vk-api.html#cb620-7" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">&#39;&#39;</span></span>
<span id="cb620-8"><a href="vk-api.html#cb620-8" tabindex="-1"></a>  )</span>
<span id="cb620-9"><a href="vk-api.html#cb620-9" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">GET</span>(request_url_fof)</span>
<span id="cb620-10"><a href="vk-api.html#cb620-10" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="fl">0.3</span>)</span>
<span id="cb620-11"><a href="vk-api.html#cb620-11" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">content</span>(res)</span>
<span id="cb620-12"><a href="vk-api.html#cb620-12" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb620-13"><a href="vk-api.html#cb620-13" tabindex="-1"></a>    <span class="at">from =</span> x,</span>
<span id="cb620-14"><a href="vk-api.html#cb620-14" tabindex="-1"></a>    <span class="at">to =</span> <span class="fu">unlist</span>(res<span class="sc">$</span>response<span class="sc">$</span>items)</span>
<span id="cb620-15"><a href="vk-api.html#cb620-15" tabindex="-1"></a>  )</span>
<span id="cb620-16"><a href="vk-api.html#cb620-16" tabindex="-1"></a>  res</span>
<span id="cb620-17"><a href="vk-api.html#cb620-17" tabindex="-1"></a>})</span>
<span id="cb620-18"><a href="vk-api.html#cb620-18" tabindex="-1"></a>friends_of_friends <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>(friends_of_friends)</span></code></pre></div>
<p>Мы получили таблицу, в которой в колонке <code>from</code> - список наших друзей. В колонке <code>to</code> - идентификаторы друзей, с которыми дружат наши друзья. Если мы хотим посмотреть именно сеть, как связаны наши друзья из семпла, из колонки <code>to</code> следует удалить идентификаторы всех людей, кроме тех, кто есть в <code>from</code>. Результат можно проверить, посчитав количество уникальных идентификаторов в <code>from</code> и <code>to</code> - во второй колонке их должно столько же, сколько в <code>from</code>. В целом, эта таблица описывает связи наших друзей (каждая строчка описывает одну связь), если кто-то из наших друзей, по кому мы хотим нарисовать граф связей, ни с кем из наших друзей не связан, то его не должно быть в таблице после фильтраций.</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="vk-api.html#cb621-1" tabindex="-1"></a><span class="co"># удаляем незнакомых людей и оставляем только связи друзей</span></span>
<span id="cb621-2"><a href="vk-api.html#cb621-2" tabindex="-1"></a>friends_edges <span class="ot">&lt;-</span> friends_of_friends[to <span class="sc">%in%</span> friends_vertices[, id]]</span></code></pre></div>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="vk-api.html#cb622-1" tabindex="-1"></a><span class="co"># считаем, сколько наших друзей ни с кем другим из наших друзей не связан</span></span>
<span id="cb622-2"><a href="vk-api.html#cb622-2" tabindex="-1"></a>friends_vertices[, <span class="fu">uniqueN</span>(id)] <span class="sc">-</span> friends_edges[, <span class="fu">uniqueN</span>(from)]</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p>График связей строится с помощью пакета <code>igraph</code>. Этот пакет, по сути, state-of-the-art в визуализации сетей в R. Однако это большой и сложный пакет, изучать его можно долго, поэтому ограничимся примерами из мануалов.</p>
<p>Попробуем нарисовать сеть, при этом внесем некоторую кастомизацию. Во-первых, можно вместо идентификаторов пользователей и безличных кружочков вершин указать аватарки пользователей (именно для этого мы импортировали ссылки на их аватарки), во-вторых, можно попробовать выделить цветом группы друзей.</p>
<p>Первым делом формируем igraph-объект, описывающий вершины социального графа и связи между ними.</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb624-1"><a href="vk-api.html#cb624-1" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb624-2"><a href="vk-api.html#cb624-2" tabindex="-1"></a><span class="co"># из списка друзей и таблицы связей формируем объект</span></span>
<span id="cb624-3"><a href="vk-api.html#cb624-3" tabindex="-1"></a><span class="co"># аргумент directed = FALSE означает, что у нас нет направления связи</span></span>
<span id="cb624-4"><a href="vk-api.html#cb624-4" tabindex="-1"></a><span class="co"># (пример направленной связи - родитель - ребенок, учител - ученик и т.д.)</span></span>
<span id="cb624-5"><a href="vk-api.html#cb624-5" tabindex="-1"></a>net <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d =</span> friends_edges,</span>
<span id="cb624-6"><a href="vk-api.html#cb624-6" tabindex="-1"></a>                             <span class="at">vertices =</span> friends_vertices,</span>
<span id="cb624-7"><a href="vk-api.html#cb624-7" tabindex="-1"></a>                             <span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb624-8"><a href="vk-api.html#cb624-8" tabindex="-1"></a><span class="co"># упрощаем объект</span></span>
<span id="cb624-9"><a href="vk-api.html#cb624-9" tabindex="-1"></a>net <span class="ot">&lt;-</span> <span class="fu">simplify</span>(net, <span class="at">remove.multiple =</span> <span class="cn">TRUE</span>, <span class="at">remove.loops =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Если мы хотим отрисовать аватарки вместо лейблов, то нам потребуется пакет <code>magick</code> (на *nix машинах и MacOS может потребовать дополнительные системные библиотеки):</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="vk-api.html#cb625-1" tabindex="-1"></a><span class="fu">library</span>(magick)</span>
<span id="cb625-2"><a href="vk-api.html#cb625-2" tabindex="-1"></a><span class="co"># brew imagemagick@6</span></span>
<span id="cb625-3"><a href="vk-api.html#cb625-3" tabindex="-1"></a></span>
<span id="cb625-4"><a href="vk-api.html#cb625-4" tabindex="-1"></a><span class="co"># импортируем аватарки по ссылке в R-объект</span></span>
<span id="cb625-5"><a href="vk-api.html#cb625-5" tabindex="-1"></a>friends_photos <span class="ot">&lt;-</span> <span class="fu">lapply</span>(friends_vertices[, url], image_read)</span>
<span id="cb625-6"><a href="vk-api.html#cb625-6" tabindex="-1"></a></span>
<span id="cb625-7"><a href="vk-api.html#cb625-7" tabindex="-1"></a><span class="co"># добавляем в описание вершин графа имопртированный список фотографий</span></span>
<span id="cb625-8"><a href="vk-api.html#cb625-8" tabindex="-1"></a><span class="fu">V</span>(net)<span class="sc">$</span>raster <span class="ot">&lt;-</span> <span class="fu">unlist</span>(friends_photos)</span></code></pre></div>
<p>Для кластеризации в <code>igraph</code> есть свои собственные функции (если интересен алогоритм - то лучше читать справку и гуглить, как они работают, я просто воспользовался примером из туториала). Создаем объект кластеров:</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb626-1"><a href="vk-api.html#cb626-1" tabindex="-1"></a><span class="co"># кластеризация</span></span>
<span id="cb626-2"><a href="vk-api.html#cb626-2" tabindex="-1"></a>clp <span class="ot">&lt;-</span> <span class="fu">cluster_fast_greedy</span>(net)</span></code></pre></div>
<p>После этого рисуем граф связей. Я не стал отрисовывать фотографии, поэтому мой код такой:</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="vk-api.html#cb627-1" tabindex="-1"></a><span class="fu">plot.igraph</span>(</span>
<span id="cb627-2"><a href="vk-api.html#cb627-2" tabindex="-1"></a>  <span class="co"># объект-описание сети</span></span>
<span id="cb627-3"><a href="vk-api.html#cb627-3" tabindex="-1"></a>  <span class="at">x =</span> net,</span>
<span id="cb627-4"><a href="vk-api.html#cb627-4" tabindex="-1"></a></span>
<span id="cb627-5"><a href="vk-api.html#cb627-5" tabindex="-1"></a>  <span class="co"># кластеры</span></span>
<span id="cb627-6"><a href="vk-api.html#cb627-6" tabindex="-1"></a>  <span class="at">mark.groups =</span> clp,</span>
<span id="cb627-7"><a href="vk-api.html#cb627-7" tabindex="-1"></a></span>
<span id="cb627-8"><a href="vk-api.html#cb627-8" tabindex="-1"></a>  <span class="co"># скрываем подписи с вершин</span></span>
<span id="cb627-9"><a href="vk-api.html#cb627-9" tabindex="-1"></a>  <span class="at">vertex.label  =</span> <span class="cn">NA</span></span>
<span id="cb627-10"><a href="vk-api.html#cb627-10" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="17_vk_api_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>Для отрисовки графа с фотографиями следует воспользоваться этим кодом:</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="vk-api.html#cb628-1" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb628-2"><a href="vk-api.html#cb628-2" tabindex="-1"></a>  <span class="at">x =</span> net,</span>
<span id="cb628-3"><a href="vk-api.html#cb628-3" tabindex="-1"></a>  <span class="at">mark.groups =</span> clp,</span>
<span id="cb628-4"><a href="vk-api.html#cb628-4" tabindex="-1"></a>  <span class="at">vertex.label  =</span> <span class="cn">NA</span>,</span>
<span id="cb628-5"><a href="vk-api.html#cb628-5" tabindex="-1"></a></span>
<span id="cb628-6"><a href="vk-api.html#cb628-6" tabindex="-1"></a>  <span class="co"># указываем, что при  отрисовке вершин используем</span></span>
<span id="cb628-7"><a href="vk-api.html#cb628-7" tabindex="-1"></a>  <span class="co"># параметр raster, заданный ранее</span></span>
<span id="cb628-8"><a href="vk-api.html#cb628-8" tabindex="-1"></a>  <span class="at">vertex.shape =</span> <span class="st">&quot;raster&quot;</span></span>
<span id="cb628-9"><a href="vk-api.html#cb628-9" tabindex="-1"></a>)</span></code></pre></div>
<p><br></p>
</div>
<div id="vkr-package" class="section level2 unnumbered hasAnchor">
<h2>vkR package<a href="vk-api.html#vkr-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>В CRAN есть пакет <code>vkR</code>, который предназначен для работы с API VK. Этот пакет, в целом, имеет функции, которые мы только что написали руками - авторизацию, сбор информации по некоторым методам (друзьям, группам и т.д.).</p>
<p>Авторизация осуществляется в пакете таким же образом, как и у нас - через создание приложение, получение ID и ссылку в браузере. В пакете есть костыль для неинтерактивной работы (можно указать логин и пароль, и тогда не надо будет копировать из браузера токен), но сделан он грязновато.</p>
<p>В целом, я не рекомендую пользоваться этим пакетом - он был написан четыре года назад и с тех пор не обновлялся. За это время часть методов API VK существенно изменилась и легко можно получить ситуацию, когда что-то не работает или работает неправильно.</p>
<p><br></p>
</div>
<div id="дополнительные-материалы-6" class="section level2 unnumbered hasAnchor">
<h2>Дополнительные материалы<a href="vk-api.html#дополнительные-материалы-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p><a href="https://dev.vk.com/api/getting-started"><em>Знакомство с API VK</em></a> - официальная документация, весьма подробная и понятная</p></li>
<li><p>Наверное, лучший <a href="https://kateto.net/network-visualization"><em>туториал</em></a> по визуализации сетей. Почти половина туториала посвящена разным аспектам пакета <code>igraph</code>. С интерактивными визуализациями рекомендую быть осторожнее - на больших датасетах они нередко могут подвисать и крашить сессию.</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="api.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="hw-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "static"
}
});
});
</script>

</body>

</html>
